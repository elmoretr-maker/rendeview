{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":54,"index":86}}],"key":"hYqFhoW7zWgYTBVE1SkA0/XFH/Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var React = _interopNamespace(_react);\n  var _expoFileSystemLegacy = require(_dependencyMap[3]);\n  var FileSystem = _interopNamespace(_expoFileSystemLegacy);\n  function useUpload() {\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  var _default = useUpload;\n});","lineCount":156,"map":[[27,2,89,0,"Object"],[27,8,89,0],[27,9,89,0,"defineProperty"],[27,23,89,0],[27,24,89,0,"exports"],[27,31,89,0],[28,4,89,0,"enumerable"],[28,14,89,0],[29,4,89,0,"get"],[29,7,89,0],[29,18,89,0,"get"],[29,19,89,0],[30,6,89,0],[30,13,89,0,"_default"],[30,21,89,0],[31,4,89,0],[32,2,89,0],[33,2,88,0,"Object"],[33,8,88,0],[33,9,88,0,"defineProperty"],[33,23,88,0],[33,24,88,0,"exports"],[33,31,88,0],[34,4,88,0,"enumerable"],[34,14,88,0],[35,4,88,0,"get"],[35,7,88,0],[35,18,88,0,"get"],[35,19,88,0],[36,6,88,0],[36,13,88,9,"useUpload"],[36,22,88,18],[37,4,88,18],[38,2,88,18],[39,2,88,21],[39,6,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[39,42,88,21],[39,45,88,21,"require"],[39,52,88,21],[39,53,88,21,"_dependencyMap"],[39,67,88,21],[40,2,88,21],[40,6,88,21,"_asyncToGenerator"],[40,23,88,21],[40,26,88,21,"_interopDefault"],[40,41,88,21],[40,42,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,78,88,21],[41,2,88,21],[41,6,88,21,"_babelRuntimeHelpersSlicedToArray"],[41,39,88,21],[41,42,88,21,"require"],[41,49,88,21],[41,50,88,21,"_dependencyMap"],[41,64,88,21],[42,2,88,21],[42,6,88,21,"_slicedToArray"],[42,20,88,21],[42,23,88,21,"_interopDefault"],[42,38,88,21],[42,39,88,21,"_babelRuntimeHelpersSlicedToArray"],[42,72,88,21],[43,2,1,0],[43,6,1,0,"_react"],[43,12,1,0],[43,15,1,0,"require"],[43,22,1,0],[43,23,1,0,"_dependencyMap"],[43,37,1,0],[44,2,1,0],[44,6,1,0,"React"],[44,11,1,0],[44,14,1,0,"_interopNamespace"],[44,31,1,0],[44,32,1,0,"_react"],[44,38,1,0],[45,2,2,0],[45,6,2,0,"_expoFileSystemLegacy"],[45,27,2,0],[45,30,2,0,"require"],[45,37,2,0],[45,38,2,0,"_dependencyMap"],[45,52,2,0],[46,2,2,0],[46,6,2,0,"FileSystem"],[46,16,2,0],[46,19,2,0,"_interopNamespace"],[46,36,2,0],[46,37,2,0,"_expoFileSystemLegacy"],[46,58,2,0],[47,2,4,0],[47,11,4,9,"useUpload"],[47,20,4,18,"useUpload"],[47,21,4,18],[47,23,4,21],[48,4,5,2],[48,8,5,2,"_React$useState"],[48,23,5,2],[48,26,5,32,"React"],[48,31,5,37],[48,32,5,38,"useState"],[48,40,5,46],[48,41,5,47],[48,46,5,52],[48,47,5,53],[49,6,5,53,"_React$useState2"],[49,22,5,53],[49,29,5,53,"_slicedToArray"],[49,43,5,53],[49,44,5,53,"default"],[49,51,5,53],[49,53,5,53,"_React$useState"],[49,68,5,53],[50,6,5,9,"loading"],[50,13,5,16],[50,16,5,16,"_React$useState2"],[50,32,5,16],[51,6,5,18,"setLoading"],[51,16,5,28],[51,19,5,28,"_React$useState2"],[51,35,5,28],[52,4,6,2],[52,8,6,8,"upload"],[52,14,6,14],[52,17,6,17,"React"],[52,22,6,22],[52,23,6,23,"useCallback"],[52,34,6,34],[53,6,6,34],[53,10,6,34,"_ref"],[53,14,6,34],[53,21,6,34,"_asyncToGenerator"],[53,38,6,34],[53,39,6,34,"default"],[53,46,6,34],[53,48,6,35],[53,59,6,42,"input"],[53,64,6,47],[53,66,6,52],[54,8,7,4],[54,12,7,8],[55,10,8,6,"setLoading"],[55,20,8,16],[55,21,8,17],[55,25,8,21],[55,26,8,22],[56,10,9,6],[56,14,9,10,"response"],[56,22,9,18],[57,10,11,6],[57,14,11,10],[57,32,11,28],[57,36,11,32,"input"],[57,41,11,37],[57,45,11,41,"input"],[57,50,11,46],[57,51,11,47,"reactNativeAsset"],[57,67,11,63],[57,69,11,65],[58,12,12,8],[58,16,12,14,"asset"],[58,21,12,19],[58,24,12,22,"input"],[58,29,12,27],[58,30,12,28,"reactNativeAsset"],[58,46,12,44],[60,12,14,8],[61,12,15,8],[61,16,15,12,"asset"],[61,21,15,17],[61,22,15,18,"base64"],[61,28,15,24],[61,30,15,26],[62,14,16,10],[63,14,17,10,"response"],[63,22,17,18],[63,31,17,27,"fetch"],[63,36,17,32],[63,37,17,33],[63,57,17,53],[63,59,17,55],[64,16,18,12,"method"],[64,22,18,18],[64,24,18,20],[64,30,18,26],[65,16,19,12,"headers"],[65,23,19,19],[65,25,19,21],[66,18,20,14],[66,32,20,28],[66,34,20,30],[67,16,21,12],[67,17,21,13],[68,16,22,12,"body"],[68,20,22,16],[68,22,22,18,"JSON"],[68,26,22,22],[68,27,22,23,"stringify"],[68,36,22,32],[68,37,22,33],[69,18,22,35,"base64"],[69,24,22,41],[69,26,22,43,"asset"],[69,31,22,48],[69,32,22,49,"base64"],[70,16,22,56],[70,17,22,57],[71,14,23,10],[71,15,23,11],[71,16,23,12],[72,12,24,8],[72,13,24,9],[72,19,24,15],[72,23,24,19,"asset"],[72,28,24,24],[72,29,24,25,"uri"],[72,32,24,28],[72,34,24,30],[73,14,25,10],[74,14,26,10],[74,18,26,16,"base64Data"],[74,28,26,26],[74,37,26,35,"FileSystem"],[74,47,26,45],[74,48,26,46,"readAsStringAsync"],[74,65,26,63],[74,66,26,64,"asset"],[74,71,26,69],[74,72,26,70,"uri"],[74,75,26,73],[74,77,26,75],[75,16,27,12,"encoding"],[75,24,27,20],[75,26,27,22,"FileSystem"],[75,36,27,32],[75,37,27,33,"EncodingType"],[75,49,27,45],[75,50,27,46,"Base64"],[76,14,28,10],[76,15,28,11],[76,16,28,12],[77,14,29,10,"response"],[77,22,29,18],[77,31,29,27,"fetch"],[77,36,29,32],[77,37,29,33],[77,57,29,53],[77,59,29,55],[78,16,30,12,"method"],[78,22,30,18],[78,24,30,20],[78,30,30,26],[79,16,31,12,"headers"],[79,23,31,19],[79,25,31,21],[80,18,32,14],[80,32,32,28],[80,34,32,30],[81,16,33,12],[81,17,33,13],[82,16,34,12,"body"],[82,20,34,16],[82,22,34,18,"JSON"],[82,26,34,22],[82,27,34,23,"stringify"],[82,36,34,32],[82,37,34,33],[83,18,34,35,"base64"],[83,24,34,41],[83,26,34,43,"base64Data"],[84,16,34,54],[84,17,34,55],[85,14,35,10],[85,15,35,11],[85,16,35,12],[86,12,36,8],[86,13,36,9],[86,19,36,15],[87,14,37,10],[87,20,37,16],[87,24,37,20,"Error"],[87,29,37,25],[87,30,37,26],[87,65,37,61],[87,66,37,62],[88,12,38,8],[89,10,39,6],[89,11,39,7],[89,17,39,13],[89,21,39,17],[89,26,39,22],[89,30,39,26,"input"],[89,35,39,31],[89,37,39,33],[90,12,40,8,"response"],[90,20,40,16],[90,29,40,25,"fetch"],[90,34,40,30],[90,35,40,31],[90,55,40,51],[90,57,40,53],[91,14,41,10,"method"],[91,20,41,16],[91,22,41,18],[91,28,41,24],[92,14,42,10,"headers"],[92,21,42,17],[92,23,42,19],[93,16,43,12],[93,30,43,26],[93,32,43,28],[94,14,44,10],[94,15,44,11],[95,14,45,10,"body"],[95,18,45,14],[95,20,45,16,"JSON"],[95,24,45,20],[95,25,45,21,"stringify"],[95,34,45,30],[95,35,45,31],[96,16,45,33,"url"],[96,19,45,36],[96,21,45,38,"input"],[96,26,45,43],[96,27,45,44,"url"],[97,14,45,48],[97,15,45,49],[98,12,46,8],[98,13,46,9],[98,14,46,10],[99,10,47,6],[99,11,47,7],[99,17,47,13],[99,21,47,17],[99,29,47,25],[99,33,47,29,"input"],[99,38,47,34],[99,40,47,36],[100,12,48,8,"response"],[100,20,48,16],[100,29,48,25,"fetch"],[100,34,48,30],[100,35,48,31],[100,55,48,51],[100,57,48,53],[101,14,49,10,"method"],[101,20,49,16],[101,22,49,18],[101,28,49,24],[102,14,50,10,"headers"],[102,21,50,17],[102,23,50,19],[103,16,51,12],[103,30,51,26],[103,32,51,28],[104,14,52,10],[104,15,52,11],[105,14,53,10,"body"],[105,18,53,14],[105,20,53,16,"JSON"],[105,24,53,20],[105,25,53,21,"stringify"],[105,34,53,30],[105,35,53,31],[106,16,53,33,"base64"],[106,22,53,39],[106,24,53,41,"input"],[106,29,53,46],[106,30,53,47,"base64"],[107,14,53,54],[107,15,53,55],[108,12,54,8],[108,13,54,9],[108,14,54,10],[109,10,55,6],[109,11,55,7],[109,17,55,13],[110,12,56,8,"response"],[110,20,56,16],[110,29,56,25,"fetch"],[110,34,56,30],[110,35,56,31],[110,55,56,51],[110,57,56,53],[111,14,57,10,"method"],[111,20,57,16],[111,22,57,18],[111,28,57,24],[112,14,58,10,"headers"],[112,21,58,17],[112,23,58,19],[113,16,59,12],[113,30,59,26],[113,32,59,28],[114,14,60,10],[114,15,60,11],[115,14,61,10,"body"],[115,18,61,14],[115,20,61,16,"input"],[115,25,61,21],[115,26,61,22,"buffer"],[116,12,62,8],[116,13,62,9],[116,14,62,10],[117,10,63,6],[118,10,64,6],[118,14,64,10],[118,15,64,11,"response"],[118,23,64,19],[118,25,64,21,"ok"],[118,27,64,23],[118,29,64,25],[119,12,65,8],[119,16,65,12,"response"],[119,24,65,20],[119,28,65,24,"response"],[119,36,65,32],[119,37,65,33,"status"],[119,43,65,39],[119,48,65,44],[119,51,65,47],[119,53,65,49],[120,14,66,10],[120,20,66,16],[120,24,66,20,"Error"],[120,29,66,25],[120,30,66,26],[120,62,66,58],[120,63,66,59],[121,12,67,8],[122,12,68,8],[122,18,68,14],[122,22,68,18,"Error"],[122,27,68,23],[122,28,68,24],[122,43,68,39],[122,44,68,40],[123,10,69,6],[124,10,70,6],[124,14,70,12,"data"],[124,18,70,16],[124,27,70,25,"response"],[124,35,70,33],[124,36,70,34,"json"],[124,40,70,38],[124,41,70,39],[124,42,70,40],[125,10,71,6],[125,17,71,13],[126,12,71,15,"url"],[126,15,71,18],[126,17,71,20,"data"],[126,21,71,24],[126,22,71,25,"url"],[126,25,71,28],[127,12,71,30,"mimeType"],[127,20,71,38],[127,22,71,40,"data"],[127,26,71,44],[127,27,71,45,"mimeType"],[127,35,71,53],[127,39,71,57],[128,10,71,62],[128,11,71,63],[129,8,72,4],[129,9,72,5],[129,10,72,6],[129,17,72,13,"uploadError"],[129,28,72,24],[129,30,72,26],[130,10,73,6],[130,14,73,10,"uploadError"],[130,25,73,21],[130,37,73,33,"Error"],[130,42,73,38],[130,44,73,40],[131,12,74,8],[131,19,74,15],[132,14,74,17,"error"],[132,19,74,22],[132,21,74,24,"uploadError"],[132,32,74,35],[132,33,74,36,"message"],[133,12,74,44],[133,13,74,45],[134,10,75,6],[135,10,76,6],[135,14,76,10],[135,21,76,17,"uploadError"],[135,32,76,28],[135,37,76,33],[135,45,76,41],[135,47,76,43],[136,12,77,8],[136,19,77,15],[137,14,77,17,"error"],[137,19,77,22],[137,21,77,24,"uploadError"],[138,12,77,36],[138,13,77,37],[139,10,78,6],[140,10,79,6],[140,17,79,13],[141,12,79,15,"error"],[141,17,79,20],[141,19,79,22],[142,10,79,38],[142,11,79,39],[143,8,80,4],[143,9,80,5],[143,18,80,14],[144,10,81,6,"setLoading"],[144,20,81,16],[144,21,81,17],[144,26,81,22],[144,27,81,23],[145,8,82,4],[146,6,83,2],[146,7,83,3],[147,6,83,3],[147,23,83,3,"_x"],[147,25,83,3],[148,8,83,3],[148,15,83,3,"_ref"],[148,19,83,3],[148,20,83,3,"apply"],[148,25,83,3],[148,32,83,3,"arguments"],[148,41,83,3],[149,6,83,3],[150,4,83,3],[150,9,83,5],[150,11,83,7],[150,12,83,8],[151,4,85,2],[151,11,85,9],[151,12,85,10,"upload"],[151,18,85,16],[151,20,85,18],[152,6,85,20,"loading"],[153,4,85,28],[153,5,85,29],[153,6,85,30],[154,2,86,0],[155,2,89,0],[155,6,89,0,"_default"],[155,14,89,0],[155,17,89,15,"useUpload"],[155,26,89,24],[156,0,89,25],[156,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACG;mCCE;GD6E;CDG"},"hasCjsExports":false},"type":"js/module"}]}