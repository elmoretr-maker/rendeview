{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":52,"index":90}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":40,"index":131}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"react-native-webview","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":132},"end":{"line":4,"column":47,"index":179}}],"key":"YJc7i/oIweCWhKjzjfYLEcLeUJA=","exportNames":["*"],"imports":1}},{"name":"./store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":180},"end":{"line":5,"column":39,"index":219}}],"key":"5APpJpQn7z9vMHIr4H9Bv6aaMsY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthWebView\", {\n    enumerable: true,\n    get: function () {\n      return AuthWebView;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoRouter = require(_dependencyMap[2]);\n  var _react = require(_dependencyMap[3]);\n  require(_dependencyMap[4]);\n  var _reactNativeWebview = require(_dependencyMap[5]);\n  var _store = require(_dependencyMap[6]);\n  var _reactJsxRuntime = require(_dependencyMap[7]);\n  var callbackUrl = '/api/auth/token';\n  var callbackQueryString = `callbackUrl=${callbackUrl}`;\n\n  /**\n   * This renders a WebView for authentication and handles both web and native platforms.\n   */\n  var AuthWebView = _ref => {\n    var mode = _ref.mode,\n      proxyURL = _ref.proxyURL,\n      baseURL = _ref.baseURL;\n    var _useState = (0, _react.useState)(`${baseURL}/account/${mode}?${callbackQueryString}`),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      currentURI = _useState2[0],\n      setURI = _useState2[1];\n    var _useAuthStore = (0, _store.useAuthStore)(),\n      auth = _useAuthStore.auth,\n      setAuth = _useAuthStore.setAuth,\n      isReady = _useAuthStore.isReady;\n    var isAuthenticated = isReady ? !!auth : null;\n    var iframeRef = (0, _react.useRef)(null);\n    (0, _react.useEffect)(() => {\n      if (isAuthenticated) {\n        _expoRouter.router.back();\n      }\n    }, [isAuthenticated]);\n    (0, _react.useEffect)(() => {\n      if (isAuthenticated) {\n        return;\n      }\n      setURI(`${baseURL}/account/${mode}?${callbackQueryString}`);\n    }, [mode, baseURL, isAuthenticated]);\n    (0, _react.useEffect)(() => {\n      if (typeof window === 'undefined' || !window.addEventListener) {\n        return;\n      }\n      var handleMessage = event => {\n        // Verify the origin for security\n        if (event.origin !== \"https://f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\") {\n          return;\n        }\n        if (event.data.type === 'AUTH_SUCCESS') {\n          setAuth({\n            jwt: event.data.jwt,\n            user: event.data.user\n          });\n        } else if (event.data.type === 'AUTH_ERROR') {\n          console.error('Auth error:', event.data.error);\n        }\n      };\n      window.addEventListener('message', handleMessage);\n      return () => {\n        window.removeEventListener('message', handleMessage);\n      };\n    }, [setAuth]);\n    return /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNativeWebview.WebView, {\n      sharedCookiesEnabled: true,\n      source: {\n        uri: currentURI\n      },\n      headers: {\n        'x-createxyz-project-group-id': \"create-anything\",\n        host: \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\",\n        'x-forwarded-host': \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\",\n        'x-createxyz-host': \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\"\n      },\n      onShouldStartLoadWithRequest: request => {\n        if (request.url === `${baseURL}${callbackUrl}`) {\n          fetch(request.url).then(/*#__PURE__*/function () {\n            var _ref2 = (0, _asyncToGenerator.default)(function* (response) {\n              response.json().then(data => {\n                setAuth({\n                  jwt: data.jwt,\n                  user: data.user\n                });\n              });\n            });\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n          return false;\n        }\n        if (request.url === currentURI) return true;\n\n        // Add query string properly by checking if URL already has parameters\n        var hasParams = request.url.includes('?');\n        var separator = hasParams ? '&' : '?';\n        var newURL = request.url.replaceAll(proxyURL, baseURL);\n        if (newURL.endsWith(callbackUrl)) {\n          setURI(newURL);\n          return false;\n        }\n        setURI(`${newURL}${separator}${callbackQueryString}`);\n        return false;\n      },\n      style: {\n        flex: 1\n      }\n    });\n  };\n});","lineCount":128,"map":[[12,2,13,0,"Object"],[12,8,13,0],[12,9,13,0,"defineProperty"],[12,23,13,0],[12,24,13,0,"exports"],[12,31,13,0],[13,4,13,0,"enumerable"],[13,14,13,0],[14,4,13,0,"get"],[14,7,13,0],[14,18,13,0,"get"],[14,19,13,0],[15,6,13,0],[15,13,13,0,"AuthWebView"],[15,24,13,0],[16,4,13,0],[17,2,13,0],[18,2,111,2],[18,6,111,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,111,2],[18,45,111,2,"require"],[18,52,111,2],[18,53,111,2,"_dependencyMap"],[18,67,111,2],[19,2,111,2],[19,6,111,2,"_asyncToGenerator"],[19,23,111,2],[19,26,111,2,"_interopDefault"],[19,41,111,2],[19,42,111,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,111,2],[20,2,111,2],[20,6,111,2,"_babelRuntimeHelpersSlicedToArray"],[20,39,111,2],[20,42,111,2,"require"],[20,49,111,2],[20,50,111,2,"_dependencyMap"],[20,64,111,2],[21,2,111,2],[21,6,111,2,"_slicedToArray"],[21,20,111,2],[21,23,111,2,"_interopDefault"],[21,38,111,2],[21,39,111,2,"_babelRuntimeHelpersSlicedToArray"],[21,72,111,2],[22,2,1,0],[22,6,1,0,"_expoRouter"],[22,17,1,0],[22,20,1,0,"require"],[22,27,1,0],[22,28,1,0,"_dependencyMap"],[22,42,1,0],[23,2,2,0],[23,6,2,0,"_react"],[23,12,2,0],[23,15,2,0,"require"],[23,22,2,0],[23,23,2,0,"_dependencyMap"],[23,37,2,0],[24,2,3,0,"require"],[24,9,3,0],[24,10,3,0,"_dependencyMap"],[24,24,3,0],[25,2,4,0],[25,6,4,0,"_reactNativeWebview"],[25,25,4,0],[25,28,4,0,"require"],[25,35,4,0],[25,36,4,0,"_dependencyMap"],[25,50,4,0],[26,2,5,0],[26,6,5,0,"_store"],[26,12,5,0],[26,15,5,0,"require"],[26,22,5,0],[26,23,5,0,"_dependencyMap"],[26,37,5,0],[27,2,5,39],[27,6,5,39,"_reactJsxRuntime"],[27,22,5,39],[27,25,5,39,"require"],[27,32,5,39],[27,33,5,39,"_dependencyMap"],[27,47,5,39],[28,2,7,0],[28,6,7,6,"callbackUrl"],[28,17,7,17],[28,20,7,20],[28,37,7,37],[29,2,8,0],[29,6,8,6,"callbackQueryString"],[29,25,8,25],[29,28,8,28],[29,43,8,43,"callbackUrl"],[29,54,8,54],[29,56,8,56],[31,2,10,0],[32,0,11,0],[33,0,12,0],[34,2,13,7],[34,6,13,13,"AuthWebView"],[34,17,13,24],[34,20,13,27,"_ref"],[34,24,13,27],[34,28,13,60],[35,4,13,60],[35,8,13,30,"mode"],[35,12,13,34],[35,15,13,34,"_ref"],[35,19,13,34],[35,20,13,30,"mode"],[35,24,13,34],[36,6,13,36,"proxyURL"],[36,14,13,44],[36,17,13,44,"_ref"],[36,21,13,44],[36,22,13,36,"proxyURL"],[36,30,13,44],[37,6,13,46,"baseURL"],[37,13,13,53],[37,16,13,53,"_ref"],[37,20,13,53],[37,21,13,46,"baseURL"],[37,28,13,53],[38,4,14,2],[38,8,14,2,"_useState"],[38,17,14,2],[38,20,14,31],[38,24,14,31,"useState"],[38,30,14,39],[38,31,14,39,"useState"],[38,39,14,39],[38,41,14,40],[38,44,14,43,"baseURL"],[38,51,14,50],[38,63,14,62,"mode"],[38,67,14,66],[38,71,14,70,"callbackQueryString"],[38,90,14,89],[38,92,14,91],[38,93,14,92],[39,6,14,92,"_useState2"],[39,16,14,92],[39,23,14,92,"_slicedToArray"],[39,37,14,92],[39,38,14,92,"default"],[39,45,14,92],[39,47,14,92,"_useState"],[39,56,14,92],[40,6,14,9,"currentURI"],[40,16,14,19],[40,19,14,19,"_useState2"],[40,29,14,19],[41,6,14,21,"setURI"],[41,12,14,27],[41,15,14,27,"_useState2"],[41,25,14,27],[42,4,15,2],[42,8,15,2,"_useAuthStore"],[42,21,15,2],[42,24,15,37],[42,28,15,37,"useAuthStore"],[42,34,15,49],[42,35,15,49,"useAuthStore"],[42,47,15,49],[42,49,15,50],[42,50,15,51],[43,6,15,10,"auth"],[43,10,15,14],[43,13,15,14,"_useAuthStore"],[43,26,15,14],[43,27,15,10,"auth"],[43,31,15,14],[44,6,15,16,"setAuth"],[44,13,15,23],[44,16,15,23,"_useAuthStore"],[44,29,15,23],[44,30,15,16,"setAuth"],[44,37,15,23],[45,6,15,25,"isReady"],[45,13,15,32],[45,16,15,32,"_useAuthStore"],[45,29,15,32],[45,30,15,25,"isReady"],[45,37,15,32],[46,4,16,2],[46,8,16,8,"isAuthenticated"],[46,23,16,23],[46,26,16,26,"isReady"],[46,33,16,33],[46,36,16,36],[46,37,16,37],[46,38,16,38,"auth"],[46,42,16,42],[46,45,16,45],[46,49,16,49],[47,4,17,2],[47,8,17,8,"iframeRef"],[47,17,17,17],[47,20,17,20],[47,24,17,20,"useRef"],[47,30,17,26],[47,31,17,26,"useRef"],[47,37,17,26],[47,39,17,27],[47,43,17,31],[47,44,17,32],[48,4,18,2],[48,8,18,2,"useEffect"],[48,14,18,11],[48,15,18,11,"useEffect"],[48,24,18,11],[48,26,18,12],[48,32,18,18],[49,6,22,4],[49,10,22,8,"isAuthenticated"],[49,25,22,23],[49,27,22,25],[50,8,23,6,"router"],[50,19,23,12],[50,20,23,12,"router"],[50,26,23,12],[50,27,23,13,"back"],[50,31,23,17],[50,32,23,18],[50,33,23,19],[51,6,24,4],[52,4,25,2],[52,5,25,3],[52,7,25,5],[52,8,25,6,"isAuthenticated"],[52,23,25,21],[52,24,25,22],[52,25,25,23],[53,4,26,2],[53,8,26,2,"useEffect"],[53,14,26,11],[53,15,26,11,"useEffect"],[53,24,26,11],[53,26,26,12],[53,32,26,18],[54,6,27,4],[54,10,27,8,"isAuthenticated"],[54,25,27,23],[54,27,27,25],[55,8,28,6],[56,6,29,4],[57,6,30,4,"setURI"],[57,12,30,10],[57,13,30,11],[57,16,30,14,"baseURL"],[57,23,30,21],[57,35,30,33,"mode"],[57,39,30,37],[57,43,30,41,"callbackQueryString"],[57,62,30,60],[57,64,30,62],[57,65,30,63],[58,4,31,2],[58,5,31,3],[58,7,31,5],[58,8,31,6,"mode"],[58,12,31,10],[58,14,31,12,"baseURL"],[58,21,31,19],[58,23,31,21,"isAuthenticated"],[58,38,31,36],[58,39,31,37],[58,40,31,38],[59,4,33,2],[59,8,33,2,"useEffect"],[59,14,33,11],[59,15,33,11,"useEffect"],[59,24,33,11],[59,26,33,12],[59,32,33,18],[60,6,34,4],[60,10,34,8],[60,17,34,15,"window"],[60,23,34,21],[60,28,34,26],[60,39,34,37],[60,43,34,41],[60,44,34,42,"window"],[60,50,34,48],[60,51,34,49,"addEventListener"],[60,67,34,65],[60,69,34,67],[61,8,35,6],[62,6,36,4],[63,6,37,4],[63,10,37,10,"handleMessage"],[63,23,37,23],[63,26,37,27,"event"],[63,31,37,32],[63,35,37,37],[64,8,38,6],[65,8,39,6],[65,12,39,10,"event"],[65,17,39,15],[65,18,39,16,"origin"],[65,24,39,22],[65,108,39,65],[65,110,39,67],[66,10,40,8],[67,8,41,6],[68,8,42,6],[68,12,42,10,"event"],[68,17,42,15],[68,18,42,16,"data"],[68,22,42,20],[68,23,42,21,"type"],[68,27,42,25],[68,32,42,30],[68,46,42,44],[68,48,42,46],[69,10,43,8,"setAuth"],[69,17,43,15],[69,18,43,16],[70,12,44,10,"jwt"],[70,15,44,13],[70,17,44,15,"event"],[70,22,44,20],[70,23,44,21,"data"],[70,27,44,25],[70,28,44,26,"jwt"],[70,31,44,29],[71,12,45,10,"user"],[71,16,45,14],[71,18,45,16,"event"],[71,23,45,21],[71,24,45,22,"data"],[71,28,45,26],[71,29,45,27,"user"],[72,10,46,8],[72,11,46,9],[72,12,46,10],[73,8,47,6],[73,9,47,7],[73,15,47,13],[73,19,47,17,"event"],[73,24,47,22],[73,25,47,23,"data"],[73,29,47,27],[73,30,47,28,"type"],[73,34,47,32],[73,39,47,37],[73,51,47,49],[73,53,47,51],[74,10,48,8,"console"],[74,17,48,15],[74,18,48,16,"error"],[74,23,48,21],[74,24,48,22],[74,37,48,35],[74,39,48,37,"event"],[74,44,48,42],[74,45,48,43,"data"],[74,49,48,47],[74,50,48,48,"error"],[74,55,48,53],[74,56,48,54],[75,8,49,6],[76,6,50,4],[76,7,50,5],[77,6,52,4,"window"],[77,12,52,10],[77,13,52,11,"addEventListener"],[77,29,52,27],[77,30,52,28],[77,39,52,37],[77,41,52,39,"handleMessage"],[77,54,52,52],[77,55,52,53],[78,6,54,4],[78,13,54,11],[78,19,54,17],[79,8,55,6,"window"],[79,14,55,12],[79,15,55,13,"removeEventListener"],[79,34,55,32],[79,35,55,33],[79,44,55,42],[79,46,55,44,"handleMessage"],[79,59,55,57],[79,60,55,58],[80,6,56,4],[80,7,56,5],[81,4,57,2],[81,5,57,3],[81,7,57,5],[81,8,57,6,"setAuth"],[81,15,57,13],[81,16,57,14],[81,17,57,15],[82,4,74,2],[82,24,75,4],[82,28,75,4,"_reactJsxRuntime"],[82,44,75,4],[82,45,75,4,"jsx"],[82,48,75,4],[82,50,75,5,"_reactNativeWebview"],[82,69,75,12],[82,70,75,12,"WebView"],[82,77,75,12],[83,6,76,6,"sharedCookiesEnabled"],[83,26,76,26],[84,6,77,6,"source"],[84,12,77,12],[84,14,77,14],[85,8,78,8,"uri"],[85,11,78,11],[85,13,78,13,"currentURI"],[86,6,79,6],[86,7,79,8],[87,6,80,6,"headers"],[87,13,80,13],[87,15,80,15],[88,8,81,8],[88,38,81,38],[88,57,81,80],[89,8,82,8,"host"],[89,12,82,12],[89,85,82,42],[90,8,83,8],[90,26,83,26],[90,99,83,56],[91,8,84,8],[91,26,84,26],[92,6,85,6],[92,7,85,8],[93,6,86,6,"onShouldStartLoadWithRequest"],[93,34,86,34],[93,36,86,37,"request"],[93,43,86,44],[93,47,86,49],[94,8,87,8],[94,12,87,12,"request"],[94,19,87,19],[94,20,87,20,"url"],[94,23,87,23],[94,28,87,28],[94,31,87,31,"baseURL"],[94,38,87,38],[94,41,87,41,"callbackUrl"],[94,52,87,52],[94,54,87,54],[94,56,87,56],[95,10,88,10,"fetch"],[95,15,88,15],[95,16,88,16,"request"],[95,23,88,23],[95,24,88,24,"url"],[95,27,88,27],[95,28,88,28],[95,29,88,29,"then"],[95,33,88,33],[96,12,88,33],[96,16,88,33,"_ref2"],[96,21,88,33],[96,28,88,33,"_asyncToGenerator"],[96,45,88,33],[96,46,88,33,"default"],[96,53,88,33],[96,55,88,34],[96,66,88,41,"response"],[96,74,88,49],[96,76,88,54],[97,14,89,12,"response"],[97,22,89,20],[97,23,89,21,"json"],[97,27,89,25],[97,28,89,26],[97,29,89,27],[97,30,89,28,"then"],[97,34,89,32],[97,35,89,34,"data"],[97,39,89,38],[97,43,89,43],[98,16,90,14,"setAuth"],[98,23,90,21],[98,24,90,22],[99,18,90,24,"jwt"],[99,21,90,27],[99,23,90,29,"data"],[99,27,90,33],[99,28,90,34,"jwt"],[99,31,90,37],[100,18,90,39,"user"],[100,22,90,43],[100,24,90,45,"data"],[100,28,90,49],[100,29,90,50,"user"],[101,16,90,55],[101,17,90,56],[101,18,90,57],[102,14,91,12],[102,15,91,13],[102,16,91,14],[103,12,92,10],[103,13,92,11],[104,12,92,11],[104,29,92,11,"_x"],[104,31,92,11],[105,14,92,11],[105,21,92,11,"_ref2"],[105,26,92,11],[105,27,92,11,"apply"],[105,32,92,11],[105,39,92,11,"arguments"],[105,48,92,11],[106,12,92,11],[107,10,92,11],[107,14,92,12],[108,10,93,10],[108,17,93,17],[108,22,93,22],[109,8,94,8],[110,8,95,8],[110,12,95,12,"request"],[110,19,95,19],[110,20,95,20,"url"],[110,23,95,23],[110,28,95,28,"currentURI"],[110,38,95,38],[110,40,95,40],[110,47,95,47],[110,51,95,51],[112,8,97,8],[113,8,98,8],[113,12,98,14,"hasParams"],[113,21,98,23],[113,24,98,26,"request"],[113,31,98,33],[113,32,98,34,"url"],[113,35,98,37],[113,36,98,38,"includes"],[113,44,98,46],[113,45,98,47],[113,48,98,50],[113,49,98,51],[114,8,99,8],[114,12,99,14,"separator"],[114,21,99,23],[114,24,99,26,"hasParams"],[114,33,99,35],[114,36,99,38],[114,39,99,41],[114,42,99,44],[114,45,99,47],[115,8,100,8],[115,12,100,14,"newURL"],[115,18,100,20],[115,21,100,23,"request"],[115,28,100,30],[115,29,100,31,"url"],[115,32,100,34],[115,33,100,35,"replaceAll"],[115,43,100,45],[115,44,100,46,"proxyURL"],[115,52,100,54],[115,54,100,56,"baseURL"],[115,61,100,63],[115,62,100,64],[116,8,101,8],[116,12,101,12,"newURL"],[116,18,101,18],[116,19,101,19,"endsWith"],[116,27,101,27],[116,28,101,28,"callbackUrl"],[116,39,101,39],[116,40,101,40],[116,42,101,42],[117,10,102,10,"setURI"],[117,16,102,16],[117,17,102,17,"newURL"],[117,23,102,23],[117,24,102,24],[118,10,103,10],[118,17,103,17],[118,22,103,22],[119,8,104,8],[120,8,105,8,"setURI"],[120,14,105,14],[120,15,105,15],[120,18,105,18,"newURL"],[120,24,105,24],[120,27,105,27,"separator"],[120,36,105,36],[120,39,105,39,"callbackQueryString"],[120,58,105,58],[120,60,105,60],[120,61,105,61],[121,8,106,8],[121,15,106,15],[121,20,106,20],[122,6,107,6],[122,7,107,8],[123,6,108,6,"style"],[123,11,108,11],[123,13,108,13],[124,8,108,15,"flex"],[124,12,108,19],[124,14,108,21],[125,6,108,23],[126,4,108,25],[126,5,109,5],[126,6,109,6],[127,2,111,0],[127,3,111,1],[128,0,111,2],[128,3]],"functionMap":{"names":["<global>","AuthWebView","useEffect$argument_0","handleMessage","<anonymous>","handleIframeError","WebView.props.onShouldStartLoadWithRequest","fetch.then$argument_0","response.json.then$argument_0"],"mappings":"AAA;2BCY;YCK;GDO;YCC;GDK;YCE;0BCI;KDa;WEI;KFE;GDC;8BIG;KJE;oCKwB;kCCE;iCCC;aDE;WDC;OLe;CDI"},"hasCjsExports":false},"type":"js/module"}]}