{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":40,"index":85}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":55,"index":141}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.OnboardingGuard = OnboardingGuard;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _expoRouter = require(_dependencyMap[3]);\n  var _reactNative = require(_dependencyMap[4]);\n  var _reactJsxRuntime = require(_dependencyMap[5]);\n  var COLORS = {\n    primary: \"#5B3BAF\",\n    bg: \"#F9F9F9\"\n  };\n  function OnboardingGuard(_ref) {\n    var children = _ref.children,\n      _ref$allowUnauthentic = _ref.allowUnauthenticated,\n      allowUnauthenticated = _ref$allowUnauthentic === undefined ? false : _ref$allowUnauthentic;\n    var router = (0, _expoRouter.useRouter)();\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      checking = _useState2[0],\n      setChecking = _useState2[1];\n    (0, _react.useEffect)(() => {\n      var checkOnboardingStatus = /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          try {\n            var res = yield fetch(\"/api/profile\");\n            if (!res.ok) {\n              if (res.status === 401 && !allowUnauthenticated) {\n                router.replace(\"/onboarding/welcome\");\n                return;\n              }\n              if (res.status === 401 && allowUnauthenticated) {\n                setChecking(false);\n                return;\n              }\n              throw new Error(\"Failed to check profile\");\n            }\n            var data = yield res.json();\n            var user = data?.user;\n            var media = data?.media || [];\n            var photos = media.filter(m => m.type === \"photo\");\n            if (user?.consent_accepted && user?.membership_tier && user?.name && photos.length >= 2) {\n              router.replace(\"/(tabs)\");\n              return;\n            }\n            setChecking(false);\n          } catch (e) {\n            console.error(\"Onboarding guard error:\", e);\n            setChecking(false);\n          }\n        });\n        return function checkOnboardingStatus() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n      checkOnboardingStatus();\n    }, [router, allowUnauthenticated]);\n    if (checking) {\n      return /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          backgroundColor: COLORS.bg\n        },\n        children: /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.ActivityIndicator, {\n          size: \"large\",\n          color: COLORS.primary\n        })\n      });\n    }\n    return children;\n  }\n});","lineCount":86,"map":[[12,2,10,0,"exports"],[12,9,10,0],[12,10,10,0,"OnboardingGuard"],[12,25,10,0],[12,28,10,0,"OnboardingGuard"],[12,43,10,0],[13,2,72,1],[13,6,72,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,72,1],[13,45,72,1,"require"],[13,52,72,1],[13,53,72,1,"_dependencyMap"],[13,67,72,1],[14,2,72,1],[14,6,72,1,"_asyncToGenerator"],[14,23,72,1],[14,26,72,1,"_interopDefault"],[14,41,72,1],[14,42,72,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,72,1],[15,2,72,1],[15,6,72,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,72,1],[15,42,72,1,"require"],[15,49,72,1],[15,50,72,1,"_dependencyMap"],[15,64,72,1],[16,2,72,1],[16,6,72,1,"_slicedToArray"],[16,20,72,1],[16,23,72,1,"_interopDefault"],[16,38,72,1],[16,39,72,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,72,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_expoRouter"],[18,17,2,0],[18,20,2,0,"require"],[18,27,2,0],[18,28,2,0,"_dependencyMap"],[18,42,2,0],[19,2,3,0],[19,6,3,0,"_reactNative"],[19,18,3,0],[19,21,3,0,"require"],[19,28,3,0],[19,29,3,0,"_dependencyMap"],[19,43,3,0],[20,2,3,55],[20,6,3,55,"_reactJsxRuntime"],[20,22,3,55],[20,25,3,55,"require"],[20,32,3,55],[20,33,3,55,"_dependencyMap"],[20,47,3,55],[21,2,5,0],[21,6,5,6,"COLORS"],[21,12,5,12],[21,15,5,15],[22,4,6,2,"primary"],[22,11,6,9],[22,13,6,11],[22,22,6,20],[23,4,7,2,"bg"],[23,6,7,4],[23,8,7,6],[24,2,8,0],[24,3,8,1],[25,2,10,7],[25,11,10,16,"OnboardingGuard"],[25,26,10,31,"OnboardingGuard"],[25,27,10,31,"_ref"],[25,31,10,31],[25,33,10,76],[26,4,10,76],[26,8,10,34,"children"],[26,16,10,42],[26,19,10,42,"_ref"],[26,23,10,42],[26,24,10,34,"children"],[26,32,10,42],[27,6,10,42,"_ref$allowUnauthentic"],[27,27,10,42],[27,30,10,42,"_ref"],[27,34,10,42],[27,35,10,44,"allowUnauthenticated"],[27,55,10,64],[28,6,10,44,"allowUnauthenticated"],[28,26,10,64],[28,29,10,64,"_ref$allowUnauthentic"],[28,50,10,64],[28,55,10,64,"undefined"],[28,64,10,64],[28,67,10,67],[28,72,10,72],[28,75,10,72,"_ref$allowUnauthentic"],[28,96,10,72],[29,4,11,2],[29,8,11,8,"router"],[29,14,11,14],[29,17,11,17],[29,21,11,17,"useRouter"],[29,32,11,26],[29,33,11,26,"useRouter"],[29,42,11,26],[29,44,11,27],[29,45,11,28],[30,4,12,2],[30,8,12,2,"_useState"],[30,17,12,2],[30,20,12,34],[30,24,12,34,"useState"],[30,30,12,42],[30,31,12,42,"useState"],[30,39,12,42],[30,41,12,43],[30,45,12,47],[30,46,12,48],[31,6,12,48,"_useState2"],[31,16,12,48],[31,23,12,48,"_slicedToArray"],[31,37,12,48],[31,38,12,48,"default"],[31,45,12,48],[31,47,12,48,"_useState"],[31,56,12,48],[32,6,12,9,"checking"],[32,14,12,17],[32,17,12,17,"_useState2"],[32,27,12,17],[33,6,12,19,"setChecking"],[33,17,12,30],[33,20,12,30,"_useState2"],[33,30,12,30],[34,4,14,2],[34,8,14,2,"useEffect"],[34,14,14,11],[34,15,14,11,"useEffect"],[34,24,14,11],[34,26,14,12],[34,32,14,18],[35,6,15,4],[35,10,15,10,"checkOnboardingStatus"],[35,31,15,31],[36,8,15,31],[36,12,15,31,"_ref2"],[36,17,15,31],[36,24,15,31,"_asyncToGenerator"],[36,41,15,31],[36,42,15,31,"default"],[36,49,15,31],[36,51,15,34],[36,64,15,46],[37,10,16,6],[37,14,16,10],[38,12,17,8],[38,16,17,14,"res"],[38,19,17,17],[38,28,17,26,"fetch"],[38,33,17,31],[38,34,17,32],[38,48,17,46],[38,49,17,47],[39,12,19,8],[39,16,19,12],[39,17,19,13,"res"],[39,20,19,16],[39,21,19,17,"ok"],[39,23,19,19],[39,25,19,21],[40,14,20,10],[40,18,20,14,"res"],[40,21,20,17],[40,22,20,18,"status"],[40,28,20,24],[40,33,20,29],[40,36,20,32],[40,40,20,36],[40,41,20,37,"allowUnauthenticated"],[40,61,20,57],[40,63,20,59],[41,16,21,12,"router"],[41,22,21,18],[41,23,21,19,"replace"],[41,30,21,26],[41,31,21,27],[41,52,21,48],[41,53,21,49],[42,16,22,12],[43,14,23,10],[44,14,24,10],[44,18,24,14,"res"],[44,21,24,17],[44,22,24,18,"status"],[44,28,24,24],[44,33,24,29],[44,36,24,32],[44,40,24,36,"allowUnauthenticated"],[44,60,24,56],[44,62,24,58],[45,16,25,12,"setChecking"],[45,27,25,23],[45,28,25,24],[45,33,25,29],[45,34,25,30],[46,16,26,12],[47,14,27,10],[48,14,28,10],[48,20,28,16],[48,24,28,20,"Error"],[48,29,28,25],[48,30,28,26],[48,55,28,51],[48,56,28,52],[49,12,29,8],[50,12,31,8],[50,16,31,14,"data"],[50,20,31,18],[50,29,31,27,"res"],[50,32,31,30],[50,33,31,31,"json"],[50,37,31,35],[50,38,31,36],[50,39,31,37],[51,12,32,8],[51,16,32,14,"user"],[51,20,32,18],[51,23,32,21,"data"],[51,27,32,25],[51,29,32,27,"user"],[51,33,32,31],[52,12,33,8],[52,16,33,14,"media"],[52,21,33,19],[52,24,33,22,"data"],[52,28,33,26],[52,30,33,28,"media"],[52,35,33,33],[52,39,33,37],[52,41,33,39],[53,12,34,8],[53,16,34,14,"photos"],[53,22,34,20],[53,25,34,23,"media"],[53,30,34,28],[53,31,34,29,"filter"],[53,37,34,35],[53,38,34,37,"m"],[53,39,34,38],[53,43,34,43,"m"],[53,44,34,44],[53,45,34,45,"type"],[53,49,34,49],[53,54,34,54],[53,61,34,61],[53,62,34,62],[54,12,36,8],[54,16,37,10,"user"],[54,20,37,14],[54,22,37,16,"consent_accepted"],[54,38,37,32],[54,42,38,10,"user"],[54,46,38,14],[54,48,38,16,"membership_tier"],[54,63,38,31],[54,67,39,10,"user"],[54,71,39,14],[54,73,39,16,"name"],[54,77,39,20],[54,81,40,10,"photos"],[54,87,40,16],[54,88,40,17,"length"],[54,94,40,23],[54,98,40,27],[54,99,40,28],[54,101,41,10],[55,14,42,10,"router"],[55,20,42,16],[55,21,42,17,"replace"],[55,28,42,24],[55,29,42,25],[55,38,42,34],[55,39,42,35],[56,14,43,10],[57,12,44,8],[58,12,46,8,"setChecking"],[58,23,46,19],[58,24,46,20],[58,29,46,25],[58,30,46,26],[59,10,47,6],[59,11,47,7],[59,12,47,8],[59,19,47,15,"e"],[59,20,47,16],[59,22,47,18],[60,12,48,8,"console"],[60,19,48,15],[60,20,48,16,"error"],[60,25,48,21],[60,26,48,22],[60,51,48,47],[60,53,48,49,"e"],[60,54,48,50],[60,55,48,51],[61,12,49,8,"setChecking"],[61,23,49,19],[61,24,49,20],[61,29,49,25],[61,30,49,26],[62,10,50,6],[63,8,51,4],[63,9,51,5],[64,8,51,5],[64,24,15,10,"checkOnboardingStatus"],[64,45,15,31,"checkOnboardingStatus"],[64,46,15,31],[65,10,15,31],[65,17,15,31,"_ref2"],[65,22,15,31],[65,23,15,31,"apply"],[65,28,15,31],[65,35,15,31,"arguments"],[65,44,15,31],[66,8,15,31],[67,6,15,31],[67,9,51,5],[68,6,53,4,"checkOnboardingStatus"],[68,27,53,25],[68,28,53,26],[68,29,53,27],[69,4,54,2],[69,5,54,3],[69,7,54,5],[69,8,54,6,"router"],[69,14,54,12],[69,16,54,14,"allowUnauthenticated"],[69,36,54,34],[69,37,54,35],[69,38,54,36],[70,4,56,2],[70,8,56,6,"checking"],[70,16,56,14],[70,18,56,16],[71,6,57,4],[71,26,58,6],[71,30,58,6,"_reactJsxRuntime"],[71,46,58,6],[71,47,58,6,"jsx"],[71,50,58,6],[71,52,58,7,"_reactNative"],[71,64,58,11],[71,65,58,11,"View"],[71,69,58,11],[72,8,59,8,"style"],[72,13,59,13],[72,15,59,15],[73,10,60,10,"flex"],[73,14,60,14],[73,16,60,16],[73,17,60,17],[74,10,61,10,"justifyContent"],[74,24,61,24],[74,26,61,26],[74,34,61,34],[75,10,62,10,"alignItems"],[75,20,62,20],[75,22,62,22],[75,30,62,30],[76,10,63,10,"backgroundColor"],[76,25,63,25],[76,27,63,27,"COLORS"],[76,33,63,33],[76,34,63,34,"bg"],[77,8,64,8],[77,9,64,10],[78,8,64,10,"children"],[78,16,64,10],[78,31,66,8],[78,35,66,8,"_reactJsxRuntime"],[78,51,66,8],[78,52,66,8,"jsx"],[78,55,66,8],[78,57,66,9,"_reactNative"],[78,69,66,26],[78,70,66,26,"ActivityIndicator"],[78,87,66,26],[79,10,66,27,"size"],[79,14,66,31],[79,16,66,32],[79,23,66,39],[80,10,66,40,"color"],[80,15,66,45],[80,17,66,47,"COLORS"],[80,23,66,53],[80,24,66,54,"primary"],[81,8,66,62],[81,9,66,64],[82,6,66,65],[82,7,67,12],[82,8,67,13],[83,4,69,2],[84,4,71,2],[84,11,71,9,"children"],[84,19,71,17],[85,2,72,0],[86,0,72,1],[86,3]],"functionMap":{"names":["<global>","OnboardingGuard","useEffect$argument_0","checkOnboardingStatus","media.filter$argument_0"],"mappings":"AAA;OCS;YCI;kCCC;oCCmB,yBD;KDiB;GDG;CDkB"},"hasCjsExports":false},"type":"js/module"}]}