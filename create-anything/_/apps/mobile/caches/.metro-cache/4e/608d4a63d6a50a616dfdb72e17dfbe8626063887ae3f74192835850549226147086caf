{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"expo/fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":48,"index":98}}],"key":"ug2WTu871fxhwUkT+lg+x8TWZJo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoSecureStore = require(_dependencyMap[2]);\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _expoFetch = require(_dependencyMap[3]);\n  var originalFetch = fetch;\n  var authKey = `${\"create-anything\"}-jwt`;\n  var getURLFromArgs = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var urlArg = args[0];\n    var url;\n    if (typeof urlArg === 'string') {\n      url = urlArg;\n    } else if (typeof urlArg === 'object' && urlArg !== null) {\n      url = urlArg.url;\n    } else {\n      url = null;\n    }\n    return url;\n  };\n  var isFirstPartyURL = url => {\n    return url.startsWith('/') || url.startsWith(\"https://f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\");\n  };\n  var isSecondPartyURL = url => {\n    return url.startsWith('/_create/');\n  };\n  var fetchToWeb = /*#__PURE__*/function () {\n    var _fetchWithHeaders = (0, _asyncToGenerator.default)(function* () {\n      var firstPartyURL = \"https://f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\";\n      var secondPartyURL = \"https://f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\";\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      var input = args[0],\n        init = args[1];\n      var url = getURLFromArgs(input, init);\n      if (!url) {\n        return (0, _expoFetch.fetch)(input, init);\n      }\n      var isExternalFetch = !isFirstPartyURL(url);\n      // we should not add headers to requests that don't go to our own server\n      if (isExternalFetch) {\n        return (0, _expoFetch.fetch)(input, init);\n      }\n      var finalInput = input;\n      var baseURL = isSecondPartyURL(url) ? secondPartyURL : firstPartyURL;\n      if (typeof input === 'string') {\n        finalInput = input.startsWith('/') ? `${baseURL}${input}` : input;\n      } else {\n        return originalFetch(input, init);\n      }\n      var initHeaders = init?.headers ?? {};\n      var finalHeaders = new Headers(initHeaders);\n      var headers = {\n        'x-createxyz-project-group-id': \"create-anything\",\n        host: \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\",\n        'x-forwarded-host': \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\",\n        'x-createxyz-host': \"f0121a5d-5e80-4c70-b963-40a63b270b5b-00-oioc9jggg354.spock.replit.dev\"\n      };\n      for (var _ref of Object.entries(headers)) {\n        var _ref2 = (0, _slicedToArray.default)(_ref, 2);\n        var key = _ref2[0];\n        var value = _ref2[1];\n        if (value) {\n          finalHeaders.set(key, value);\n        }\n      }\n      var auth = yield SecureStore.getItemAsync(authKey).then(auth => {\n        return auth ? JSON.parse(auth) : null;\n      }).catch(() => {\n        return null;\n      });\n      if (auth) {\n        finalHeaders.set('authorization', `Bearer ${auth.jwt}`);\n      }\n      return (0, _expoFetch.fetch)(finalInput, {\n        ...init,\n        headers: finalHeaders\n      });\n    });\n    function fetchWithHeaders() {\n      return _fetchWithHeaders.apply(this, arguments);\n    }\n    return fetchWithHeaders;\n  }();\n  var _default = fetchToWeb;\n});","lineCount":123,"map":[[27,2,92,0,"Object"],[27,8,92,0],[27,9,92,0,"defineProperty"],[27,23,92,0],[27,24,92,0,"exports"],[27,31,92,0],[28,4,92,0,"enumerable"],[28,14,92,0],[29,4,92,0,"get"],[29,7,92,0],[29,18,92,0,"get"],[29,19,92,0],[30,6,92,0],[30,13,92,0,"_default"],[30,21,92,0],[31,4,92,0],[32,2,92,0],[33,2,92,26],[33,6,92,26,"_babelRuntimeHelpersSlicedToArray"],[33,39,92,26],[33,42,92,26,"require"],[33,49,92,26],[33,50,92,26,"_dependencyMap"],[33,64,92,26],[34,2,92,26],[34,6,92,26,"_slicedToArray"],[34,20,92,26],[34,23,92,26,"_interopDefault"],[34,38,92,26],[34,39,92,26,"_babelRuntimeHelpersSlicedToArray"],[34,72,92,26],[35,2,92,26],[35,6,92,26,"_babelRuntimeHelpersAsyncToGenerator"],[35,42,92,26],[35,45,92,26,"require"],[35,52,92,26],[35,53,92,26,"_dependencyMap"],[35,67,92,26],[36,2,92,26],[36,6,92,26,"_asyncToGenerator"],[36,23,92,26],[36,26,92,26,"_interopDefault"],[36,41,92,26],[36,42,92,26,"_babelRuntimeHelpersAsyncToGenerator"],[36,78,92,26],[37,2,1,0],[37,6,1,0,"_expoSecureStore"],[37,22,1,0],[37,25,1,0,"require"],[37,32,1,0],[37,33,1,0,"_dependencyMap"],[37,47,1,0],[38,2,1,0],[38,6,1,0,"SecureStore"],[38,17,1,0],[38,20,1,0,"_interopNamespace"],[38,37,1,0],[38,38,1,0,"_expoSecureStore"],[38,54,1,0],[39,2,2,0],[39,6,2,0,"_expoFetch"],[39,16,2,0],[39,19,2,0,"require"],[39,26,2,0],[39,27,2,0,"_dependencyMap"],[39,41,2,0],[40,2,4,0],[40,6,4,6,"originalFetch"],[40,19,4,19],[40,22,4,22,"fetch"],[40,27,4,27],[41,2,5,0],[41,6,5,6,"authKey"],[41,13,5,13],[41,16,5,16],[41,42,5,65],[42,2,7,0],[42,6,7,6,"getURLFromArgs"],[42,20,7,20],[42,23,7,23],[42,32,7,23,"getURLFromArgs"],[42,33,7,23],[42,35,7,62],[43,4,7,62],[43,13,7,62,"_len"],[43,17,7,62],[43,20,7,62,"arguments"],[43,29,7,62],[43,30,7,62,"length"],[43,36,7,62],[43,38,7,27,"args"],[43,42,7,31],[43,49,7,31,"Array"],[43,54,7,31],[43,55,7,31,"_len"],[43,59,7,31],[43,62,7,31,"_key"],[43,66,7,31],[43,72,7,31,"_key"],[43,76,7,31],[43,79,7,31,"_len"],[43,83,7,31],[43,85,7,31,"_key"],[43,89,7,31],[44,6,7,27,"args"],[44,10,7,31],[44,11,7,31,"_key"],[44,15,7,31],[44,19,7,31,"arguments"],[44,28,7,31],[44,29,7,31,"_key"],[44,33,7,31],[45,4,7,31],[46,4,8,2],[46,8,8,9,"urlArg"],[46,14,8,15],[46,17,8,19,"args"],[46,21,8,23],[47,4,9,2],[47,8,9,6,"url"],[47,11,9,24],[48,4,10,2],[48,8,10,6],[48,15,10,13,"urlArg"],[48,21,10,19],[48,26,10,24],[48,34,10,32],[48,36,10,34],[49,6,11,4,"url"],[49,9,11,7],[49,12,11,10,"urlArg"],[49,18,11,16],[50,4,12,2],[50,5,12,3],[50,11,12,9],[50,15,12,13],[50,22,12,20,"urlArg"],[50,28,12,26],[50,33,12,31],[50,41,12,39],[50,45,12,43,"urlArg"],[50,51,12,49],[50,56,12,54],[50,60,12,58],[50,62,12,60],[51,6,13,4,"url"],[51,9,13,7],[51,12,13,10,"urlArg"],[51,18,13,16],[51,19,13,17,"url"],[51,22,13,20],[52,4,14,2],[52,5,14,3],[52,11,14,9],[53,6,15,4,"url"],[53,9,15,7],[53,12,15,10],[53,16,15,14],[54,4,16,2],[55,4,17,2],[55,11,17,9,"url"],[55,14,17,12],[56,2,18,0],[56,3,18,1],[57,2,20,0],[57,6,20,6,"isFirstPartyURL"],[57,21,20,21],[57,24,20,25,"url"],[57,27,20,36],[57,31,20,41],[58,4,21,2],[58,11,22,4,"url"],[58,14,22,7],[58,15,22,8,"startsWith"],[58,25,22,18],[58,26,22,19],[58,29,22,22],[58,30,22,23],[58,34,23,41,"url"],[58,37,23,44],[58,38,23,45,"startsWith"],[58,48,23,55],[58,128,23,88],[58,129,23,90],[59,2,25,0],[59,3,25,1],[60,2,27,0],[60,6,27,6,"isSecondPartyURL"],[60,22,27,22],[60,25,27,26,"url"],[60,28,27,37],[60,32,27,42],[61,4,28,2],[61,11,28,9,"url"],[61,14,28,12],[61,15,28,13,"startsWith"],[61,25,28,23],[61,26,28,24],[61,37,28,35],[61,38,28,36],[62,2,29,0],[62,3,29,1],[63,2,32,0],[63,6,32,6,"fetchToWeb"],[63,16,32,16],[64,4,32,16],[64,8,32,16,"_fetchWithHeaders"],[64,25,32,16],[64,32,32,16,"_asyncToGenerator"],[64,49,32,16],[64,50,32,16,"default"],[64,57,32,16],[64,59,32,19],[64,72,32,68],[65,6,33,2],[65,10,33,8,"firstPartyURL"],[65,23,33,21],[65,105,33,56],[66,6,34,2],[66,10,34,8,"secondPartyURL"],[66,24,34,22],[66,106,34,63],[67,6,34,64],[67,15,34,64,"_len2"],[67,20,34,64],[67,23,34,64,"arguments"],[67,32,34,64],[67,33,34,64,"length"],[67,39,34,64],[67,41,32,54,"args"],[67,45,32,58],[67,52,32,58,"Array"],[67,57,32,58],[67,58,32,58,"_len2"],[67,63,32,58],[67,66,32,58,"_key2"],[67,71,32,58],[67,77,32,58,"_key2"],[67,82,32,58],[67,85,32,58,"_len2"],[67,90,32,58],[67,92,32,58,"_key2"],[67,97,32,58],[68,8,32,54,"args"],[68,12,32,58],[68,13,32,58,"_key2"],[68,18,32,58],[68,22,32,58,"arguments"],[68,31,32,58],[68,32,32,58,"_key2"],[68,37,32,58],[69,6,32,58],[70,6,38,2],[70,10,38,9,"input"],[70,15,38,14],[70,18,38,24,"args"],[70,22,38,28],[71,8,38,16,"init"],[71,12,38,20],[71,15,38,24,"args"],[71,19,38,28],[72,6,39,2],[72,10,39,8,"url"],[72,13,39,11],[72,16,39,14,"getURLFromArgs"],[72,30,39,28],[72,31,39,29,"input"],[72,36,39,34],[72,38,39,36,"init"],[72,42,39,40],[72,43,39,41],[73,6,40,2],[73,10,40,6],[73,11,40,7,"url"],[73,14,40,10],[73,16,40,12],[74,8,41,4],[74,15,41,11],[74,19,41,11,"expoFetch"],[74,29,41,20],[74,30,41,20,"fetch"],[74,35,41,20],[74,37,41,21,"input"],[74,42,41,26],[74,44,41,28,"init"],[74,48,41,32],[74,49,41,33],[75,6,42,2],[76,6,44,2],[76,10,44,8,"isExternalFetch"],[76,25,44,23],[76,28,44,26],[76,29,44,27,"isFirstPartyURL"],[76,44,44,42],[76,45,44,43,"url"],[76,48,44,46],[76,49,44,47],[77,6,45,2],[78,6,46,2],[78,10,46,6,"isExternalFetch"],[78,25,46,21],[78,27,46,23],[79,8,47,4],[79,15,47,11],[79,19,47,11,"expoFetch"],[79,29,47,20],[79,30,47,20,"fetch"],[79,35,47,20],[79,37,47,21,"input"],[79,42,47,26],[79,44,47,28,"init"],[79,48,47,32],[79,49,47,33],[80,6,48,2],[81,6,50,2],[81,10,50,6,"finalInput"],[81,20,50,16],[81,23,50,19,"input"],[81,28,50,24],[82,6,51,2],[82,10,51,8,"baseURL"],[82,17,51,15],[82,20,51,18,"isSecondPartyURL"],[82,36,51,34],[82,37,51,35,"url"],[82,40,51,38],[82,41,51,39],[82,44,51,42,"secondPartyURL"],[82,58,51,56],[82,61,51,59,"firstPartyURL"],[82,74,51,72],[83,6,52,2],[83,10,52,6],[83,17,52,13,"input"],[83,22,52,18],[83,27,52,23],[83,35,52,31],[83,37,52,33],[84,8,53,4,"finalInput"],[84,18,53,14],[84,21,53,17,"input"],[84,26,53,22],[84,27,53,23,"startsWith"],[84,37,53,33],[84,38,53,34],[84,41,53,37],[84,42,53,38],[84,45,53,41],[84,48,53,44,"baseURL"],[84,55,53,51],[84,58,53,54,"input"],[84,63,53,59],[84,65,53,61],[84,68,53,64,"input"],[84,73,53,69],[85,6,54,2],[85,7,54,3],[85,13,54,9],[86,8,55,4],[86,15,55,11,"originalFetch"],[86,28,55,24],[86,29,55,25,"input"],[86,34,55,30],[86,36,55,32,"init"],[86,40,55,36],[86,41,55,37],[87,6,56,2],[88,6,58,2],[88,10,58,8,"initHeaders"],[88,21,58,19],[88,24,58,22,"init"],[88,28,58,26],[88,30,58,28,"headers"],[88,37,58,35],[88,41,58,39],[88,42,58,40],[88,43,58,41],[89,6,59,2],[89,10,59,8,"finalHeaders"],[89,22,59,20],[89,25,59,23],[89,29,59,27,"Headers"],[89,36,59,34],[89,37,59,35,"initHeaders"],[89,48,59,46],[89,49,59,47],[90,6,61,2],[90,10,61,8,"headers"],[90,17,61,15],[90,20,61,18],[91,8,62,4],[91,38,62,34],[91,57,62,76],[92,8,63,4,"host"],[92,12,63,8],[92,85,63,38],[93,8,64,4],[93,26,64,22],[93,99,64,52],[94,8,65,4],[94,26,65,22],[95,6,66,2],[95,7,66,3],[96,6,68,2],[96,15,68,2,"_ref"],[96,19,68,2],[96,23,68,29,"Object"],[96,29,68,35],[96,30,68,36,"entries"],[96,37,68,43],[96,38,68,44,"headers"],[96,45,68,51],[96,46,68,52],[96,48,68,54],[97,8,68,54],[97,12,68,54,"_ref2"],[97,17,68,54],[97,24,68,54,"_slicedToArray"],[97,38,68,54],[97,39,68,54,"default"],[97,46,68,54],[97,48,68,54,"_ref"],[97,52,68,54],[98,8,68,54],[98,12,68,14,"key"],[98,15,68,17],[98,18,68,17,"_ref2"],[98,23,68,17],[99,8,68,17],[99,12,68,19,"value"],[99,17,68,24],[99,20,68,24,"_ref2"],[99,25,68,24],[100,8,69,4],[100,12,69,8,"value"],[100,17,69,13],[100,19,69,15],[101,10,70,6,"finalHeaders"],[101,22,70,18],[101,23,70,19,"set"],[101,26,70,22],[101,27,70,23,"key"],[101,30,70,26],[101,32,70,28,"value"],[101,37,70,33],[101,38,70,34],[102,8,71,4],[103,6,72,2],[104,6,74,2],[104,10,74,8,"auth"],[104,14,74,12],[104,23,74,21,"SecureStore"],[104,34,74,32],[104,35,74,33,"getItemAsync"],[104,47,74,45],[104,48,74,46,"authKey"],[104,55,74,53],[104,56,74,54],[104,57,75,5,"then"],[104,61,75,9],[104,62,75,11,"auth"],[104,66,75,15],[104,70,75,20],[105,8,76,6],[105,15,76,13,"auth"],[105,19,76,17],[105,22,76,20,"JSON"],[105,26,76,24],[105,27,76,25,"parse"],[105,32,76,30],[105,33,76,31,"auth"],[105,37,76,35],[105,38,76,36],[105,41,76,39],[105,45,76,43],[106,6,77,4],[106,7,77,5],[106,8,77,6],[106,9,78,5,"catch"],[106,14,78,10],[106,15,78,11],[106,21,78,17],[107,8,79,6],[107,15,79,13],[107,19,79,17],[108,6,80,4],[108,7,80,5],[108,8,80,6],[109,6,82,2],[109,10,82,6,"auth"],[109,14,82,10],[109,16,82,12],[110,8,83,4,"finalHeaders"],[110,20,83,16],[110,21,83,17,"set"],[110,24,83,20],[110,25,83,21],[110,40,83,36],[110,42,83,38],[110,52,83,48,"auth"],[110,56,83,52],[110,57,83,53,"jwt"],[110,60,83,56],[110,62,83,58],[110,63,83,59],[111,6,84,2],[112,6,86,2],[112,13,86,9],[112,17,86,9,"expoFetch"],[112,27,86,18],[112,28,86,18,"fetch"],[112,33,86,18],[112,35,86,19,"finalInput"],[112,45,86,29],[112,47,86,31],[113,8,87,4],[113,11,87,7,"init"],[113,15,87,11],[114,8,88,4,"headers"],[114,15,88,11],[114,17,88,13,"finalHeaders"],[115,6,89,2],[115,7,89,3],[115,8,89,4],[116,4,90,0],[116,5,90,1],[117,4,90,1],[117,13,32,34,"fetchWithHeaders"],[117,29,32,50,"fetchWithHeaders"],[117,30,32,50],[118,6,32,50],[118,13,32,50,"_fetchWithHeaders"],[118,30,32,50],[118,31,32,50,"apply"],[118,36,32,50],[118,43,32,50,"arguments"],[118,52,32,50],[119,4,32,50],[120,4,32,50],[120,11,32,34,"fetchWithHeaders"],[120,27,32,50],[121,2,32,50],[121,5,90,1],[122,2,92,0],[122,6,92,0,"_default"],[122,14,92,0],[122,17,92,15,"fetchToWeb"],[122,27,92,25],[123,0,92,26],[123,3]],"functionMap":{"names":["<global>","getURLFromArgs","isFirstPartyURL","isSecondPartyURL","fetchWithHeaders","SecureStore.getItemAsync.then$argument_0","SecureStore.getItemAsync.then._catch$argument_0"],"mappings":"AAA;uBCM;CDW;wBEE;CFK;yBGE;CHE;mBIG;UC2C;KDE;WEC;KFE;CJU"},"hasCjsExports":false},"type":"js/module"}]}