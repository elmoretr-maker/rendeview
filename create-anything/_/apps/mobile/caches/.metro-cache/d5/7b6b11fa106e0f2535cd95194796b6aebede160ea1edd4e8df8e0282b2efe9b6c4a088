{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":40,"index":75}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"@/utils/auth/useAuth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":76},"end":{"line":3,"column":47,"index":123}}],"key":"OwmwtjBeuaoeWH+HHIznha/uOFE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return Index;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _utilsAuthUseAuth = require(_dependencyMap[3], \"@/utils/auth/useAuth\");\n  function Index() {\n    _s();\n    var router = (0, _expoRouter.useRouter)();\n    var _useAuth = (0, _utilsAuthUseAuth.useAuth)(),\n      isReady = _useAuth.isReady,\n      auth = _useAuth.auth;\n    (0, _react.useEffect)(() => {\n      var routeNext = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          if (!isReady) return;\n\n          // Not authenticated -> Welcome\n          if (!auth) {\n            router.replace(\"/onboarding/welcome\");\n            return;\n          }\n          try {\n            var res = yield fetch(\"/api/profile\");\n            if (res.ok) {\n              var data = yield res.json();\n              var user = data?.user;\n\n              // Membership gate: require selection before rest of onboarding\n              if (!user?.membership_tier) {\n                router.replace(\"/onboarding/membership\");\n                return;\n              }\n\n              // Profile basics gate\n              if (!user?.name) {\n                router.replace(\"/onboarding/profile\");\n                return;\n              }\n\n              // Consent gate with return path back to main tabs\n              if (!user?.consent_accepted) {\n                var returnTo = \"/(tabs)\";\n                router.replace(`/onboarding/data-consent-required?returnTo=${encodeURIComponent(returnTo)}`);\n                return;\n              }\n\n              // All checks passed -> main app\n              router.replace(\"/(tabs)\");\n              return;\n            }\n          } catch (e) {\n            console.error(\"/index bootstrap routeNext error\", e);\n          }\n\n          // Fallback to main tabs if profile fetch fails\n          router.replace(\"/(tabs)\");\n        });\n        return function routeNext() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      routeNext();\n    }, [isReady, auth, router]);\n    return null;\n  }\n  _s(Index, \"1ebaCb4fb+n283sTuLOePoZ/b3c=\", false, function () {\n    return [_expoRouter.useRouter, _utilsAuthUseAuth.useAuth];\n  });\n  _c = Index;\n  var _c;\n  $RefreshReg$(_c, \"Index\");\n});","lineCount":90,"map":[[13,2,5,15,"Object"],[13,8,5,15],[13,9,5,15,"defineProperty"],[13,23,5,15],[13,24,5,15,"exports"],[13,31,5,15],[14,4,5,15,"enumerable"],[14,14,5,15],[15,4,5,15,"get"],[15,7,5,15],[15,18,5,15,"get"],[15,19,5,15],[16,6,5,15],[16,13,5,15,"Index"],[16,18,5,15],[17,4,5,15],[18,2,5,15],[19,2,62,1],[19,6,62,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,62,1],[19,45,62,1,"require"],[19,52,62,1],[19,53,62,1,"_dependencyMap"],[19,67,62,1],[20,2,62,1],[20,6,62,1,"_asyncToGenerator"],[20,23,62,1],[20,26,62,1,"_interopDefault"],[20,41,62,1],[20,42,62,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,62,1],[21,2,1,0],[21,6,1,0,"_react"],[21,12,1,0],[21,15,1,0,"require"],[21,22,1,0],[21,23,1,0,"_dependencyMap"],[21,37,1,0],[22,2,2,0],[22,6,2,0,"_expoRouter"],[22,17,2,0],[22,20,2,0,"require"],[22,27,2,0],[22,28,2,0,"_dependencyMap"],[22,42,2,0],[23,2,3,0],[23,6,3,0,"_utilsAuthUseAuth"],[23,23,3,0],[23,26,3,0,"require"],[23,33,3,0],[23,34,3,0,"_dependencyMap"],[23,48,3,0],[24,2,5,15],[24,11,5,24,"Index"],[24,16,5,29,"Index"],[24,17,5,29],[24,19,5,32],[25,4,5,32,"_s"],[25,6,5,32],[26,4,6,2],[26,8,6,8,"router"],[26,14,6,14],[26,17,6,17],[26,21,6,17,"useRouter"],[26,32,6,26],[26,33,6,26,"useRouter"],[26,42,6,26],[26,44,6,27],[26,45,6,28],[27,4,7,2],[27,8,7,2,"_useAuth"],[27,16,7,2],[27,19,7,28],[27,23,7,28,"useAuth"],[27,40,7,35],[27,41,7,35,"useAuth"],[27,48,7,35],[27,50,7,36],[27,51,7,37],[28,6,7,10,"isReady"],[28,13,7,17],[28,16,7,17,"_useAuth"],[28,24,7,17],[28,25,7,10,"isReady"],[28,32,7,17],[29,6,7,19,"auth"],[29,10,7,23],[29,13,7,23,"_useAuth"],[29,21,7,23],[29,22,7,19,"auth"],[29,26,7,23],[30,4,9,2],[30,8,9,2,"useEffect"],[30,14,9,11],[30,15,9,11,"useEffect"],[30,24,9,11],[30,26,9,12],[30,32,9,18],[31,6,10,4],[31,10,10,10,"routeNext"],[31,19,10,19],[32,8,10,19],[32,12,10,19,"_ref"],[32,16,10,19],[32,23,10,19,"_asyncToGenerator"],[32,40,10,19],[32,41,10,19,"default"],[32,48,10,19],[32,50,10,22],[32,63,10,34],[33,10,11,6],[33,14,11,10],[33,15,11,11,"isReady"],[33,22,11,18],[33,24,11,20],[35,10,13,6],[36,10,14,6],[36,14,14,10],[36,15,14,11,"auth"],[36,19,14,15],[36,21,14,17],[37,12,15,8,"router"],[37,18,15,14],[37,19,15,15,"replace"],[37,26,15,22],[37,27,15,23],[37,48,15,44],[37,49,15,45],[38,12,16,8],[39,10,17,6],[40,10,19,6],[40,14,19,10],[41,12,20,8],[41,16,20,14,"res"],[41,19,20,17],[41,28,20,26,"fetch"],[41,33,20,31],[41,34,20,32],[41,48,20,46],[41,49,20,47],[42,12,21,8],[42,16,21,12,"res"],[42,19,21,15],[42,20,21,16,"ok"],[42,22,21,18],[42,24,21,20],[43,14,22,10],[43,18,22,16,"data"],[43,22,22,20],[43,31,22,29,"res"],[43,34,22,32],[43,35,22,33,"json"],[43,39,22,37],[43,40,22,38],[43,41,22,39],[44,14,23,10],[44,18,23,16,"user"],[44,22,23,20],[44,25,23,23,"data"],[44,29,23,27],[44,31,23,29,"user"],[44,35,23,33],[46,14,25,10],[47,14,26,10],[47,18,26,14],[47,19,26,15,"user"],[47,23,26,19],[47,25,26,21,"membership_tier"],[47,40,26,36],[47,42,26,38],[48,16,27,12,"router"],[48,22,27,18],[48,23,27,19,"replace"],[48,30,27,26],[48,31,27,27],[48,55,27,51],[48,56,27,52],[49,16,28,12],[50,14,29,10],[52,14,31,10],[53,14,32,10],[53,18,32,14],[53,19,32,15,"user"],[53,23,32,19],[53,25,32,21,"name"],[53,29,32,25],[53,31,32,27],[54,16,33,12,"router"],[54,22,33,18],[54,23,33,19,"replace"],[54,30,33,26],[54,31,33,27],[54,52,33,48],[54,53,33,49],[55,16,34,12],[56,14,35,10],[58,14,37,10],[59,14,38,10],[59,18,38,14],[59,19,38,15,"user"],[59,23,38,19],[59,25,38,21,"consent_accepted"],[59,41,38,37],[59,43,38,39],[60,16,39,12],[60,20,39,18,"returnTo"],[60,28,39,26],[60,31,39,29],[60,40,39,38],[61,16,40,12,"router"],[61,22,40,18],[61,23,40,19,"replace"],[61,30,40,26],[61,31,41,14],[61,77,41,60,"encodeURIComponent"],[61,95,41,78],[61,96,41,79,"returnTo"],[61,104,41,87],[61,105,41,88],[61,107,42,12],[61,108,42,13],[62,16,43,12],[63,14,44,10],[65,14,46,10],[66,14,47,10,"router"],[66,20,47,16],[66,21,47,17,"replace"],[66,28,47,24],[66,29,47,25],[66,38,47,34],[66,39,47,35],[67,14,48,10],[68,12,49,8],[69,10,50,6],[69,11,50,7],[69,12,50,8],[69,19,50,15,"e"],[69,20,50,16],[69,22,50,18],[70,12,51,8,"console"],[70,19,51,15],[70,20,51,16,"error"],[70,25,51,21],[70,26,51,22],[70,60,51,56],[70,62,51,58,"e"],[70,63,51,59],[70,64,51,60],[71,10,52,6],[73,10,54,6],[74,10,55,6,"router"],[74,16,55,12],[74,17,55,13,"replace"],[74,24,55,20],[74,25,55,21],[74,34,55,30],[74,35,55,31],[75,8,56,4],[75,9,56,5],[76,8,56,5],[76,24,10,10,"routeNext"],[76,33,10,19,"routeNext"],[76,34,10,19],[77,10,10,19],[77,17,10,19,"_ref"],[77,21,10,19],[77,22,10,19,"apply"],[77,27,10,19],[77,34,10,19,"arguments"],[77,43,10,19],[78,8,10,19],[79,6,10,19],[79,9,56,5],[80,6,58,4,"routeNext"],[80,15,58,13],[80,16,58,14],[80,17,58,15],[81,4,59,2],[81,5,59,3],[81,7,59,5],[81,8,59,6,"isReady"],[81,15,59,13],[81,17,59,15,"auth"],[81,21,59,19],[81,23,59,21,"router"],[81,29,59,27],[81,30,59,28],[81,31,59,29],[82,4,61,2],[82,11,61,9],[82,15,61,13],[83,2,62,0],[84,2,62,1,"_s"],[84,4,62,1],[84,5,5,24,"Index"],[84,10,5,29],[85,4,5,29],[85,12,6,17,"useRouter"],[85,23,6,26],[85,24,6,26,"useRouter"],[85,33,6,26],[85,35,7,28,"useAuth"],[85,52,7,35],[85,53,7,35,"useAuth"],[85,60,7,35],[86,2,7,35],[87,2,7,35,"_c"],[87,4,7,35],[87,7,5,24,"Index"],[87,12,5,29],[88,2,5,29],[88,6,5,29,"_c"],[88,8,5,29],[89,2,5,29,"$RefreshReg$"],[89,14,5,29],[89,15,5,29,"_c"],[89,17,5,29],[90,0,5,29],[90,3]],"functionMap":{"names":["<global>","Index","useEffect$argument_0","routeNext"],"mappings":"AAA;eCI;YCI;sBCC;KD8C;GDG;CDG"},"hasCjsExports":false},"type":"js/module"}]}