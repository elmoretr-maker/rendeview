{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":40,"index":85}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":55,"index":141}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/home/runner/workspace/create-anything/_/apps/mobile/src/components/onboarding/OnboardingGuard.jsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.OnboardingGuard = OnboardingGuard;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _reactNative = require(_dependencyMap[4], \"react-native\");\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  var COLORS = {\n    primary: \"#5B3BAF\",\n    bg: \"#F9F9F9\"\n  };\n  function OnboardingGuard(_ref) {\n    _s();\n    var children = _ref.children,\n      _ref$allowUnauthentic = _ref.allowUnauthenticated,\n      allowUnauthenticated = _ref$allowUnauthentic === void 0 ? false : _ref$allowUnauthentic;\n    var router = (0, _expoRouter.useRouter)();\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      checking = _useState2[0],\n      setChecking = _useState2[1];\n    (0, _react.useEffect)(() => {\n      var checkOnboardingStatus = /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          try {\n            var res = yield fetch(\"/api/profile\");\n            if (!res.ok) {\n              if (res.status === 401 && !allowUnauthenticated) {\n                router.replace(\"/onboarding/welcome\");\n                return;\n              }\n              if (res.status === 401 && allowUnauthenticated) {\n                setChecking(false);\n                return;\n              }\n              throw new Error(\"Failed to check profile\");\n            }\n            var data = yield res.json();\n            var user = data?.user;\n            var media = data?.media || [];\n            var photos = media.filter(m => m.type === \"photo\");\n            if (user?.consent_accepted && user?.membership_tier && user?.name && photos.length >= 2) {\n              router.replace(\"/(tabs)\");\n              return;\n            }\n            setChecking(false);\n          } catch (e) {\n            console.error(\"Onboarding guard error:\", e);\n            setChecking(false);\n          }\n        });\n        return function checkOnboardingStatus() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n      checkOnboardingStatus();\n    }, [router, allowUnauthenticated]);\n    if (checking) {\n      return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          backgroundColor: COLORS.bg\n        },\n        children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.ActivityIndicator, {\n          size: \"large\",\n          color: COLORS.primary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this);\n    }\n    return children;\n  }\n  _s(OnboardingGuard, \"EZyqNjv1DAMSa/f97bPVpf6bCGI=\", false, function () {\n    return [_expoRouter.useRouter];\n  });\n  _c = OnboardingGuard;\n  var _c;\n  $RefreshReg$(_c, \"OnboardingGuard\");\n});","lineCount":103,"map":[[14,2,10,0,"exports"],[14,9,10,0],[14,10,10,0,"OnboardingGuard"],[14,25,10,0],[14,28,10,0,"OnboardingGuard"],[14,43,10,0],[15,2,72,1],[15,6,72,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,42,72,1],[15,45,72,1,"require"],[15,52,72,1],[15,53,72,1,"_dependencyMap"],[15,67,72,1],[16,2,72,1],[16,6,72,1,"_asyncToGenerator"],[16,23,72,1],[16,26,72,1,"_interopDefault"],[16,41,72,1],[16,42,72,1,"_babelRuntimeHelpersAsyncToGenerator"],[16,78,72,1],[17,2,72,1],[17,6,72,1,"_babelRuntimeHelpersSlicedToArray"],[17,39,72,1],[17,42,72,1,"require"],[17,49,72,1],[17,50,72,1,"_dependencyMap"],[17,64,72,1],[18,2,72,1],[18,6,72,1,"_slicedToArray"],[18,20,72,1],[18,23,72,1,"_interopDefault"],[18,38,72,1],[18,39,72,1,"_babelRuntimeHelpersSlicedToArray"],[18,72,72,1],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,2,0],[20,6,2,0,"_expoRouter"],[20,17,2,0],[20,20,2,0,"require"],[20,27,2,0],[20,28,2,0,"_dependencyMap"],[20,42,2,0],[21,2,3,0],[21,6,3,0,"_reactNative"],[21,18,3,0],[21,21,3,0,"require"],[21,28,3,0],[21,29,3,0,"_dependencyMap"],[21,43,3,0],[22,2,3,55],[22,6,3,55,"_reactJsxDevRuntime"],[22,25,3,55],[22,28,3,55,"require"],[22,35,3,55],[22,36,3,55,"_dependencyMap"],[22,50,3,55],[23,2,5,0],[23,6,5,6,"COLORS"],[23,12,5,12],[23,15,5,15],[24,4,6,2,"primary"],[24,11,6,9],[24,13,6,11],[24,22,6,20],[25,4,7,2,"bg"],[25,6,7,4],[25,8,7,6],[26,2,8,0],[26,3,8,1],[27,2,10,7],[27,11,10,16,"OnboardingGuard"],[27,26,10,31,"OnboardingGuard"],[27,27,10,31,"_ref"],[27,31,10,31],[27,33,10,76],[28,4,10,76,"_s"],[28,6,10,76],[29,4,10,76],[29,8,10,34,"children"],[29,16,10,42],[29,19,10,42,"_ref"],[29,23,10,42],[29,24,10,34,"children"],[29,32,10,42],[30,6,10,42,"_ref$allowUnauthentic"],[30,27,10,42],[30,30,10,42,"_ref"],[30,34,10,42],[30,35,10,44,"allowUnauthenticated"],[30,55,10,64],[31,6,10,44,"allowUnauthenticated"],[31,26,10,64],[31,29,10,64,"_ref$allowUnauthentic"],[31,50,10,64],[31,64,10,67],[31,69,10,72],[31,72,10,72,"_ref$allowUnauthentic"],[31,93,10,72],[32,4,11,2],[32,8,11,8,"router"],[32,14,11,14],[32,17,11,17],[32,21,11,17,"useRouter"],[32,32,11,26],[32,33,11,26,"useRouter"],[32,42,11,26],[32,44,11,27],[32,45,11,28],[33,4,12,2],[33,8,12,2,"_useState"],[33,17,12,2],[33,20,12,34],[33,24,12,34,"useState"],[33,30,12,42],[33,31,12,42,"useState"],[33,39,12,42],[33,41,12,43],[33,45,12,47],[33,46,12,48],[34,6,12,48,"_useState2"],[34,16,12,48],[34,23,12,48,"_slicedToArray"],[34,37,12,48],[34,38,12,48,"default"],[34,45,12,48],[34,47,12,48,"_useState"],[34,56,12,48],[35,6,12,9,"checking"],[35,14,12,17],[35,17,12,17,"_useState2"],[35,27,12,17],[36,6,12,19,"setChecking"],[36,17,12,30],[36,20,12,30,"_useState2"],[36,30,12,30],[37,4,14,2],[37,8,14,2,"useEffect"],[37,14,14,11],[37,15,14,11,"useEffect"],[37,24,14,11],[37,26,14,12],[37,32,14,18],[38,6,15,4],[38,10,15,10,"checkOnboardingStatus"],[38,31,15,31],[39,8,15,31],[39,12,15,31,"_ref2"],[39,17,15,31],[39,24,15,31,"_asyncToGenerator"],[39,41,15,31],[39,42,15,31,"default"],[39,49,15,31],[39,51,15,34],[39,64,15,46],[40,10,16,6],[40,14,16,10],[41,12,17,8],[41,16,17,14,"res"],[41,19,17,17],[41,28,17,26,"fetch"],[41,33,17,31],[41,34,17,32],[41,48,17,46],[41,49,17,47],[42,12,19,8],[42,16,19,12],[42,17,19,13,"res"],[42,20,19,16],[42,21,19,17,"ok"],[42,23,19,19],[42,25,19,21],[43,14,20,10],[43,18,20,14,"res"],[43,21,20,17],[43,22,20,18,"status"],[43,28,20,24],[43,33,20,29],[43,36,20,32],[43,40,20,36],[43,41,20,37,"allowUnauthenticated"],[43,61,20,57],[43,63,20,59],[44,16,21,12,"router"],[44,22,21,18],[44,23,21,19,"replace"],[44,30,21,26],[44,31,21,27],[44,52,21,48],[44,53,21,49],[45,16,22,12],[46,14,23,10],[47,14,24,10],[47,18,24,14,"res"],[47,21,24,17],[47,22,24,18,"status"],[47,28,24,24],[47,33,24,29],[47,36,24,32],[47,40,24,36,"allowUnauthenticated"],[47,60,24,56],[47,62,24,58],[48,16,25,12,"setChecking"],[48,27,25,23],[48,28,25,24],[48,33,25,29],[48,34,25,30],[49,16,26,12],[50,14,27,10],[51,14,28,10],[51,20,28,16],[51,24,28,20,"Error"],[51,29,28,25],[51,30,28,26],[51,55,28,51],[51,56,28,52],[52,12,29,8],[53,12,31,8],[53,16,31,14,"data"],[53,20,31,18],[53,29,31,27,"res"],[53,32,31,30],[53,33,31,31,"json"],[53,37,31,35],[53,38,31,36],[53,39,31,37],[54,12,32,8],[54,16,32,14,"user"],[54,20,32,18],[54,23,32,21,"data"],[54,27,32,25],[54,29,32,27,"user"],[54,33,32,31],[55,12,33,8],[55,16,33,14,"media"],[55,21,33,19],[55,24,33,22,"data"],[55,28,33,26],[55,30,33,28,"media"],[55,35,33,33],[55,39,33,37],[55,41,33,39],[56,12,34,8],[56,16,34,14,"photos"],[56,22,34,20],[56,25,34,23,"media"],[56,30,34,28],[56,31,34,29,"filter"],[56,37,34,35],[56,38,34,37,"m"],[56,39,34,38],[56,43,34,43,"m"],[56,44,34,44],[56,45,34,45,"type"],[56,49,34,49],[56,54,34,54],[56,61,34,61],[56,62,34,62],[57,12,36,8],[57,16,37,10,"user"],[57,20,37,14],[57,22,37,16,"consent_accepted"],[57,38,37,32],[57,42,38,10,"user"],[57,46,38,14],[57,48,38,16,"membership_tier"],[57,63,38,31],[57,67,39,10,"user"],[57,71,39,14],[57,73,39,16,"name"],[57,77,39,20],[57,81,40,10,"photos"],[57,87,40,16],[57,88,40,17,"length"],[57,94,40,23],[57,98,40,27],[57,99,40,28],[57,101,41,10],[58,14,42,10,"router"],[58,20,42,16],[58,21,42,17,"replace"],[58,28,42,24],[58,29,42,25],[58,38,42,34],[58,39,42,35],[59,14,43,10],[60,12,44,8],[61,12,46,8,"setChecking"],[61,23,46,19],[61,24,46,20],[61,29,46,25],[61,30,46,26],[62,10,47,6],[62,11,47,7],[62,12,47,8],[62,19,47,15,"e"],[62,20,47,16],[62,22,47,18],[63,12,48,8,"console"],[63,19,48,15],[63,20,48,16,"error"],[63,25,48,21],[63,26,48,22],[63,51,48,47],[63,53,48,49,"e"],[63,54,48,50],[63,55,48,51],[64,12,49,8,"setChecking"],[64,23,49,19],[64,24,49,20],[64,29,49,25],[64,30,49,26],[65,10,50,6],[66,8,51,4],[66,9,51,5],[67,8,51,5],[67,24,15,10,"checkOnboardingStatus"],[67,45,15,31,"checkOnboardingStatus"],[67,46,15,31],[68,10,15,31],[68,17,15,31,"_ref2"],[68,22,15,31],[68,23,15,31,"apply"],[68,28,15,31],[68,35,15,31,"arguments"],[68,44,15,31],[69,8,15,31],[70,6,15,31],[70,9,51,5],[71,6,53,4,"checkOnboardingStatus"],[71,27,53,25],[71,28,53,26],[71,29,53,27],[72,4,54,2],[72,5,54,3],[72,7,54,5],[72,8,54,6,"router"],[72,14,54,12],[72,16,54,14,"allowUnauthenticated"],[72,36,54,34],[72,37,54,35],[72,38,54,36],[73,4,56,2],[73,8,56,6,"checking"],[73,16,56,14],[73,18,56,16],[74,6,57,4],[74,26,58,6],[74,30,58,6,"_reactJsxDevRuntime"],[74,49,58,6],[74,50,58,6,"jsxDEV"],[74,56,58,6],[74,58,58,7,"_reactNative"],[74,70,58,11],[74,71,58,11,"View"],[74,75,58,11],[75,8,59,8,"style"],[75,13,59,13],[75,15,59,15],[76,10,60,10,"flex"],[76,14,60,14],[76,16,60,16],[76,17,60,17],[77,10,61,10,"justifyContent"],[77,24,61,24],[77,26,61,26],[77,34,61,34],[78,10,62,10,"alignItems"],[78,20,62,20],[78,22,62,22],[78,30,62,30],[79,10,63,10,"backgroundColor"],[79,25,63,25],[79,27,63,27,"COLORS"],[79,33,63,33],[79,34,63,34,"bg"],[80,8,64,8],[80,9,64,10],[81,8,64,10,"children"],[81,16,64,10],[81,31,66,8],[81,35,66,8,"_reactJsxDevRuntime"],[81,54,66,8],[81,55,66,8,"jsxDEV"],[81,61,66,8],[81,63,66,9,"_reactNative"],[81,75,66,26],[81,76,66,26,"ActivityIndicator"],[81,93,66,26],[82,10,66,27,"size"],[82,14,66,31],[82,16,66,32],[82,23,66,39],[83,10,66,40,"color"],[83,15,66,45],[83,17,66,47,"COLORS"],[83,23,66,53],[83,24,66,54,"primary"],[84,8,66,62],[85,10,66,62,"fileName"],[85,18,66,62],[85,20,66,62,"_jsxFileName"],[85,32,66,62],[86,10,66,62,"lineNumber"],[86,20,66,62],[87,10,66,62,"columnNumber"],[87,22,66,62],[88,8,66,62],[88,15,66,64],[89,6,66,65],[90,8,66,65,"fileName"],[90,16,66,65],[90,18,66,65,"_jsxFileName"],[90,30,66,65],[91,8,66,65,"lineNumber"],[91,18,66,65],[92,8,66,65,"columnNumber"],[92,20,66,65],[93,6,66,65],[93,13,67,12],[93,14,67,13],[94,4,69,2],[95,4,71,2],[95,11,71,9,"children"],[95,19,71,17],[96,2,72,0],[97,2,72,1,"_s"],[97,4,72,1],[97,5,10,16,"OnboardingGuard"],[97,20,10,31],[98,4,10,31],[98,12,11,17,"useRouter"],[98,23,11,26],[98,24,11,26,"useRouter"],[98,33,11,26],[99,2,11,26],[100,2,11,26,"_c"],[100,4,11,26],[100,7,10,16,"OnboardingGuard"],[100,22,10,31],[101,2,10,31],[101,6,10,31,"_c"],[101,8,10,31],[102,2,10,31,"$RefreshReg$"],[102,14,10,31],[102,15,10,31,"_c"],[102,17,10,31],[103,0,10,31],[103,3]],"functionMap":{"names":["<global>","OnboardingGuard","useEffect$argument_0","checkOnboardingStatus","media.filter$argument_0"],"mappings":"AAA;OCS;YCI;kCCC;oCCmB,yBD;KDiB;GDG;CDkB"},"hasCjsExports":false},"type":"js/module"}]}