{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":47,"index":79}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  var _expoFileSystem = require(_dependencyMap[3], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":159,"map":[[28,2,89,0,"Object"],[28,8,89,0],[28,9,89,0,"defineProperty"],[28,23,89,0],[28,24,89,0,"exports"],[28,31,89,0],[29,4,89,0,"enumerable"],[29,14,89,0],[30,4,89,0,"get"],[30,7,89,0],[30,18,89,0,"get"],[30,19,89,0],[31,6,89,0],[31,13,89,0,"_default"],[31,21,89,0],[32,4,89,0],[33,2,89,0],[34,2,88,0,"Object"],[34,8,88,0],[34,9,88,0,"defineProperty"],[34,23,88,0],[34,24,88,0,"exports"],[34,31,88,0],[35,4,88,0,"enumerable"],[35,14,88,0],[36,4,88,0,"get"],[36,7,88,0],[36,18,88,0,"get"],[36,19,88,0],[37,6,88,0],[37,13,88,9,"useUpload"],[37,22,88,18],[38,4,88,18],[39,2,88,18],[40,2,88,21],[40,6,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,88,21],[40,45,88,21,"require"],[40,52,88,21],[40,53,88,21,"_dependencyMap"],[40,67,88,21],[41,2,88,21],[41,6,88,21,"_asyncToGenerator"],[41,23,88,21],[41,26,88,21,"_interopDefault"],[41,41,88,21],[41,42,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,88,21],[42,2,88,21],[42,6,88,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,88,21],[42,42,88,21,"require"],[42,49,88,21],[42,50,88,21,"_dependencyMap"],[42,64,88,21],[43,2,88,21],[43,6,88,21,"_slicedToArray"],[43,20,88,21],[43,23,88,21,"_interopDefault"],[43,38,88,21],[43,39,88,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,88,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,2,0],[46,6,2,0,"_expoFileSystem"],[46,21,2,0],[46,24,2,0,"require"],[46,31,2,0],[46,32,2,0,"_dependencyMap"],[46,46,2,0],[47,2,2,0],[47,6,2,0,"FileSystem"],[47,16,2,0],[47,19,2,0,"_interopNamespace"],[47,36,2,0],[47,37,2,0,"_expoFileSystem"],[47,52,2,0],[48,2,4,0],[48,11,4,9,"useUpload"],[48,20,4,18,"useUpload"],[48,21,4,18],[48,23,4,21],[49,4,4,21,"_s"],[49,6,4,21],[50,4,5,2],[50,8,5,2,"_React$useState"],[50,23,5,2],[50,26,5,32,"React"],[50,31,5,37],[50,32,5,38,"useState"],[50,40,5,46],[50,41,5,47],[50,46,5,52],[50,47,5,53],[51,6,5,53,"_React$useState2"],[51,22,5,53],[51,29,5,53,"_slicedToArray"],[51,43,5,53],[51,44,5,53,"default"],[51,51,5,53],[51,53,5,53,"_React$useState"],[51,68,5,53],[52,6,5,9,"loading"],[52,13,5,16],[52,16,5,16,"_React$useState2"],[52,32,5,16],[53,6,5,18,"setLoading"],[53,16,5,28],[53,19,5,28,"_React$useState2"],[53,35,5,28],[54,4,6,2],[54,8,6,8,"upload"],[54,14,6,14],[54,17,6,17,"React"],[54,22,6,22],[54,23,6,23,"useCallback"],[54,34,6,34],[55,6,6,34],[55,10,6,34,"_ref"],[55,14,6,34],[55,21,6,34,"_asyncToGenerator"],[55,38,6,34],[55,39,6,34,"default"],[55,46,6,34],[55,48,6,35],[55,59,6,42,"input"],[55,64,6,47],[55,66,6,52],[56,8,7,4],[56,12,7,8],[57,10,8,6,"setLoading"],[57,20,8,16],[57,21,8,17],[57,25,8,21],[57,26,8,22],[58,10,9,6],[58,14,9,10,"response"],[58,22,9,18],[59,10,11,6],[59,14,11,10],[59,32,11,28],[59,36,11,32,"input"],[59,41,11,37],[59,45,11,41,"input"],[59,50,11,46],[59,51,11,47,"reactNativeAsset"],[59,67,11,63],[59,69,11,65],[60,12,12,8],[60,16,12,14,"asset"],[60,21,12,19],[60,24,12,22,"input"],[60,29,12,27],[60,30,12,28,"reactNativeAsset"],[60,46,12,44],[62,12,14,8],[63,12,15,8],[63,16,15,12,"asset"],[63,21,15,17],[63,22,15,18,"base64"],[63,28,15,24],[63,30,15,26],[64,14,16,10],[65,14,17,10,"response"],[65,22,17,18],[65,31,17,27,"fetch"],[65,36,17,32],[65,37,17,33],[65,57,17,53],[65,59,17,55],[66,16,18,12,"method"],[66,22,18,18],[66,24,18,20],[66,30,18,26],[67,16,19,12,"headers"],[67,23,19,19],[67,25,19,21],[68,18,20,14],[68,32,20,28],[68,34,20,30],[69,16,21,12],[69,17,21,13],[70,16,22,12,"body"],[70,20,22,16],[70,22,22,18,"JSON"],[70,26,22,22],[70,27,22,23,"stringify"],[70,36,22,32],[70,37,22,33],[71,18,22,35,"base64"],[71,24,22,41],[71,26,22,43,"asset"],[71,31,22,48],[71,32,22,49,"base64"],[72,16,22,56],[72,17,22,57],[73,14,23,10],[73,15,23,11],[73,16,23,12],[74,12,24,8],[74,13,24,9],[74,19,24,15],[74,23,24,19,"asset"],[74,28,24,24],[74,29,24,25,"uri"],[74,32,24,28],[74,34,24,30],[75,14,25,10],[76,14,26,10],[76,18,26,16,"base64Data"],[76,28,26,26],[76,37,26,35,"FileSystem"],[76,47,26,45],[76,48,26,46,"readAsStringAsync"],[76,65,26,63],[76,66,26,64,"asset"],[76,71,26,69],[76,72,26,70,"uri"],[76,75,26,73],[76,77,26,75],[77,16,27,12,"encoding"],[77,24,27,20],[77,26,27,22,"FileSystem"],[77,36,27,32],[77,37,27,33,"EncodingType"],[77,49,27,45],[77,50,27,46,"Base64"],[78,14,28,10],[78,15,28,11],[78,16,28,12],[79,14,29,10,"response"],[79,22,29,18],[79,31,29,27,"fetch"],[79,36,29,32],[79,37,29,33],[79,57,29,53],[79,59,29,55],[80,16,30,12,"method"],[80,22,30,18],[80,24,30,20],[80,30,30,26],[81,16,31,12,"headers"],[81,23,31,19],[81,25,31,21],[82,18,32,14],[82,32,32,28],[82,34,32,30],[83,16,33,12],[83,17,33,13],[84,16,34,12,"body"],[84,20,34,16],[84,22,34,18,"JSON"],[84,26,34,22],[84,27,34,23,"stringify"],[84,36,34,32],[84,37,34,33],[85,18,34,35,"base64"],[85,24,34,41],[85,26,34,43,"base64Data"],[86,16,34,54],[86,17,34,55],[87,14,35,10],[87,15,35,11],[87,16,35,12],[88,12,36,8],[88,13,36,9],[88,19,36,15],[89,14,37,10],[89,20,37,16],[89,24,37,20,"Error"],[89,29,37,25],[89,30,37,26],[89,65,37,61],[89,66,37,62],[90,12,38,8],[91,10,39,6],[91,11,39,7],[91,17,39,13],[91,21,39,17],[91,26,39,22],[91,30,39,26,"input"],[91,35,39,31],[91,37,39,33],[92,12,40,8,"response"],[92,20,40,16],[92,29,40,25,"fetch"],[92,34,40,30],[92,35,40,31],[92,55,40,51],[92,57,40,53],[93,14,41,10,"method"],[93,20,41,16],[93,22,41,18],[93,28,41,24],[94,14,42,10,"headers"],[94,21,42,17],[94,23,42,19],[95,16,43,12],[95,30,43,26],[95,32,43,28],[96,14,44,10],[96,15,44,11],[97,14,45,10,"body"],[97,18,45,14],[97,20,45,16,"JSON"],[97,24,45,20],[97,25,45,21,"stringify"],[97,34,45,30],[97,35,45,31],[98,16,45,33,"url"],[98,19,45,36],[98,21,45,38,"input"],[98,26,45,43],[98,27,45,44,"url"],[99,14,45,48],[99,15,45,49],[100,12,46,8],[100,13,46,9],[100,14,46,10],[101,10,47,6],[101,11,47,7],[101,17,47,13],[101,21,47,17],[101,29,47,25],[101,33,47,29,"input"],[101,38,47,34],[101,40,47,36],[102,12,48,8,"response"],[102,20,48,16],[102,29,48,25,"fetch"],[102,34,48,30],[102,35,48,31],[102,55,48,51],[102,57,48,53],[103,14,49,10,"method"],[103,20,49,16],[103,22,49,18],[103,28,49,24],[104,14,50,10,"headers"],[104,21,50,17],[104,23,50,19],[105,16,51,12],[105,30,51,26],[105,32,51,28],[106,14,52,10],[106,15,52,11],[107,14,53,10,"body"],[107,18,53,14],[107,20,53,16,"JSON"],[107,24,53,20],[107,25,53,21,"stringify"],[107,34,53,30],[107,35,53,31],[108,16,53,33,"base64"],[108,22,53,39],[108,24,53,41,"input"],[108,29,53,46],[108,30,53,47,"base64"],[109,14,53,54],[109,15,53,55],[110,12,54,8],[110,13,54,9],[110,14,54,10],[111,10,55,6],[111,11,55,7],[111,17,55,13],[112,12,56,8,"response"],[112,20,56,16],[112,29,56,25,"fetch"],[112,34,56,30],[112,35,56,31],[112,55,56,51],[112,57,56,53],[113,14,57,10,"method"],[113,20,57,16],[113,22,57,18],[113,28,57,24],[114,14,58,10,"headers"],[114,21,58,17],[114,23,58,19],[115,16,59,12],[115,30,59,26],[115,32,59,28],[116,14,60,10],[116,15,60,11],[117,14,61,10,"body"],[117,18,61,14],[117,20,61,16,"input"],[117,25,61,21],[117,26,61,22,"buffer"],[118,12,62,8],[118,13,62,9],[118,14,62,10],[119,10,63,6],[120,10,64,6],[120,14,64,10],[120,15,64,11,"response"],[120,23,64,19],[120,25,64,21,"ok"],[120,27,64,23],[120,29,64,25],[121,12,65,8],[121,16,65,12,"response"],[121,24,65,20],[121,28,65,24,"response"],[121,36,65,32],[121,37,65,33,"status"],[121,43,65,39],[121,48,65,44],[121,51,65,47],[121,53,65,49],[122,14,66,10],[122,20,66,16],[122,24,66,20,"Error"],[122,29,66,25],[122,30,66,26],[122,62,66,58],[122,63,66,59],[123,12,67,8],[124,12,68,8],[124,18,68,14],[124,22,68,18,"Error"],[124,27,68,23],[124,28,68,24],[124,43,68,39],[124,44,68,40],[125,10,69,6],[126,10,70,6],[126,14,70,12,"data"],[126,18,70,16],[126,27,70,25,"response"],[126,35,70,33],[126,36,70,34,"json"],[126,40,70,38],[126,41,70,39],[126,42,70,40],[127,10,71,6],[127,17,71,13],[128,12,71,15,"url"],[128,15,71,18],[128,17,71,20,"data"],[128,21,71,24],[128,22,71,25,"url"],[128,25,71,28],[129,12,71,30,"mimeType"],[129,20,71,38],[129,22,71,40,"data"],[129,26,71,44],[129,27,71,45,"mimeType"],[129,35,71,53],[129,39,71,57],[130,10,71,62],[130,11,71,63],[131,8,72,4],[131,9,72,5],[131,10,72,6],[131,17,72,13,"uploadError"],[131,28,72,24],[131,30,72,26],[132,10,73,6],[132,14,73,10,"uploadError"],[132,25,73,21],[132,37,73,33,"Error"],[132,42,73,38],[132,44,73,40],[133,12,74,8],[133,19,74,15],[134,14,74,17,"error"],[134,19,74,22],[134,21,74,24,"uploadError"],[134,32,74,35],[134,33,74,36,"message"],[135,12,74,44],[135,13,74,45],[136,10,75,6],[137,10,76,6],[137,14,76,10],[137,21,76,17,"uploadError"],[137,32,76,28],[137,37,76,33],[137,45,76,41],[137,47,76,43],[138,12,77,8],[138,19,77,15],[139,14,77,17,"error"],[139,19,77,22],[139,21,77,24,"uploadError"],[140,12,77,36],[140,13,77,37],[141,10,78,6],[142,10,79,6],[142,17,79,13],[143,12,79,15,"error"],[143,17,79,20],[143,19,79,22],[144,10,79,38],[144,11,79,39],[145,8,80,4],[145,9,80,5],[145,18,80,14],[146,10,81,6,"setLoading"],[146,20,81,16],[146,21,81,17],[146,26,81,22],[146,27,81,23],[147,8,82,4],[148,6,83,2],[148,7,83,3],[149,6,83,3],[149,23,83,3,"_x"],[149,25,83,3],[150,8,83,3],[150,15,83,3,"_ref"],[150,19,83,3],[150,20,83,3,"apply"],[150,25,83,3],[150,32,83,3,"arguments"],[150,41,83,3],[151,6,83,3],[152,4,83,3],[152,9,83,5],[152,11,83,7],[152,12,83,8],[153,4,85,2],[153,11,85,9],[153,12,85,10,"upload"],[153,18,85,16],[153,20,85,18],[154,6,85,20,"loading"],[155,4,85,28],[155,5,85,29],[155,6,85,30],[156,2,86,0],[157,2,86,1,"_s"],[157,4,86,1],[157,5,4,9,"useUpload"],[157,14,4,18],[158,2,89,0],[158,6,89,0,"_default"],[158,14,89,0],[158,17,89,15,"useUpload"],[158,26,89,24],[159,0,89,25],[159,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACG;mCCE;GD6E;CDG"},"hasCjsExports":false},"type":"js/module"}]}