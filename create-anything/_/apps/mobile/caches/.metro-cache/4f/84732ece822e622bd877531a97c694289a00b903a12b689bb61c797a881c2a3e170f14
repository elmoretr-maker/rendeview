{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos need base64 conversion - this will be handled by the caller\n              throw new Error(\"Video upload requires base64 data. Please convert video to base64 before uploading.\");\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":146,"map":[[28,2,79,0,"Object"],[28,8,79,0],[28,9,79,0,"defineProperty"],[28,23,79,0],[28,24,79,0,"exports"],[28,31,79,0],[29,4,79,0,"enumerable"],[29,14,79,0],[30,4,79,0,"get"],[30,7,79,0],[30,18,79,0,"get"],[30,19,79,0],[31,6,79,0],[31,13,79,0,"_default"],[31,21,79,0],[32,4,79,0],[33,2,79,0],[34,2,78,0,"Object"],[34,8,78,0],[34,9,78,0,"defineProperty"],[34,23,78,0],[34,24,78,0,"exports"],[34,31,78,0],[35,4,78,0,"enumerable"],[35,14,78,0],[36,4,78,0,"get"],[36,7,78,0],[36,18,78,0,"get"],[36,19,78,0],[37,6,78,0],[37,13,78,9,"useUpload"],[37,22,78,18],[38,4,78,18],[39,2,78,18],[40,2,78,21],[40,6,78,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,78,21],[40,45,78,21,"require"],[40,52,78,21],[40,53,78,21,"_dependencyMap"],[40,67,78,21],[41,2,78,21],[41,6,78,21,"_asyncToGenerator"],[41,23,78,21],[41,26,78,21,"_interopDefault"],[41,41,78,21],[41,42,78,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,78,21],[42,2,78,21],[42,6,78,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,78,21],[42,42,78,21,"require"],[42,49,78,21],[42,50,78,21,"_dependencyMap"],[42,64,78,21],[43,2,78,21],[43,6,78,21,"_slicedToArray"],[43,20,78,21],[43,23,78,21,"_interopDefault"],[43,38,78,21],[43,39,78,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,78,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[74,20,25,16],[74,24,25,20,"Error"],[74,29,25,25],[74,30,25,26],[74,115,25,111],[74,116,25,112],[75,12,26,8],[75,13,26,9],[75,19,26,15],[76,14,27,10],[76,20,27,16],[76,24,27,20,"Error"],[76,29,27,25],[76,30,27,26],[76,65,27,61],[76,66,27,62],[77,12,28,8],[78,10,29,6],[78,11,29,7],[78,17,29,13],[78,21,29,17],[78,26,29,22],[78,30,29,26,"input"],[78,35,29,31],[78,37,29,33],[79,12,30,8,"response"],[79,20,30,16],[79,29,30,25,"fetch"],[79,34,30,30],[79,35,30,31],[79,55,30,51],[79,57,30,53],[80,14,31,10,"method"],[80,20,31,16],[80,22,31,18],[80,28,31,24],[81,14,32,10,"headers"],[81,21,32,17],[81,23,32,19],[82,16,33,12],[82,30,33,26],[82,32,33,28],[83,14,34,10],[83,15,34,11],[84,14,35,10,"body"],[84,18,35,14],[84,20,35,16,"JSON"],[84,24,35,20],[84,25,35,21,"stringify"],[84,34,35,30],[84,35,35,31],[85,16,35,33,"url"],[85,19,35,36],[85,21,35,38,"input"],[85,26,35,43],[85,27,35,44,"url"],[86,14,35,48],[86,15,35,49],[87,12,36,8],[87,13,36,9],[87,14,36,10],[88,10,37,6],[88,11,37,7],[88,17,37,13],[88,21,37,17],[88,29,37,25],[88,33,37,29,"input"],[88,38,37,34],[88,40,37,36],[89,12,38,8,"response"],[89,20,38,16],[89,29,38,25,"fetch"],[89,34,38,30],[89,35,38,31],[89,55,38,51],[89,57,38,53],[90,14,39,10,"method"],[90,20,39,16],[90,22,39,18],[90,28,39,24],[91,14,40,10,"headers"],[91,21,40,17],[91,23,40,19],[92,16,41,12],[92,30,41,26],[92,32,41,28],[93,14,42,10],[93,15,42,11],[94,14,43,10,"body"],[94,18,43,14],[94,20,43,16,"JSON"],[94,24,43,20],[94,25,43,21,"stringify"],[94,34,43,30],[94,35,43,31],[95,16,43,33,"base64"],[95,22,43,39],[95,24,43,41,"input"],[95,29,43,46],[95,30,43,47,"base64"],[96,14,43,54],[96,15,43,55],[97,12,44,8],[97,13,44,9],[97,14,44,10],[98,10,45,6],[98,11,45,7],[98,17,45,13],[99,12,46,8,"response"],[99,20,46,16],[99,29,46,25,"fetch"],[99,34,46,30],[99,35,46,31],[99,55,46,51],[99,57,46,53],[100,14,47,10,"method"],[100,20,47,16],[100,22,47,18],[100,28,47,24],[101,14,48,10,"headers"],[101,21,48,17],[101,23,48,19],[102,16,49,12],[102,30,49,26],[102,32,49,28],[103,14,50,10],[103,15,50,11],[104,14,51,10,"body"],[104,18,51,14],[104,20,51,16,"input"],[104,25,51,21],[104,26,51,22,"buffer"],[105,12,52,8],[105,13,52,9],[105,14,52,10],[106,10,53,6],[107,10,54,6],[107,14,54,10],[107,15,54,11,"response"],[107,23,54,19],[107,25,54,21,"ok"],[107,27,54,23],[107,29,54,25],[108,12,55,8],[108,16,55,12,"response"],[108,24,55,20],[108,28,55,24,"response"],[108,36,55,32],[108,37,55,33,"status"],[108,43,55,39],[108,48,55,44],[108,51,55,47],[108,53,55,49],[109,14,56,10],[109,20,56,16],[109,24,56,20,"Error"],[109,29,56,25],[109,30,56,26],[109,62,56,58],[109,63,56,59],[110,12,57,8],[111,12,58,8],[111,18,58,14],[111,22,58,18,"Error"],[111,27,58,23],[111,28,58,24],[111,43,58,39],[111,44,58,40],[112,10,59,6],[113,10,60,6],[113,14,60,12,"data"],[113,18,60,16],[113,27,60,25,"response"],[113,35,60,33],[113,36,60,34,"json"],[113,40,60,38],[113,41,60,39],[113,42,60,40],[114,10,61,6],[114,17,61,13],[115,12,61,15,"url"],[115,15,61,18],[115,17,61,20,"data"],[115,21,61,24],[115,22,61,25,"url"],[115,25,61,28],[116,12,61,30,"mimeType"],[116,20,61,38],[116,22,61,40,"data"],[116,26,61,44],[116,27,61,45,"mimeType"],[116,35,61,53],[116,39,61,57],[117,10,61,62],[117,11,61,63],[118,8,62,4],[118,9,62,5],[118,10,62,6],[118,17,62,13,"uploadError"],[118,28,62,24],[118,30,62,26],[119,10,63,6],[119,14,63,10,"uploadError"],[119,25,63,21],[119,37,63,33,"Error"],[119,42,63,38],[119,44,63,40],[120,12,64,8],[120,19,64,15],[121,14,64,17,"error"],[121,19,64,22],[121,21,64,24,"uploadError"],[121,32,64,35],[121,33,64,36,"message"],[122,12,64,44],[122,13,64,45],[123,10,65,6],[124,10,66,6],[124,14,66,10],[124,21,66,17,"uploadError"],[124,32,66,28],[124,37,66,33],[124,45,66,41],[124,47,66,43],[125,12,67,8],[125,19,67,15],[126,14,67,17,"error"],[126,19,67,22],[126,21,67,24,"uploadError"],[127,12,67,36],[127,13,67,37],[128,10,68,6],[129,10,69,6],[129,17,69,13],[130,12,69,15,"error"],[130,17,69,20],[130,19,69,22],[131,10,69,38],[131,11,69,39],[132,8,70,4],[132,9,70,5],[132,18,70,14],[133,10,71,6,"setLoading"],[133,20,71,16],[133,21,71,17],[133,26,71,22],[133,27,71,23],[134,8,72,4],[135,6,73,2],[135,7,73,3],[136,6,73,3],[136,23,73,3,"_x"],[136,25,73,3],[137,8,73,3],[137,15,73,3,"_ref"],[137,19,73,3],[137,20,73,3,"apply"],[137,25,73,3],[137,32,73,3,"arguments"],[137,41,73,3],[138,6,73,3],[139,4,73,3],[139,9,73,5],[139,11,73,7],[139,12,73,8],[140,4,75,2],[140,11,75,9],[140,12,75,10,"upload"],[140,18,75,16],[140,20,75,18],[141,6,75,20,"loading"],[142,4,75,28],[142,5,75,29],[142,6,75,30],[143,2,76,0],[144,2,76,1,"_s"],[144,4,76,1],[144,5,3,9,"useUpload"],[144,14,3,18],[145,2,79,0],[145,6,79,0,"_default"],[145,14,79,0],[145,17,79,15,"useUpload"],[145,26,79,24],[146,0,79,25],[146,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GDoE;CDG"},"hasCjsExports":false},"type":"js/module"}]}