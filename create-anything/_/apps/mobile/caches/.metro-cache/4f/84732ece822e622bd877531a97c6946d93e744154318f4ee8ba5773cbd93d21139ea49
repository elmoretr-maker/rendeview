{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n            // Build a RN-friendly FormData file part: { uri, name, type }\n            var uri = asset.uri || asset?.file?.uri;\n            var guessedName = asset.fileName || asset.name || (uri ? uri.split(\"/\").pop() : null) || \"upload\";\n            // Try to infer content type sensibly; default to image/jpeg if unknown\n            var type = asset.mimeType || asset.type || (guessedName.toLowerCase().endsWith(\".mp4\") ? \"video/mp4\" : \"image/jpeg\");\n            if (!uri) {\n              throw new Error(\"Invalid asset: missing uri\");\n            }\n            var formData = new FormData();\n            formData.append(\"file\", {\n              // @ts-ignore React Native FormData file shape\n              uri,\n              name: guessedName,\n              type\n            });\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              body: formData\n            });\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":146,"map":[[28,2,93,0,"Object"],[28,8,93,0],[28,9,93,0,"defineProperty"],[28,23,93,0],[28,24,93,0,"exports"],[28,31,93,0],[29,4,93,0,"enumerable"],[29,14,93,0],[30,4,93,0,"get"],[30,7,93,0],[30,18,93,0,"get"],[30,19,93,0],[31,6,93,0],[31,13,93,0,"_default"],[31,21,93,0],[32,4,93,0],[33,2,93,0],[34,2,92,0,"Object"],[34,8,92,0],[34,9,92,0,"defineProperty"],[34,23,92,0],[34,24,92,0,"exports"],[34,31,92,0],[35,4,92,0,"enumerable"],[35,14,92,0],[36,4,92,0,"get"],[36,7,92,0],[36,18,92,0,"get"],[36,19,92,0],[37,6,92,0],[37,13,92,9,"useUpload"],[37,22,92,18],[38,4,92,18],[39,2,92,18],[40,2,92,21],[40,6,92,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,92,21],[40,45,92,21,"require"],[40,52,92,21],[40,53,92,21,"_dependencyMap"],[40,67,92,21],[41,2,92,21],[41,6,92,21,"_asyncToGenerator"],[41,23,92,21],[41,26,92,21,"_interopDefault"],[41,41,92,21],[41,42,92,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,92,21],[42,2,92,21],[42,6,92,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,92,21],[42,42,92,21,"require"],[42,49,92,21],[42,50,92,21,"_dependencyMap"],[42,64,92,21],[43,2,92,21],[43,6,92,21,"_slicedToArray"],[43,20,92,21],[43,23,92,21,"_interopDefault"],[43,38,92,21],[43,39,92,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,92,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[59,12,12,8],[60,12,13,8],[60,16,13,14,"uri"],[60,19,13,17],[60,22,13,20,"asset"],[60,27,13,25],[60,28,13,26,"uri"],[60,31,13,29],[60,35,13,33,"asset"],[60,40,13,38],[60,42,13,40,"file"],[60,46,13,44],[60,48,13,46,"uri"],[60,51,13,49],[61,12,14,8],[61,16,14,14,"guessedName"],[61,27,14,25],[61,30,15,10,"asset"],[61,35,15,15],[61,36,15,16,"fileName"],[61,44,15,24],[61,48,16,10,"asset"],[61,53,16,15],[61,54,16,16,"name"],[61,58,16,20],[61,63,17,11,"uri"],[61,66,17,14],[61,69,17,17,"uri"],[61,72,17,20],[61,73,17,21,"split"],[61,78,17,26],[61,79,17,27],[61,82,17,30],[61,83,17,31],[61,84,17,32,"pop"],[61,87,17,35],[61,88,17,36],[61,89,17,37],[61,92,17,40],[61,96,17,44],[61,97,17,45],[61,101,18,10],[61,109,18,18],[62,12,19,8],[63,12,20,8],[63,16,20,14,"type"],[63,20,20,18],[63,23,21,10,"asset"],[63,28,21,15],[63,29,21,16,"mimeType"],[63,37,21,24],[63,41,22,10,"asset"],[63,46,22,15],[63,47,22,16,"type"],[63,51,22,20],[63,56,23,11,"guessedName"],[63,67,23,22],[63,68,23,23,"toLowerCase"],[63,79,23,34],[63,80,23,35],[63,81,23,36],[63,82,23,37,"endsWith"],[63,90,23,45],[63,91,23,46],[63,97,23,52],[63,98,23,53],[63,101,24,14],[63,112,24,25],[63,115,25,14],[63,127,25,26],[63,128,25,27],[64,12,27,8],[64,16,27,12],[64,17,27,13,"uri"],[64,20,27,16],[64,22,27,18],[65,14,28,10],[65,20,28,16],[65,24,28,20,"Error"],[65,29,28,25],[65,30,28,26],[65,58,28,54],[65,59,28,55],[66,12,29,8],[67,12,31,8],[67,16,31,14,"formData"],[67,24,31,22],[67,27,31,25],[67,31,31,29,"FormData"],[67,39,31,37],[67,40,31,38],[67,41,31,39],[68,12,32,8,"formData"],[68,20,32,16],[68,21,32,17,"append"],[68,27,32,23],[68,28,32,24],[68,34,32,30],[68,36,32,32],[69,14,33,10],[70,14,34,10,"uri"],[70,17,34,13],[71,14,35,10,"name"],[71,18,35,14],[71,20,35,16,"guessedName"],[71,31,35,27],[72,14,36,10,"type"],[73,12,37,8],[73,13,37,9],[73,14,37,10],[74,12,39,8,"response"],[74,20,39,16],[74,29,39,25,"fetch"],[74,34,39,30],[74,35,39,31],[74,57,39,53],[74,59,39,55],[75,14,40,10,"method"],[75,20,40,16],[75,22,40,18],[75,28,40,24],[76,14,41,10,"body"],[76,18,41,14],[76,20,41,16,"formData"],[77,12,42,8],[77,13,42,9],[77,14,42,10],[78,10,43,6],[78,11,43,7],[78,17,43,13],[78,21,43,17],[78,26,43,22],[78,30,43,26,"input"],[78,35,43,31],[78,37,43,33],[79,12,44,8,"response"],[79,20,44,16],[79,29,44,25,"fetch"],[79,34,44,30],[79,35,44,31],[79,57,44,53],[79,59,44,55],[80,14,45,10,"method"],[80,20,45,16],[80,22,45,18],[80,28,45,24],[81,14,46,10,"headers"],[81,21,46,17],[81,23,46,19],[82,16,47,12],[82,30,47,26],[82,32,47,28],[83,14,48,10],[83,15,48,11],[84,14,49,10,"body"],[84,18,49,14],[84,20,49,16,"JSON"],[84,24,49,20],[84,25,49,21,"stringify"],[84,34,49,30],[84,35,49,31],[85,16,49,33,"url"],[85,19,49,36],[85,21,49,38,"input"],[85,26,49,43],[85,27,49,44,"url"],[86,14,49,48],[86,15,49,49],[87,12,50,8],[87,13,50,9],[87,14,50,10],[88,10,51,6],[88,11,51,7],[88,17,51,13],[88,21,51,17],[88,29,51,25],[88,33,51,29,"input"],[88,38,51,34],[88,40,51,36],[89,12,52,8,"response"],[89,20,52,16],[89,29,52,25,"fetch"],[89,34,52,30],[89,35,52,31],[89,57,52,53],[89,59,52,55],[90,14,53,10,"method"],[90,20,53,16],[90,22,53,18],[90,28,53,24],[91,14,54,10,"headers"],[91,21,54,17],[91,23,54,19],[92,16,55,12],[92,30,55,26],[92,32,55,28],[93,14,56,10],[93,15,56,11],[94,14,57,10,"body"],[94,18,57,14],[94,20,57,16,"JSON"],[94,24,57,20],[94,25,57,21,"stringify"],[94,34,57,30],[94,35,57,31],[95,16,57,33,"base64"],[95,22,57,39],[95,24,57,41,"input"],[95,29,57,46],[95,30,57,47,"base64"],[96,14,57,54],[96,15,57,55],[97,12,58,8],[97,13,58,9],[97,14,58,10],[98,10,59,6],[98,11,59,7],[98,17,59,13],[99,12,60,8,"response"],[99,20,60,16],[99,29,60,25,"fetch"],[99,34,60,30],[99,35,60,31],[99,57,60,53],[99,59,60,55],[100,14,61,10,"method"],[100,20,61,16],[100,22,61,18],[100,28,61,24],[101,14,62,10,"headers"],[101,21,62,17],[101,23,62,19],[102,16,63,12],[102,30,63,26],[102,32,63,28],[103,14,64,10],[103,15,64,11],[104,14,65,10,"body"],[104,18,65,14],[104,20,65,16,"input"],[104,25,65,21],[104,26,65,22,"buffer"],[105,12,66,8],[105,13,66,9],[105,14,66,10],[106,10,67,6],[107,10,68,6],[107,14,68,10],[107,15,68,11,"response"],[107,23,68,19],[107,25,68,21,"ok"],[107,27,68,23],[107,29,68,25],[108,12,69,8],[108,16,69,12,"response"],[108,24,69,20],[108,28,69,24,"response"],[108,36,69,32],[108,37,69,33,"status"],[108,43,69,39],[108,48,69,44],[108,51,69,47],[108,53,69,49],[109,14,70,10],[109,20,70,16],[109,24,70,20,"Error"],[109,29,70,25],[109,30,70,26],[109,62,70,58],[109,63,70,59],[110,12,71,8],[111,12,72,8],[111,18,72,14],[111,22,72,18,"Error"],[111,27,72,23],[111,28,72,24],[111,43,72,39],[111,44,72,40],[112,10,73,6],[113,10,74,6],[113,14,74,12,"data"],[113,18,74,16],[113,27,74,25,"response"],[113,35,74,33],[113,36,74,34,"json"],[113,40,74,38],[113,41,74,39],[113,42,74,40],[114,10,75,6],[114,17,75,13],[115,12,75,15,"url"],[115,15,75,18],[115,17,75,20,"data"],[115,21,75,24],[115,22,75,25,"url"],[115,25,75,28],[116,12,75,30,"mimeType"],[116,20,75,38],[116,22,75,40,"data"],[116,26,75,44],[116,27,75,45,"mimeType"],[116,35,75,53],[116,39,75,57],[117,10,75,62],[117,11,75,63],[118,8,76,4],[118,9,76,5],[118,10,76,6],[118,17,76,13,"uploadError"],[118,28,76,24],[118,30,76,26],[119,10,77,6],[119,14,77,10,"uploadError"],[119,25,77,21],[119,37,77,33,"Error"],[119,42,77,38],[119,44,77,40],[120,12,78,8],[120,19,78,15],[121,14,78,17,"error"],[121,19,78,22],[121,21,78,24,"uploadError"],[121,32,78,35],[121,33,78,36,"message"],[122,12,78,44],[122,13,78,45],[123,10,79,6],[124,10,80,6],[124,14,80,10],[124,21,80,17,"uploadError"],[124,32,80,28],[124,37,80,33],[124,45,80,41],[124,47,80,43],[125,12,81,8],[125,19,81,15],[126,14,81,17,"error"],[126,19,81,22],[126,21,81,24,"uploadError"],[127,12,81,36],[127,13,81,37],[128,10,82,6],[129,10,83,6],[129,17,83,13],[130,12,83,15,"error"],[130,17,83,20],[130,19,83,22],[131,10,83,38],[131,11,83,39],[132,8,84,4],[132,9,84,5],[132,18,84,14],[133,10,85,6,"setLoading"],[133,20,85,16],[133,21,85,17],[133,26,85,22],[133,27,85,23],[134,8,86,4],[135,6,87,2],[135,7,87,3],[136,6,87,3],[136,23,87,3,"_x"],[136,25,87,3],[137,8,87,3],[137,15,87,3,"_ref"],[137,19,87,3],[137,20,87,3,"apply"],[137,25,87,3],[137,32,87,3,"arguments"],[137,41,87,3],[138,6,87,3],[139,4,87,3],[139,9,87,5],[139,11,87,7],[139,12,87,8],[140,4,89,2],[140,11,89,9],[140,12,89,10,"upload"],[140,18,89,16],[140,20,89,18],[141,6,89,20,"loading"],[142,4,89,28],[142,5,89,29],[142,6,89,30],[143,2,90,0],[144,2,90,1,"_s"],[144,4,90,1],[144,5,3,9,"useUpload"],[144,14,3,18],[145,2,93,0],[145,6,93,0,"_default"],[145,14,93,0],[145,17,93,15,"useUpload"],[145,26,93,24],[146,0,93,25],[146,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GDkF;CDG"},"hasCjsExports":false},"type":"js/module"}]}