{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":54,"index":86}}],"key":"hYqFhoW7zWgYTBVE1SkA0/XFH/Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  var _expoFileSystemLegacy = require(_dependencyMap[3], \"expo-file-system/legacy\");\n  var FileSystem = _interopNamespace(_expoFileSystemLegacy);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              console.log('FileSystem module:', FileSystem);\n              console.log('FileSystem keys:', Object.keys(FileSystem));\n              console.log('EncodingType:', FileSystem.EncodingType);\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType?.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":162,"map":[[28,2,92,0,"Object"],[28,8,92,0],[28,9,92,0,"defineProperty"],[28,23,92,0],[28,24,92,0,"exports"],[28,31,92,0],[29,4,92,0,"enumerable"],[29,14,92,0],[30,4,92,0,"get"],[30,7,92,0],[30,18,92,0,"get"],[30,19,92,0],[31,6,92,0],[31,13,92,0,"_default"],[31,21,92,0],[32,4,92,0],[33,2,92,0],[34,2,91,0,"Object"],[34,8,91,0],[34,9,91,0,"defineProperty"],[34,23,91,0],[34,24,91,0,"exports"],[34,31,91,0],[35,4,91,0,"enumerable"],[35,14,91,0],[36,4,91,0,"get"],[36,7,91,0],[36,18,91,0,"get"],[36,19,91,0],[37,6,91,0],[37,13,91,9,"useUpload"],[37,22,91,18],[38,4,91,18],[39,2,91,18],[40,2,91,21],[40,6,91,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,91,21],[40,45,91,21,"require"],[40,52,91,21],[40,53,91,21,"_dependencyMap"],[40,67,91,21],[41,2,91,21],[41,6,91,21,"_asyncToGenerator"],[41,23,91,21],[41,26,91,21,"_interopDefault"],[41,41,91,21],[41,42,91,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,91,21],[42,2,91,21],[42,6,91,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,91,21],[42,42,91,21,"require"],[42,49,91,21],[42,50,91,21,"_dependencyMap"],[42,64,91,21],[43,2,91,21],[43,6,91,21,"_slicedToArray"],[43,20,91,21],[43,23,91,21,"_interopDefault"],[43,38,91,21],[43,39,91,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,91,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,2,0],[46,6,2,0,"_expoFileSystemLegacy"],[46,27,2,0],[46,30,2,0,"require"],[46,37,2,0],[46,38,2,0,"_dependencyMap"],[46,52,2,0],[47,2,2,0],[47,6,2,0,"FileSystem"],[47,16,2,0],[47,19,2,0,"_interopNamespace"],[47,36,2,0],[47,37,2,0,"_expoFileSystemLegacy"],[47,58,2,0],[48,2,4,0],[48,11,4,9,"useUpload"],[48,20,4,18,"useUpload"],[48,21,4,18],[48,23,4,21],[49,4,4,21,"_s"],[49,6,4,21],[50,4,5,2],[50,8,5,2,"_React$useState"],[50,23,5,2],[50,26,5,32,"React"],[50,31,5,37],[50,32,5,38,"useState"],[50,40,5,46],[50,41,5,47],[50,46,5,52],[50,47,5,53],[51,6,5,53,"_React$useState2"],[51,22,5,53],[51,29,5,53,"_slicedToArray"],[51,43,5,53],[51,44,5,53,"default"],[51,51,5,53],[51,53,5,53,"_React$useState"],[51,68,5,53],[52,6,5,9,"loading"],[52,13,5,16],[52,16,5,16,"_React$useState2"],[52,32,5,16],[53,6,5,18,"setLoading"],[53,16,5,28],[53,19,5,28,"_React$useState2"],[53,35,5,28],[54,4,6,2],[54,8,6,8,"upload"],[54,14,6,14],[54,17,6,17,"React"],[54,22,6,22],[54,23,6,23,"useCallback"],[54,34,6,34],[55,6,6,34],[55,10,6,34,"_ref"],[55,14,6,34],[55,21,6,34,"_asyncToGenerator"],[55,38,6,34],[55,39,6,34,"default"],[55,46,6,34],[55,48,6,35],[55,59,6,42,"input"],[55,64,6,47],[55,66,6,52],[56,8,7,4],[56,12,7,8],[57,10,8,6,"setLoading"],[57,20,8,16],[57,21,8,17],[57,25,8,21],[57,26,8,22],[58,10,9,6],[58,14,9,10,"response"],[58,22,9,18],[59,10,11,6],[59,14,11,10],[59,32,11,28],[59,36,11,32,"input"],[59,41,11,37],[59,45,11,41,"input"],[59,50,11,46],[59,51,11,47,"reactNativeAsset"],[59,67,11,63],[59,69,11,65],[60,12,12,8],[60,16,12,14,"asset"],[60,21,12,19],[60,24,12,22,"input"],[60,29,12,27],[60,30,12,28,"reactNativeAsset"],[60,46,12,44],[62,12,14,8],[63,12,15,8],[63,16,15,12,"asset"],[63,21,15,17],[63,22,15,18,"base64"],[63,28,15,24],[63,30,15,26],[64,14,16,10],[65,14,17,10,"response"],[65,22,17,18],[65,31,17,27,"fetch"],[65,36,17,32],[65,37,17,33],[65,57,17,53],[65,59,17,55],[66,16,18,12,"method"],[66,22,18,18],[66,24,18,20],[66,30,18,26],[67,16,19,12,"headers"],[67,23,19,19],[67,25,19,21],[68,18,20,14],[68,32,20,28],[68,34,20,30],[69,16,21,12],[69,17,21,13],[70,16,22,12,"body"],[70,20,22,16],[70,22,22,18,"JSON"],[70,26,22,22],[70,27,22,23,"stringify"],[70,36,22,32],[70,37,22,33],[71,18,22,35,"base64"],[71,24,22,41],[71,26,22,43,"asset"],[71,31,22,48],[71,32,22,49,"base64"],[72,16,22,56],[72,17,22,57],[73,14,23,10],[73,15,23,11],[73,16,23,12],[74,12,24,8],[74,13,24,9],[74,19,24,15],[74,23,24,19,"asset"],[74,28,24,24],[74,29,24,25,"uri"],[74,32,24,28],[74,34,24,30],[75,14,25,10],[76,14,26,10,"console"],[76,21,26,17],[76,22,26,18,"log"],[76,25,26,21],[76,26,26,22],[76,46,26,42],[76,48,26,44,"FileSystem"],[76,58,26,54],[76,59,26,55],[77,14,27,10,"console"],[77,21,27,17],[77,22,27,18,"log"],[77,25,27,21],[77,26,27,22],[77,44,27,40],[77,46,27,42,"Object"],[77,52,27,48],[77,53,27,49,"keys"],[77,57,27,53],[77,58,27,54,"FileSystem"],[77,68,27,64],[77,69,27,65],[77,70,27,66],[78,14,28,10,"console"],[78,21,28,17],[78,22,28,18,"log"],[78,25,28,21],[78,26,28,22],[78,41,28,37],[78,43,28,39,"FileSystem"],[78,53,28,49],[78,54,28,50,"EncodingType"],[78,66,28,62],[78,67,28,63],[79,14,29,10],[79,18,29,16,"base64Data"],[79,28,29,26],[79,37,29,35,"FileSystem"],[79,47,29,45],[79,48,29,46,"readAsStringAsync"],[79,65,29,63],[79,66,29,64,"asset"],[79,71,29,69],[79,72,29,70,"uri"],[79,75,29,73],[79,77,29,75],[80,16,30,12,"encoding"],[80,24,30,20],[80,26,30,22,"FileSystem"],[80,36,30,32],[80,37,30,33,"EncodingType"],[80,49,30,45],[80,51,30,47,"Base64"],[81,14,31,10],[81,15,31,11],[81,16,31,12],[82,14,32,10,"response"],[82,22,32,18],[82,31,32,27,"fetch"],[82,36,32,32],[82,37,32,33],[82,57,32,53],[82,59,32,55],[83,16,33,12,"method"],[83,22,33,18],[83,24,33,20],[83,30,33,26],[84,16,34,12,"headers"],[84,23,34,19],[84,25,34,21],[85,18,35,14],[85,32,35,28],[85,34,35,30],[86,16,36,12],[86,17,36,13],[87,16,37,12,"body"],[87,20,37,16],[87,22,37,18,"JSON"],[87,26,37,22],[87,27,37,23,"stringify"],[87,36,37,32],[87,37,37,33],[88,18,37,35,"base64"],[88,24,37,41],[88,26,37,43,"base64Data"],[89,16,37,54],[89,17,37,55],[90,14,38,10],[90,15,38,11],[90,16,38,12],[91,12,39,8],[91,13,39,9],[91,19,39,15],[92,14,40,10],[92,20,40,16],[92,24,40,20,"Error"],[92,29,40,25],[92,30,40,26],[92,65,40,61],[92,66,40,62],[93,12,41,8],[94,10,42,6],[94,11,42,7],[94,17,42,13],[94,21,42,17],[94,26,42,22],[94,30,42,26,"input"],[94,35,42,31],[94,37,42,33],[95,12,43,8,"response"],[95,20,43,16],[95,29,43,25,"fetch"],[95,34,43,30],[95,35,43,31],[95,55,43,51],[95,57,43,53],[96,14,44,10,"method"],[96,20,44,16],[96,22,44,18],[96,28,44,24],[97,14,45,10,"headers"],[97,21,45,17],[97,23,45,19],[98,16,46,12],[98,30,46,26],[98,32,46,28],[99,14,47,10],[99,15,47,11],[100,14,48,10,"body"],[100,18,48,14],[100,20,48,16,"JSON"],[100,24,48,20],[100,25,48,21,"stringify"],[100,34,48,30],[100,35,48,31],[101,16,48,33,"url"],[101,19,48,36],[101,21,48,38,"input"],[101,26,48,43],[101,27,48,44,"url"],[102,14,48,48],[102,15,48,49],[103,12,49,8],[103,13,49,9],[103,14,49,10],[104,10,50,6],[104,11,50,7],[104,17,50,13],[104,21,50,17],[104,29,50,25],[104,33,50,29,"input"],[104,38,50,34],[104,40,50,36],[105,12,51,8,"response"],[105,20,51,16],[105,29,51,25,"fetch"],[105,34,51,30],[105,35,51,31],[105,55,51,51],[105,57,51,53],[106,14,52,10,"method"],[106,20,52,16],[106,22,52,18],[106,28,52,24],[107,14,53,10,"headers"],[107,21,53,17],[107,23,53,19],[108,16,54,12],[108,30,54,26],[108,32,54,28],[109,14,55,10],[109,15,55,11],[110,14,56,10,"body"],[110,18,56,14],[110,20,56,16,"JSON"],[110,24,56,20],[110,25,56,21,"stringify"],[110,34,56,30],[110,35,56,31],[111,16,56,33,"base64"],[111,22,56,39],[111,24,56,41,"input"],[111,29,56,46],[111,30,56,47,"base64"],[112,14,56,54],[112,15,56,55],[113,12,57,8],[113,13,57,9],[113,14,57,10],[114,10,58,6],[114,11,58,7],[114,17,58,13],[115,12,59,8,"response"],[115,20,59,16],[115,29,59,25,"fetch"],[115,34,59,30],[115,35,59,31],[115,55,59,51],[115,57,59,53],[116,14,60,10,"method"],[116,20,60,16],[116,22,60,18],[116,28,60,24],[117,14,61,10,"headers"],[117,21,61,17],[117,23,61,19],[118,16,62,12],[118,30,62,26],[118,32,62,28],[119,14,63,10],[119,15,63,11],[120,14,64,10,"body"],[120,18,64,14],[120,20,64,16,"input"],[120,25,64,21],[120,26,64,22,"buffer"],[121,12,65,8],[121,13,65,9],[121,14,65,10],[122,10,66,6],[123,10,67,6],[123,14,67,10],[123,15,67,11,"response"],[123,23,67,19],[123,25,67,21,"ok"],[123,27,67,23],[123,29,67,25],[124,12,68,8],[124,16,68,12,"response"],[124,24,68,20],[124,28,68,24,"response"],[124,36,68,32],[124,37,68,33,"status"],[124,43,68,39],[124,48,68,44],[124,51,68,47],[124,53,68,49],[125,14,69,10],[125,20,69,16],[125,24,69,20,"Error"],[125,29,69,25],[125,30,69,26],[125,62,69,58],[125,63,69,59],[126,12,70,8],[127,12,71,8],[127,18,71,14],[127,22,71,18,"Error"],[127,27,71,23],[127,28,71,24],[127,43,71,39],[127,44,71,40],[128,10,72,6],[129,10,73,6],[129,14,73,12,"data"],[129,18,73,16],[129,27,73,25,"response"],[129,35,73,33],[129,36,73,34,"json"],[129,40,73,38],[129,41,73,39],[129,42,73,40],[130,10,74,6],[130,17,74,13],[131,12,74,15,"url"],[131,15,74,18],[131,17,74,20,"data"],[131,21,74,24],[131,22,74,25,"url"],[131,25,74,28],[132,12,74,30,"mimeType"],[132,20,74,38],[132,22,74,40,"data"],[132,26,74,44],[132,27,74,45,"mimeType"],[132,35,74,53],[132,39,74,57],[133,10,74,62],[133,11,74,63],[134,8,75,4],[134,9,75,5],[134,10,75,6],[134,17,75,13,"uploadError"],[134,28,75,24],[134,30,75,26],[135,10,76,6],[135,14,76,10,"uploadError"],[135,25,76,21],[135,37,76,33,"Error"],[135,42,76,38],[135,44,76,40],[136,12,77,8],[136,19,77,15],[137,14,77,17,"error"],[137,19,77,22],[137,21,77,24,"uploadError"],[137,32,77,35],[137,33,77,36,"message"],[138,12,77,44],[138,13,77,45],[139,10,78,6],[140,10,79,6],[140,14,79,10],[140,21,79,17,"uploadError"],[140,32,79,28],[140,37,79,33],[140,45,79,41],[140,47,79,43],[141,12,80,8],[141,19,80,15],[142,14,80,17,"error"],[142,19,80,22],[142,21,80,24,"uploadError"],[143,12,80,36],[143,13,80,37],[144,10,81,6],[145,10,82,6],[145,17,82,13],[146,12,82,15,"error"],[146,17,82,20],[146,19,82,22],[147,10,82,38],[147,11,82,39],[148,8,83,4],[148,9,83,5],[148,18,83,14],[149,10,84,6,"setLoading"],[149,20,84,16],[149,21,84,17],[149,26,84,22],[149,27,84,23],[150,8,85,4],[151,6,86,2],[151,7,86,3],[152,6,86,3],[152,23,86,3,"_x"],[152,25,86,3],[153,8,86,3],[153,15,86,3,"_ref"],[153,19,86,3],[153,20,86,3,"apply"],[153,25,86,3],[153,32,86,3,"arguments"],[153,41,86,3],[154,6,86,3],[155,4,86,3],[155,9,86,5],[155,11,86,7],[155,12,86,8],[156,4,88,2],[156,11,88,9],[156,12,88,10,"upload"],[156,18,88,16],[156,20,88,18],[157,6,88,20,"loading"],[158,4,88,28],[158,5,88,29],[158,6,88,30],[159,2,89,0],[160,2,89,1,"_s"],[160,4,89,1],[160,5,4,9,"useUpload"],[160,14,4,18],[161,2,92,0],[161,6,92,0,"_default"],[161,14,92,0],[161,17,92,15,"useUpload"],[161,26,92,24],[162,0,92,25],[162,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACG;mCCE;GDgF;CDG"},"hasCjsExports":false},"type":"js/module"}]}