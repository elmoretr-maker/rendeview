{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":25,"column":60,"index":911},"end":{"line":25,"column":86,"index":937}}],"key":"FdAtEpA5N9mk6X5QUj7qWZFfnR8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":25,"column":10,"index":861},"end":{"line":25,"column":87,"index":938}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var _yield$import = yield require(_dependencyMap[4], \"expo/internal/async-require-module\")(_dependencyMap[3], _dependencyMap.paths, \"expo-file-system\"),\n                readAsStringAsync = _yield$import.readAsStringAsync,\n                EncodingType = _yield$import.EncodingType;\n              var base64Data = yield readAsStringAsync(asset.uri, {\n                encoding: EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":160,"map":[[28,2,89,0,"Object"],[28,8,89,0],[28,9,89,0,"defineProperty"],[28,23,89,0],[28,24,89,0,"exports"],[28,31,89,0],[29,4,89,0,"enumerable"],[29,14,89,0],[30,4,89,0,"get"],[30,7,89,0],[30,18,89,0,"get"],[30,19,89,0],[31,6,89,0],[31,13,89,0,"_default"],[31,21,89,0],[32,4,89,0],[33,2,89,0],[34,2,88,0,"Object"],[34,8,88,0],[34,9,88,0,"defineProperty"],[34,23,88,0],[34,24,88,0,"exports"],[34,31,88,0],[35,4,88,0,"enumerable"],[35,14,88,0],[36,4,88,0,"get"],[36,7,88,0],[36,18,88,0,"get"],[36,19,88,0],[37,6,88,0],[37,13,88,9,"useUpload"],[37,22,88,18],[38,4,88,18],[39,2,88,18],[40,2,88,21],[40,6,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,88,21],[40,45,88,21,"require"],[40,52,88,21],[40,53,88,21,"_dependencyMap"],[40,67,88,21],[41,2,88,21],[41,6,88,21,"_asyncToGenerator"],[41,23,88,21],[41,26,88,21,"_interopDefault"],[41,41,88,21],[41,42,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,88,21],[42,2,88,21],[42,6,88,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,88,21],[42,42,88,21,"require"],[42,49,88,21],[42,50,88,21,"_dependencyMap"],[42,64,88,21],[43,2,88,21],[43,6,88,21,"_slicedToArray"],[43,20,88,21],[43,23,88,21,"_interopDefault"],[43,38,88,21],[43,39,88,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,88,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[74,18,25,10,"_yield$import"],[74,31,25,10],[74,40,25,10,"require"],[74,47,25,10],[74,48,25,10,"_dependencyMap"],[74,62,25,10],[74,105,25,10,"_dependencyMap"],[74,119,25,10],[74,124,25,10,"_dependencyMap"],[74,138,25,10],[74,139,25,10,"paths"],[74,144,25,10],[75,16,25,18,"readAsStringAsync"],[75,33,25,35],[75,36,25,35,"_yield$import"],[75,49,25,35],[75,50,25,18,"readAsStringAsync"],[75,67,25,35],[76,16,25,37,"EncodingType"],[76,28,25,49],[76,31,25,49,"_yield$import"],[76,44,25,49],[76,45,25,37,"EncodingType"],[76,57,25,49],[77,14,26,10],[77,18,26,16,"base64Data"],[77,28,26,26],[77,37,26,35,"readAsStringAsync"],[77,54,26,52],[77,55,26,53,"asset"],[77,60,26,58],[77,61,26,59,"uri"],[77,64,26,62],[77,66,26,64],[78,16,27,12,"encoding"],[78,24,27,20],[78,26,27,22,"EncodingType"],[78,38,27,34],[78,39,27,35,"Base64"],[79,14,28,10],[79,15,28,11],[79,16,28,12],[80,14,29,10,"response"],[80,22,29,18],[80,31,29,27,"fetch"],[80,36,29,32],[80,37,29,33],[80,57,29,53],[80,59,29,55],[81,16,30,12,"method"],[81,22,30,18],[81,24,30,20],[81,30,30,26],[82,16,31,12,"headers"],[82,23,31,19],[82,25,31,21],[83,18,32,14],[83,32,32,28],[83,34,32,30],[84,16,33,12],[84,17,33,13],[85,16,34,12,"body"],[85,20,34,16],[85,22,34,18,"JSON"],[85,26,34,22],[85,27,34,23,"stringify"],[85,36,34,32],[85,37,34,33],[86,18,34,35,"base64"],[86,24,34,41],[86,26,34,43,"base64Data"],[87,16,34,54],[87,17,34,55],[88,14,35,10],[88,15,35,11],[88,16,35,12],[89,12,36,8],[89,13,36,9],[89,19,36,15],[90,14,37,10],[90,20,37,16],[90,24,37,20,"Error"],[90,29,37,25],[90,30,37,26],[90,65,37,61],[90,66,37,62],[91,12,38,8],[92,10,39,6],[92,11,39,7],[92,17,39,13],[92,21,39,17],[92,26,39,22],[92,30,39,26,"input"],[92,35,39,31],[92,37,39,33],[93,12,40,8,"response"],[93,20,40,16],[93,29,40,25,"fetch"],[93,34,40,30],[93,35,40,31],[93,55,40,51],[93,57,40,53],[94,14,41,10,"method"],[94,20,41,16],[94,22,41,18],[94,28,41,24],[95,14,42,10,"headers"],[95,21,42,17],[95,23,42,19],[96,16,43,12],[96,30,43,26],[96,32,43,28],[97,14,44,10],[97,15,44,11],[98,14,45,10,"body"],[98,18,45,14],[98,20,45,16,"JSON"],[98,24,45,20],[98,25,45,21,"stringify"],[98,34,45,30],[98,35,45,31],[99,16,45,33,"url"],[99,19,45,36],[99,21,45,38,"input"],[99,26,45,43],[99,27,45,44,"url"],[100,14,45,48],[100,15,45,49],[101,12,46,8],[101,13,46,9],[101,14,46,10],[102,10,47,6],[102,11,47,7],[102,17,47,13],[102,21,47,17],[102,29,47,25],[102,33,47,29,"input"],[102,38,47,34],[102,40,47,36],[103,12,48,8,"response"],[103,20,48,16],[103,29,48,25,"fetch"],[103,34,48,30],[103,35,48,31],[103,55,48,51],[103,57,48,53],[104,14,49,10,"method"],[104,20,49,16],[104,22,49,18],[104,28,49,24],[105,14,50,10,"headers"],[105,21,50,17],[105,23,50,19],[106,16,51,12],[106,30,51,26],[106,32,51,28],[107,14,52,10],[107,15,52,11],[108,14,53,10,"body"],[108,18,53,14],[108,20,53,16,"JSON"],[108,24,53,20],[108,25,53,21,"stringify"],[108,34,53,30],[108,35,53,31],[109,16,53,33,"base64"],[109,22,53,39],[109,24,53,41,"input"],[109,29,53,46],[109,30,53,47,"base64"],[110,14,53,54],[110,15,53,55],[111,12,54,8],[111,13,54,9],[111,14,54,10],[112,10,55,6],[112,11,55,7],[112,17,55,13],[113,12,56,8,"response"],[113,20,56,16],[113,29,56,25,"fetch"],[113,34,56,30],[113,35,56,31],[113,55,56,51],[113,57,56,53],[114,14,57,10,"method"],[114,20,57,16],[114,22,57,18],[114,28,57,24],[115,14,58,10,"headers"],[115,21,58,17],[115,23,58,19],[116,16,59,12],[116,30,59,26],[116,32,59,28],[117,14,60,10],[117,15,60,11],[118,14,61,10,"body"],[118,18,61,14],[118,20,61,16,"input"],[118,25,61,21],[118,26,61,22,"buffer"],[119,12,62,8],[119,13,62,9],[119,14,62,10],[120,10,63,6],[121,10,64,6],[121,14,64,10],[121,15,64,11,"response"],[121,23,64,19],[121,25,64,21,"ok"],[121,27,64,23],[121,29,64,25],[122,12,65,8],[122,16,65,12,"response"],[122,24,65,20],[122,28,65,24,"response"],[122,36,65,32],[122,37,65,33,"status"],[122,43,65,39],[122,48,65,44],[122,51,65,47],[122,53,65,49],[123,14,66,10],[123,20,66,16],[123,24,66,20,"Error"],[123,29,66,25],[123,30,66,26],[123,62,66,58],[123,63,66,59],[124,12,67,8],[125,12,68,8],[125,18,68,14],[125,22,68,18,"Error"],[125,27,68,23],[125,28,68,24],[125,43,68,39],[125,44,68,40],[126,10,69,6],[127,10,70,6],[127,14,70,12,"data"],[127,18,70,16],[127,27,70,25,"response"],[127,35,70,33],[127,36,70,34,"json"],[127,40,70,38],[127,41,70,39],[127,42,70,40],[128,10,71,6],[128,17,71,13],[129,12,71,15,"url"],[129,15,71,18],[129,17,71,20,"data"],[129,21,71,24],[129,22,71,25,"url"],[129,25,71,28],[130,12,71,30,"mimeType"],[130,20,71,38],[130,22,71,40,"data"],[130,26,71,44],[130,27,71,45,"mimeType"],[130,35,71,53],[130,39,71,57],[131,10,71,62],[131,11,71,63],[132,8,72,4],[132,9,72,5],[132,10,72,6],[132,17,72,13,"uploadError"],[132,28,72,24],[132,30,72,26],[133,10,73,6],[133,14,73,10,"uploadError"],[133,25,73,21],[133,37,73,33,"Error"],[133,42,73,38],[133,44,73,40],[134,12,74,8],[134,19,74,15],[135,14,74,17,"error"],[135,19,74,22],[135,21,74,24,"uploadError"],[135,32,74,35],[135,33,74,36,"message"],[136,12,74,44],[136,13,74,45],[137,10,75,6],[138,10,76,6],[138,14,76,10],[138,21,76,17,"uploadError"],[138,32,76,28],[138,37,76,33],[138,45,76,41],[138,47,76,43],[139,12,77,8],[139,19,77,15],[140,14,77,17,"error"],[140,19,77,22],[140,21,77,24,"uploadError"],[141,12,77,36],[141,13,77,37],[142,10,78,6],[143,10,79,6],[143,17,79,13],[144,12,79,15,"error"],[144,17,79,20],[144,19,79,22],[145,10,79,38],[145,11,79,39],[146,8,80,4],[146,9,80,5],[146,18,80,14],[147,10,81,6,"setLoading"],[147,20,81,16],[147,21,81,17],[147,26,81,22],[147,27,81,23],[148,8,82,4],[149,6,83,2],[149,7,83,3],[150,6,83,3],[150,23,83,3,"_x"],[150,25,83,3],[151,8,83,3],[151,15,83,3,"_ref"],[151,19,83,3],[151,20,83,3,"apply"],[151,25,83,3],[151,32,83,3,"arguments"],[151,41,83,3],[152,6,83,3],[153,4,83,3],[153,9,83,5],[153,11,83,7],[153,12,83,8],[154,4,85,2],[154,11,85,9],[154,12,85,10,"upload"],[154,18,85,16],[154,20,85,18],[155,6,85,20,"loading"],[156,4,85,28],[156,5,85,29],[156,6,85,30],[157,2,86,0],[158,2,86,1,"_s"],[158,4,86,1],[158,5,3,9,"useUpload"],[158,14,3,18],[159,2,89,0],[159,6,89,0,"_default"],[159,14,89,0],[159,17,89,15,"useUpload"],[159,26,89,24],[160,0,89,25],[160,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD8E;CDG"},"hasCjsExports":false},"type":"js/module"}]}