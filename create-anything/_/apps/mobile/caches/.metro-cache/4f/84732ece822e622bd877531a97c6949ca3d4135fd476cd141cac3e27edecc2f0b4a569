{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos need base64 conversion - this will be handled by the caller\n              // For now, just try uploading the URI directly\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":155,"map":[[28,2,86,0,"Object"],[28,8,86,0],[28,9,86,0,"defineProperty"],[28,23,86,0],[28,24,86,0,"exports"],[28,31,86,0],[29,4,86,0,"enumerable"],[29,14,86,0],[30,4,86,0,"get"],[30,7,86,0],[30,18,86,0,"get"],[30,19,86,0],[31,6,86,0],[31,13,86,0,"_default"],[31,21,86,0],[32,4,86,0],[33,2,86,0],[34,2,85,0,"Object"],[34,8,85,0],[34,9,85,0,"defineProperty"],[34,23,85,0],[34,24,85,0,"exports"],[34,31,85,0],[35,4,85,0,"enumerable"],[35,14,85,0],[36,4,85,0,"get"],[36,7,85,0],[36,18,85,0,"get"],[36,19,85,0],[37,6,85,0],[37,13,85,9,"useUpload"],[37,22,85,18],[38,4,85,18],[39,2,85,18],[40,2,85,21],[40,6,85,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,85,21],[40,45,85,21,"require"],[40,52,85,21],[40,53,85,21,"_dependencyMap"],[40,67,85,21],[41,2,85,21],[41,6,85,21,"_asyncToGenerator"],[41,23,85,21],[41,26,85,21,"_interopDefault"],[41,41,85,21],[41,42,85,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,85,21],[42,2,85,21],[42,6,85,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,85,21],[42,42,85,21,"require"],[42,49,85,21],[42,50,85,21,"_dependencyMap"],[42,64,85,21],[43,2,85,21],[43,6,85,21,"_slicedToArray"],[43,20,85,21],[43,23,85,21,"_interopDefault"],[43,38,85,21],[43,39,85,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,85,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[75,14,26,10,"response"],[75,22,26,18],[75,31,26,27,"fetch"],[75,36,26,32],[75,37,26,33],[75,57,26,53],[75,59,26,55],[76,16,27,12,"method"],[76,22,27,18],[76,24,27,20],[76,30,27,26],[77,16,28,12,"headers"],[77,23,28,19],[77,25,28,21],[78,18,29,14],[78,32,29,28],[78,34,29,30],[79,16,30,12],[79,17,30,13],[80,16,31,12,"body"],[80,20,31,16],[80,22,31,18,"JSON"],[80,26,31,22],[80,27,31,23,"stringify"],[80,36,31,32],[80,37,31,33],[81,18,31,35,"base64"],[81,24,31,41],[81,26,31,43,"base64Data"],[82,16,31,54],[82,17,31,55],[83,14,32,10],[83,15,32,11],[83,16,32,12],[84,12,33,8],[84,13,33,9],[84,19,33,15],[85,14,34,10],[85,20,34,16],[85,24,34,20,"Error"],[85,29,34,25],[85,30,34,26],[85,65,34,61],[85,66,34,62],[86,12,35,8],[87,10,36,6],[87,11,36,7],[87,17,36,13],[87,21,36,17],[87,26,36,22],[87,30,36,26,"input"],[87,35,36,31],[87,37,36,33],[88,12,37,8,"response"],[88,20,37,16],[88,29,37,25,"fetch"],[88,34,37,30],[88,35,37,31],[88,55,37,51],[88,57,37,53],[89,14,38,10,"method"],[89,20,38,16],[89,22,38,18],[89,28,38,24],[90,14,39,10,"headers"],[90,21,39,17],[90,23,39,19],[91,16,40,12],[91,30,40,26],[91,32,40,28],[92,14,41,10],[92,15,41,11],[93,14,42,10,"body"],[93,18,42,14],[93,20,42,16,"JSON"],[93,24,42,20],[93,25,42,21,"stringify"],[93,34,42,30],[93,35,42,31],[94,16,42,33,"url"],[94,19,42,36],[94,21,42,38,"input"],[94,26,42,43],[94,27,42,44,"url"],[95,14,42,48],[95,15,42,49],[96,12,43,8],[96,13,43,9],[96,14,43,10],[97,10,44,6],[97,11,44,7],[97,17,44,13],[97,21,44,17],[97,29,44,25],[97,33,44,29,"input"],[97,38,44,34],[97,40,44,36],[98,12,45,8,"response"],[98,20,45,16],[98,29,45,25,"fetch"],[98,34,45,30],[98,35,45,31],[98,55,45,51],[98,57,45,53],[99,14,46,10,"method"],[99,20,46,16],[99,22,46,18],[99,28,46,24],[100,14,47,10,"headers"],[100,21,47,17],[100,23,47,19],[101,16,48,12],[101,30,48,26],[101,32,48,28],[102,14,49,10],[102,15,49,11],[103,14,50,10,"body"],[103,18,50,14],[103,20,50,16,"JSON"],[103,24,50,20],[103,25,50,21,"stringify"],[103,34,50,30],[103,35,50,31],[104,16,50,33,"base64"],[104,22,50,39],[104,24,50,41,"input"],[104,29,50,46],[104,30,50,47,"base64"],[105,14,50,54],[105,15,50,55],[106,12,51,8],[106,13,51,9],[106,14,51,10],[107,10,52,6],[107,11,52,7],[107,17,52,13],[108,12,53,8,"response"],[108,20,53,16],[108,29,53,25,"fetch"],[108,34,53,30],[108,35,53,31],[108,55,53,51],[108,57,53,53],[109,14,54,10,"method"],[109,20,54,16],[109,22,54,18],[109,28,54,24],[110,14,55,10,"headers"],[110,21,55,17],[110,23,55,19],[111,16,56,12],[111,30,56,26],[111,32,56,28],[112,14,57,10],[112,15,57,11],[113,14,58,10,"body"],[113,18,58,14],[113,20,58,16,"input"],[113,25,58,21],[113,26,58,22,"buffer"],[114,12,59,8],[114,13,59,9],[114,14,59,10],[115,10,60,6],[116,10,61,6],[116,14,61,10],[116,15,61,11,"response"],[116,23,61,19],[116,25,61,21,"ok"],[116,27,61,23],[116,29,61,25],[117,12,62,8],[117,16,62,12,"response"],[117,24,62,20],[117,28,62,24,"response"],[117,36,62,32],[117,37,62,33,"status"],[117,43,62,39],[117,48,62,44],[117,51,62,47],[117,53,62,49],[118,14,63,10],[118,20,63,16],[118,24,63,20,"Error"],[118,29,63,25],[118,30,63,26],[118,62,63,58],[118,63,63,59],[119,12,64,8],[120,12,65,8],[120,18,65,14],[120,22,65,18,"Error"],[120,27,65,23],[120,28,65,24],[120,43,65,39],[120,44,65,40],[121,10,66,6],[122,10,67,6],[122,14,67,12,"data"],[122,18,67,16],[122,27,67,25,"response"],[122,35,67,33],[122,36,67,34,"json"],[122,40,67,38],[122,41,67,39],[122,42,67,40],[123,10,68,6],[123,17,68,13],[124,12,68,15,"url"],[124,15,68,18],[124,17,68,20,"data"],[124,21,68,24],[124,22,68,25,"url"],[124,25,68,28],[125,12,68,30,"mimeType"],[125,20,68,38],[125,22,68,40,"data"],[125,26,68,44],[125,27,68,45,"mimeType"],[125,35,68,53],[125,39,68,57],[126,10,68,62],[126,11,68,63],[127,8,69,4],[127,9,69,5],[127,10,69,6],[127,17,69,13,"uploadError"],[127,28,69,24],[127,30,69,26],[128,10,70,6],[128,14,70,10,"uploadError"],[128,25,70,21],[128,37,70,33,"Error"],[128,42,70,38],[128,44,70,40],[129,12,71,8],[129,19,71,15],[130,14,71,17,"error"],[130,19,71,22],[130,21,71,24,"uploadError"],[130,32,71,35],[130,33,71,36,"message"],[131,12,71,44],[131,13,71,45],[132,10,72,6],[133,10,73,6],[133,14,73,10],[133,21,73,17,"uploadError"],[133,32,73,28],[133,37,73,33],[133,45,73,41],[133,47,73,43],[134,12,74,8],[134,19,74,15],[135,14,74,17,"error"],[135,19,74,22],[135,21,74,24,"uploadError"],[136,12,74,36],[136,13,74,37],[137,10,75,6],[138,10,76,6],[138,17,76,13],[139,12,76,15,"error"],[139,17,76,20],[139,19,76,22],[140,10,76,38],[140,11,76,39],[141,8,77,4],[141,9,77,5],[141,18,77,14],[142,10,78,6,"setLoading"],[142,20,78,16],[142,21,78,17],[142,26,78,22],[142,27,78,23],[143,8,79,4],[144,6,80,2],[144,7,80,3],[145,6,80,3],[145,23,80,3,"_x"],[145,25,80,3],[146,8,80,3],[146,15,80,3,"_ref"],[146,19,80,3],[146,20,80,3,"apply"],[146,25,80,3],[146,32,80,3,"arguments"],[146,41,80,3],[147,6,80,3],[148,4,80,3],[148,9,80,5],[148,11,80,7],[148,12,80,8],[149,4,82,2],[149,11,82,9],[149,12,82,10,"upload"],[149,18,82,16],[149,20,82,18],[150,6,82,20,"loading"],[151,4,82,28],[151,5,82,29],[151,6,82,30],[152,2,83,0],[153,2,83,1,"_s"],[153,4,83,1],[153,5,3,9,"useUpload"],[153,14,3,18],[154,2,86,0],[154,6,86,0,"_default"],[154,14,86,0],[154,17,86,15,"useUpload"],[154,26,86,24],[155,0,86,25],[155,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD2E;CDG"},"hasCjsExports":false},"type":"js/module"}]}