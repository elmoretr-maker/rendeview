{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":47,"index":79}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":26,"column":60,"index":959},"end":{"line":26,"column":86,"index":985}}],"key":"FdAtEpA5N9mk6X5QUj7qWZFfnR8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":26,"column":10,"index":909},"end":{"line":26,"column":87,"index":986}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  require(_dependencyMap[3], \"expo-file-system\");\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var _yield$import = yield require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"expo-file-system\"),\n                readAsStringAsync = _yield$import.readAsStringAsync,\n                EncodingType = _yield$import.EncodingType;\n              var base64Data = yield readAsStringAsync(asset.uri, {\n                encoding: EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":161,"map":[[28,2,90,0,"Object"],[28,8,90,0],[28,9,90,0,"defineProperty"],[28,23,90,0],[28,24,90,0,"exports"],[28,31,90,0],[29,4,90,0,"enumerable"],[29,14,90,0],[30,4,90,0,"get"],[30,7,90,0],[30,18,90,0,"get"],[30,19,90,0],[31,6,90,0],[31,13,90,0,"_default"],[31,21,90,0],[32,4,90,0],[33,2,90,0],[34,2,89,0,"Object"],[34,8,89,0],[34,9,89,0,"defineProperty"],[34,23,89,0],[34,24,89,0,"exports"],[34,31,89,0],[35,4,89,0,"enumerable"],[35,14,89,0],[36,4,89,0,"get"],[36,7,89,0],[36,18,89,0,"get"],[36,19,89,0],[37,6,89,0],[37,13,89,9,"useUpload"],[37,22,89,18],[38,4,89,18],[39,2,89,18],[40,2,89,21],[40,6,89,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,89,21],[40,45,89,21,"require"],[40,52,89,21],[40,53,89,21,"_dependencyMap"],[40,67,89,21],[41,2,89,21],[41,6,89,21,"_asyncToGenerator"],[41,23,89,21],[41,26,89,21,"_interopDefault"],[41,41,89,21],[41,42,89,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,89,21],[42,2,89,21],[42,6,89,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,89,21],[42,42,89,21,"require"],[42,49,89,21],[42,50,89,21,"_dependencyMap"],[42,64,89,21],[43,2,89,21],[43,6,89,21,"_slicedToArray"],[43,20,89,21],[43,23,89,21,"_interopDefault"],[43,38,89,21],[43,39,89,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,89,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,2,0,"require"],[46,9,2,0],[46,10,2,0,"_dependencyMap"],[46,24,2,0],[47,2,4,0],[47,11,4,9,"useUpload"],[47,20,4,18,"useUpload"],[47,21,4,18],[47,23,4,21],[48,4,4,21,"_s"],[48,6,4,21],[49,4,5,2],[49,8,5,2,"_React$useState"],[49,23,5,2],[49,26,5,32,"React"],[49,31,5,37],[49,32,5,38,"useState"],[49,40,5,46],[49,41,5,47],[49,46,5,52],[49,47,5,53],[50,6,5,53,"_React$useState2"],[50,22,5,53],[50,29,5,53,"_slicedToArray"],[50,43,5,53],[50,44,5,53,"default"],[50,51,5,53],[50,53,5,53,"_React$useState"],[50,68,5,53],[51,6,5,9,"loading"],[51,13,5,16],[51,16,5,16,"_React$useState2"],[51,32,5,16],[52,6,5,18,"setLoading"],[52,16,5,28],[52,19,5,28,"_React$useState2"],[52,35,5,28],[53,4,6,2],[53,8,6,8,"upload"],[53,14,6,14],[53,17,6,17,"React"],[53,22,6,22],[53,23,6,23,"useCallback"],[53,34,6,34],[54,6,6,34],[54,10,6,34,"_ref"],[54,14,6,34],[54,21,6,34,"_asyncToGenerator"],[54,38,6,34],[54,39,6,34,"default"],[54,46,6,34],[54,48,6,35],[54,59,6,42,"input"],[54,64,6,47],[54,66,6,52],[55,8,7,4],[55,12,7,8],[56,10,8,6,"setLoading"],[56,20,8,16],[56,21,8,17],[56,25,8,21],[56,26,8,22],[57,10,9,6],[57,14,9,10,"response"],[57,22,9,18],[58,10,11,6],[58,14,11,10],[58,32,11,28],[58,36,11,32,"input"],[58,41,11,37],[58,45,11,41,"input"],[58,50,11,46],[58,51,11,47,"reactNativeAsset"],[58,67,11,63],[58,69,11,65],[59,12,12,8],[59,16,12,14,"asset"],[59,21,12,19],[59,24,12,22,"input"],[59,29,12,27],[59,30,12,28,"reactNativeAsset"],[59,46,12,44],[61,12,14,8],[62,12,15,8],[62,16,15,12,"asset"],[62,21,15,17],[62,22,15,18,"base64"],[62,28,15,24],[62,30,15,26],[63,14,16,10],[64,14,17,10,"response"],[64,22,17,18],[64,31,17,27,"fetch"],[64,36,17,32],[64,37,17,33],[64,57,17,53],[64,59,17,55],[65,16,18,12,"method"],[65,22,18,18],[65,24,18,20],[65,30,18,26],[66,16,19,12,"headers"],[66,23,19,19],[66,25,19,21],[67,18,20,14],[67,32,20,28],[67,34,20,30],[68,16,21,12],[68,17,21,13],[69,16,22,12,"body"],[69,20,22,16],[69,22,22,18,"JSON"],[69,26,22,22],[69,27,22,23,"stringify"],[69,36,22,32],[69,37,22,33],[70,18,22,35,"base64"],[70,24,22,41],[70,26,22,43,"asset"],[70,31,22,48],[70,32,22,49,"base64"],[71,16,22,56],[71,17,22,57],[72,14,23,10],[72,15,23,11],[72,16,23,12],[73,12,24,8],[73,13,24,9],[73,19,24,15],[73,23,24,19,"asset"],[73,28,24,24],[73,29,24,25,"uri"],[73,32,24,28],[73,34,24,30],[74,14,25,10],[75,14,26,10],[75,18,26,10,"_yield$import"],[75,31,26,10],[75,40,26,10,"require"],[75,47,26,10],[75,48,26,10,"_dependencyMap"],[75,62,26,10],[75,105,26,10,"_dependencyMap"],[75,119,26,10],[75,124,26,10,"_dependencyMap"],[75,138,26,10],[75,139,26,10,"paths"],[75,144,26,10],[76,16,26,18,"readAsStringAsync"],[76,33,26,35],[76,36,26,35,"_yield$import"],[76,49,26,35],[76,50,26,18,"readAsStringAsync"],[76,67,26,35],[77,16,26,37,"EncodingType"],[77,28,26,49],[77,31,26,49,"_yield$import"],[77,44,26,49],[77,45,26,37,"EncodingType"],[77,57,26,49],[78,14,27,10],[78,18,27,16,"base64Data"],[78,28,27,26],[78,37,27,35,"readAsStringAsync"],[78,54,27,52],[78,55,27,53,"asset"],[78,60,27,58],[78,61,27,59,"uri"],[78,64,27,62],[78,66,27,64],[79,16,28,12,"encoding"],[79,24,28,20],[79,26,28,22,"EncodingType"],[79,38,28,34],[79,39,28,35,"Base64"],[80,14,29,10],[80,15,29,11],[80,16,29,12],[81,14,30,10,"response"],[81,22,30,18],[81,31,30,27,"fetch"],[81,36,30,32],[81,37,30,33],[81,57,30,53],[81,59,30,55],[82,16,31,12,"method"],[82,22,31,18],[82,24,31,20],[82,30,31,26],[83,16,32,12,"headers"],[83,23,32,19],[83,25,32,21],[84,18,33,14],[84,32,33,28],[84,34,33,30],[85,16,34,12],[85,17,34,13],[86,16,35,12,"body"],[86,20,35,16],[86,22,35,18,"JSON"],[86,26,35,22],[86,27,35,23,"stringify"],[86,36,35,32],[86,37,35,33],[87,18,35,35,"base64"],[87,24,35,41],[87,26,35,43,"base64Data"],[88,16,35,54],[88,17,35,55],[89,14,36,10],[89,15,36,11],[89,16,36,12],[90,12,37,8],[90,13,37,9],[90,19,37,15],[91,14,38,10],[91,20,38,16],[91,24,38,20,"Error"],[91,29,38,25],[91,30,38,26],[91,65,38,61],[91,66,38,62],[92,12,39,8],[93,10,40,6],[93,11,40,7],[93,17,40,13],[93,21,40,17],[93,26,40,22],[93,30,40,26,"input"],[93,35,40,31],[93,37,40,33],[94,12,41,8,"response"],[94,20,41,16],[94,29,41,25,"fetch"],[94,34,41,30],[94,35,41,31],[94,55,41,51],[94,57,41,53],[95,14,42,10,"method"],[95,20,42,16],[95,22,42,18],[95,28,42,24],[96,14,43,10,"headers"],[96,21,43,17],[96,23,43,19],[97,16,44,12],[97,30,44,26],[97,32,44,28],[98,14,45,10],[98,15,45,11],[99,14,46,10,"body"],[99,18,46,14],[99,20,46,16,"JSON"],[99,24,46,20],[99,25,46,21,"stringify"],[99,34,46,30],[99,35,46,31],[100,16,46,33,"url"],[100,19,46,36],[100,21,46,38,"input"],[100,26,46,43],[100,27,46,44,"url"],[101,14,46,48],[101,15,46,49],[102,12,47,8],[102,13,47,9],[102,14,47,10],[103,10,48,6],[103,11,48,7],[103,17,48,13],[103,21,48,17],[103,29,48,25],[103,33,48,29,"input"],[103,38,48,34],[103,40,48,36],[104,12,49,8,"response"],[104,20,49,16],[104,29,49,25,"fetch"],[104,34,49,30],[104,35,49,31],[104,55,49,51],[104,57,49,53],[105,14,50,10,"method"],[105,20,50,16],[105,22,50,18],[105,28,50,24],[106,14,51,10,"headers"],[106,21,51,17],[106,23,51,19],[107,16,52,12],[107,30,52,26],[107,32,52,28],[108,14,53,10],[108,15,53,11],[109,14,54,10,"body"],[109,18,54,14],[109,20,54,16,"JSON"],[109,24,54,20],[109,25,54,21,"stringify"],[109,34,54,30],[109,35,54,31],[110,16,54,33,"base64"],[110,22,54,39],[110,24,54,41,"input"],[110,29,54,46],[110,30,54,47,"base64"],[111,14,54,54],[111,15,54,55],[112,12,55,8],[112,13,55,9],[112,14,55,10],[113,10,56,6],[113,11,56,7],[113,17,56,13],[114,12,57,8,"response"],[114,20,57,16],[114,29,57,25,"fetch"],[114,34,57,30],[114,35,57,31],[114,55,57,51],[114,57,57,53],[115,14,58,10,"method"],[115,20,58,16],[115,22,58,18],[115,28,58,24],[116,14,59,10,"headers"],[116,21,59,17],[116,23,59,19],[117,16,60,12],[117,30,60,26],[117,32,60,28],[118,14,61,10],[118,15,61,11],[119,14,62,10,"body"],[119,18,62,14],[119,20,62,16,"input"],[119,25,62,21],[119,26,62,22,"buffer"],[120,12,63,8],[120,13,63,9],[120,14,63,10],[121,10,64,6],[122,10,65,6],[122,14,65,10],[122,15,65,11,"response"],[122,23,65,19],[122,25,65,21,"ok"],[122,27,65,23],[122,29,65,25],[123,12,66,8],[123,16,66,12,"response"],[123,24,66,20],[123,28,66,24,"response"],[123,36,66,32],[123,37,66,33,"status"],[123,43,66,39],[123,48,66,44],[123,51,66,47],[123,53,66,49],[124,14,67,10],[124,20,67,16],[124,24,67,20,"Error"],[124,29,67,25],[124,30,67,26],[124,62,67,58],[124,63,67,59],[125,12,68,8],[126,12,69,8],[126,18,69,14],[126,22,69,18,"Error"],[126,27,69,23],[126,28,69,24],[126,43,69,39],[126,44,69,40],[127,10,70,6],[128,10,71,6],[128,14,71,12,"data"],[128,18,71,16],[128,27,71,25,"response"],[128,35,71,33],[128,36,71,34,"json"],[128,40,71,38],[128,41,71,39],[128,42,71,40],[129,10,72,6],[129,17,72,13],[130,12,72,15,"url"],[130,15,72,18],[130,17,72,20,"data"],[130,21,72,24],[130,22,72,25,"url"],[130,25,72,28],[131,12,72,30,"mimeType"],[131,20,72,38],[131,22,72,40,"data"],[131,26,72,44],[131,27,72,45,"mimeType"],[131,35,72,53],[131,39,72,57],[132,10,72,62],[132,11,72,63],[133,8,73,4],[133,9,73,5],[133,10,73,6],[133,17,73,13,"uploadError"],[133,28,73,24],[133,30,73,26],[134,10,74,6],[134,14,74,10,"uploadError"],[134,25,74,21],[134,37,74,33,"Error"],[134,42,74,38],[134,44,74,40],[135,12,75,8],[135,19,75,15],[136,14,75,17,"error"],[136,19,75,22],[136,21,75,24,"uploadError"],[136,32,75,35],[136,33,75,36,"message"],[137,12,75,44],[137,13,75,45],[138,10,76,6],[139,10,77,6],[139,14,77,10],[139,21,77,17,"uploadError"],[139,32,77,28],[139,37,77,33],[139,45,77,41],[139,47,77,43],[140,12,78,8],[140,19,78,15],[141,14,78,17,"error"],[141,19,78,22],[141,21,78,24,"uploadError"],[142,12,78,36],[142,13,78,37],[143,10,79,6],[144,10,80,6],[144,17,80,13],[145,12,80,15,"error"],[145,17,80,20],[145,19,80,22],[146,10,80,38],[146,11,80,39],[147,8,81,4],[147,9,81,5],[147,18,81,14],[148,10,82,6,"setLoading"],[148,20,82,16],[148,21,82,17],[148,26,82,22],[148,27,82,23],[149,8,83,4],[150,6,84,2],[150,7,84,3],[151,6,84,3],[151,23,84,3,"_x"],[151,25,84,3],[152,8,84,3],[152,15,84,3,"_ref"],[152,19,84,3],[152,20,84,3,"apply"],[152,25,84,3],[152,32,84,3,"arguments"],[152,41,84,3],[153,6,84,3],[154,4,84,3],[154,9,84,5],[154,11,84,7],[154,12,84,8],[155,4,86,2],[155,11,86,9],[155,12,86,10,"upload"],[155,18,86,16],[155,20,86,18],[156,6,86,20,"loading"],[157,4,86,28],[157,5,86,29],[157,6,86,30],[158,2,87,0],[159,2,87,1,"_s"],[159,4,87,1],[159,5,4,9,"useUpload"],[159,14,4,18],[160,2,90,0],[160,6,90,0,"_default"],[160,14,90,0],[160,17,90,15,"useUpload"],[160,26,90,24],[161,0,90,25],[161,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACG;mCCE;GD8E;CDG"},"hasCjsExports":false},"type":"js/module"}]}