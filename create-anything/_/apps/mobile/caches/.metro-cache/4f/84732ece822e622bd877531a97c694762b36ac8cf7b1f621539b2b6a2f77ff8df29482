{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":157,"map":[[28,2,88,0,"Object"],[28,8,88,0],[28,9,88,0,"defineProperty"],[28,23,88,0],[28,24,88,0,"exports"],[28,31,88,0],[29,4,88,0,"enumerable"],[29,14,88,0],[30,4,88,0,"get"],[30,7,88,0],[30,18,88,0,"get"],[30,19,88,0],[31,6,88,0],[31,13,88,0,"_default"],[31,21,88,0],[32,4,88,0],[33,2,88,0],[34,2,87,0,"Object"],[34,8,87,0],[34,9,87,0,"defineProperty"],[34,23,87,0],[34,24,87,0,"exports"],[34,31,87,0],[35,4,87,0,"enumerable"],[35,14,87,0],[36,4,87,0,"get"],[36,7,87,0],[36,18,87,0,"get"],[36,19,87,0],[37,6,87,0],[37,13,87,9,"useUpload"],[37,22,87,18],[38,4,87,18],[39,2,87,18],[40,2,87,21],[40,6,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,87,21],[40,45,87,21,"require"],[40,52,87,21],[40,53,87,21,"_dependencyMap"],[40,67,87,21],[41,2,87,21],[41,6,87,21,"_asyncToGenerator"],[41,23,87,21],[41,26,87,21,"_interopDefault"],[41,41,87,21],[41,42,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,87,21],[42,2,87,21],[42,6,87,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,87,21],[42,42,87,21,"require"],[42,49,87,21],[42,50,87,21,"_dependencyMap"],[42,64,87,21],[43,2,87,21],[43,6,87,21,"_slicedToArray"],[43,20,87,21],[43,23,87,21,"_interopDefault"],[43,38,87,21],[43,39,87,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,87,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[74,18,25,16,"base64Data"],[74,28,25,26],[74,37,25,35,"FileSystem"],[74,47,25,45],[74,48,25,46,"readAsStringAsync"],[74,65,25,63],[74,66,25,64,"asset"],[74,71,25,69],[74,72,25,70,"uri"],[74,75,25,73],[74,77,25,75],[75,16,26,12,"encoding"],[75,24,26,20],[75,26,26,22,"FileSystem"],[75,36,26,32],[75,37,26,33,"EncodingType"],[75,49,26,45],[75,50,26,46,"Base64"],[76,14,27,10],[76,15,27,11],[76,16,27,12],[77,14,28,10,"response"],[77,22,28,18],[77,31,28,27,"fetch"],[77,36,28,32],[77,37,28,33],[77,57,28,53],[77,59,28,55],[78,16,29,12,"method"],[78,22,29,18],[78,24,29,20],[78,30,29,26],[79,16,30,12,"headers"],[79,23,30,19],[79,25,30,21],[80,18,31,14],[80,32,31,28],[80,34,31,30],[81,16,32,12],[81,17,32,13],[82,16,33,12,"body"],[82,20,33,16],[82,22,33,18,"JSON"],[82,26,33,22],[82,27,33,23,"stringify"],[82,36,33,32],[82,37,33,33],[83,18,33,35,"base64"],[83,24,33,41],[83,26,33,43,"base64Data"],[84,16,33,54],[84,17,33,55],[85,14,34,10],[85,15,34,11],[85,16,34,12],[86,12,35,8],[86,13,35,9],[86,19,35,15],[87,14,36,10],[87,20,36,16],[87,24,36,20,"Error"],[87,29,36,25],[87,30,36,26],[87,65,36,61],[87,66,36,62],[88,12,37,8],[89,10,38,6],[89,11,38,7],[89,17,38,13],[89,21,38,17],[89,26,38,22],[89,30,38,26,"input"],[89,35,38,31],[89,37,38,33],[90,12,39,8,"response"],[90,20,39,16],[90,29,39,25,"fetch"],[90,34,39,30],[90,35,39,31],[90,55,39,51],[90,57,39,53],[91,14,40,10,"method"],[91,20,40,16],[91,22,40,18],[91,28,40,24],[92,14,41,10,"headers"],[92,21,41,17],[92,23,41,19],[93,16,42,12],[93,30,42,26],[93,32,42,28],[94,14,43,10],[94,15,43,11],[95,14,44,10,"body"],[95,18,44,14],[95,20,44,16,"JSON"],[95,24,44,20],[95,25,44,21,"stringify"],[95,34,44,30],[95,35,44,31],[96,16,44,33,"url"],[96,19,44,36],[96,21,44,38,"input"],[96,26,44,43],[96,27,44,44,"url"],[97,14,44,48],[97,15,44,49],[98,12,45,8],[98,13,45,9],[98,14,45,10],[99,10,46,6],[99,11,46,7],[99,17,46,13],[99,21,46,17],[99,29,46,25],[99,33,46,29,"input"],[99,38,46,34],[99,40,46,36],[100,12,47,8,"response"],[100,20,47,16],[100,29,47,25,"fetch"],[100,34,47,30],[100,35,47,31],[100,55,47,51],[100,57,47,53],[101,14,48,10,"method"],[101,20,48,16],[101,22,48,18],[101,28,48,24],[102,14,49,10,"headers"],[102,21,49,17],[102,23,49,19],[103,16,50,12],[103,30,50,26],[103,32,50,28],[104,14,51,10],[104,15,51,11],[105,14,52,10,"body"],[105,18,52,14],[105,20,52,16,"JSON"],[105,24,52,20],[105,25,52,21,"stringify"],[105,34,52,30],[105,35,52,31],[106,16,52,33,"base64"],[106,22,52,39],[106,24,52,41,"input"],[106,29,52,46],[106,30,52,47,"base64"],[107,14,52,54],[107,15,52,55],[108,12,53,8],[108,13,53,9],[108,14,53,10],[109,10,54,6],[109,11,54,7],[109,17,54,13],[110,12,55,8,"response"],[110,20,55,16],[110,29,55,25,"fetch"],[110,34,55,30],[110,35,55,31],[110,55,55,51],[110,57,55,53],[111,14,56,10,"method"],[111,20,56,16],[111,22,56,18],[111,28,56,24],[112,14,57,10,"headers"],[112,21,57,17],[112,23,57,19],[113,16,58,12],[113,30,58,26],[113,32,58,28],[114,14,59,10],[114,15,59,11],[115,14,60,10,"body"],[115,18,60,14],[115,20,60,16,"input"],[115,25,60,21],[115,26,60,22,"buffer"],[116,12,61,8],[116,13,61,9],[116,14,61,10],[117,10,62,6],[118,10,63,6],[118,14,63,10],[118,15,63,11,"response"],[118,23,63,19],[118,25,63,21,"ok"],[118,27,63,23],[118,29,63,25],[119,12,64,8],[119,16,64,12,"response"],[119,24,64,20],[119,28,64,24,"response"],[119,36,64,32],[119,37,64,33,"status"],[119,43,64,39],[119,48,64,44],[119,51,64,47],[119,53,64,49],[120,14,65,10],[120,20,65,16],[120,24,65,20,"Error"],[120,29,65,25],[120,30,65,26],[120,62,65,58],[120,63,65,59],[121,12,66,8],[122,12,67,8],[122,18,67,14],[122,22,67,18,"Error"],[122,27,67,23],[122,28,67,24],[122,43,67,39],[122,44,67,40],[123,10,68,6],[124,10,69,6],[124,14,69,12,"data"],[124,18,69,16],[124,27,69,25,"response"],[124,35,69,33],[124,36,69,34,"json"],[124,40,69,38],[124,41,69,39],[124,42,69,40],[125,10,70,6],[125,17,70,13],[126,12,70,15,"url"],[126,15,70,18],[126,17,70,20,"data"],[126,21,70,24],[126,22,70,25,"url"],[126,25,70,28],[127,12,70,30,"mimeType"],[127,20,70,38],[127,22,70,40,"data"],[127,26,70,44],[127,27,70,45,"mimeType"],[127,35,70,53],[127,39,70,57],[128,10,70,62],[128,11,70,63],[129,8,71,4],[129,9,71,5],[129,10,71,6],[129,17,71,13,"uploadError"],[129,28,71,24],[129,30,71,26],[130,10,72,6],[130,14,72,10,"uploadError"],[130,25,72,21],[130,37,72,33,"Error"],[130,42,72,38],[130,44,72,40],[131,12,73,8],[131,19,73,15],[132,14,73,17,"error"],[132,19,73,22],[132,21,73,24,"uploadError"],[132,32,73,35],[132,33,73,36,"message"],[133,12,73,44],[133,13,73,45],[134,10,74,6],[135,10,75,6],[135,14,75,10],[135,21,75,17,"uploadError"],[135,32,75,28],[135,37,75,33],[135,45,75,41],[135,47,75,43],[136,12,76,8],[136,19,76,15],[137,14,76,17,"error"],[137,19,76,22],[137,21,76,24,"uploadError"],[138,12,76,36],[138,13,76,37],[139,10,77,6],[140,10,78,6],[140,17,78,13],[141,12,78,15,"error"],[141,17,78,20],[141,19,78,22],[142,10,78,38],[142,11,78,39],[143,8,79,4],[143,9,79,5],[143,18,79,14],[144,10,80,6,"setLoading"],[144,20,80,16],[144,21,80,17],[144,26,80,22],[144,27,80,23],[145,8,81,4],[146,6,82,2],[146,7,82,3],[147,6,82,3],[147,23,82,3,"_x"],[147,25,82,3],[148,8,82,3],[148,15,82,3,"_ref"],[148,19,82,3],[148,20,82,3,"apply"],[148,25,82,3],[148,32,82,3,"arguments"],[148,41,82,3],[149,6,82,3],[150,4,82,3],[150,9,82,5],[150,11,82,7],[150,12,82,8],[151,4,84,2],[151,11,84,9],[151,12,84,10,"upload"],[151,18,84,16],[151,20,84,18],[152,6,84,20,"loading"],[153,4,84,28],[153,5,84,29],[153,6,84,30],[154,2,85,0],[155,2,85,1,"_s"],[155,4,85,1],[155,5,3,9,"useUpload"],[155,14,3,18],[156,2,88,0],[156,6,88,0,"_default"],[156,14,88,0],[156,17,88,15,"useUpload"],[156,26,88,24],[157,0,88,25],[157,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD6E;CDG"},"hasCjsExports":false},"type":"js/module"}]}