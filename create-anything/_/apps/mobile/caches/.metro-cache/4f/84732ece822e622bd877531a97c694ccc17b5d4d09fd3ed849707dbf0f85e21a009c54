{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":25,"column":35,"index":886},"end":{"line":25,"column":61,"index":912}}],"key":"FdAtEpA5N9mk6X5QUj7qWZFfnR8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":25,"column":16,"index":867},"end":{"line":25,"column":61,"index":912}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var FileSystem = yield require(_dependencyMap[4], \"expo/internal/async-require-module\")(_dependencyMap[3], _dependencyMap.paths, \"expo-file-system\");\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/objects/upload\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":158,"map":[[28,2,89,0,"Object"],[28,8,89,0],[28,9,89,0,"defineProperty"],[28,23,89,0],[28,24,89,0,"exports"],[28,31,89,0],[29,4,89,0,"enumerable"],[29,14,89,0],[30,4,89,0,"get"],[30,7,89,0],[30,18,89,0,"get"],[30,19,89,0],[31,6,89,0],[31,13,89,0,"_default"],[31,21,89,0],[32,4,89,0],[33,2,89,0],[34,2,88,0,"Object"],[34,8,88,0],[34,9,88,0,"defineProperty"],[34,23,88,0],[34,24,88,0,"exports"],[34,31,88,0],[35,4,88,0,"enumerable"],[35,14,88,0],[36,4,88,0,"get"],[36,7,88,0],[36,18,88,0,"get"],[36,19,88,0],[37,6,88,0],[37,13,88,9,"useUpload"],[37,22,88,18],[38,4,88,18],[39,2,88,18],[40,2,88,21],[40,6,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,88,21],[40,45,88,21,"require"],[40,52,88,21],[40,53,88,21,"_dependencyMap"],[40,67,88,21],[41,2,88,21],[41,6,88,21,"_asyncToGenerator"],[41,23,88,21],[41,26,88,21,"_interopDefault"],[41,41,88,21],[41,42,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,88,21],[42,2,88,21],[42,6,88,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,88,21],[42,42,88,21,"require"],[42,49,88,21],[42,50,88,21,"_dependencyMap"],[42,64,88,21],[43,2,88,21],[43,6,88,21,"_slicedToArray"],[43,20,88,21],[43,23,88,21,"_interopDefault"],[43,38,88,21],[43,39,88,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,88,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[74,18,25,16,"FileSystem"],[74,28,25,26],[74,37,25,26,"require"],[74,44,25,26],[74,45,25,26,"_dependencyMap"],[74,59,25,26],[74,102,25,26,"_dependencyMap"],[74,116,25,26],[74,121,25,26,"_dependencyMap"],[74,135,25,26],[74,136,25,26,"paths"],[74,141,25,26],[74,162,25,61],[75,14,26,10],[75,18,26,16,"base64Data"],[75,28,26,26],[75,37,26,35,"FileSystem"],[75,47,26,45],[75,48,26,46,"readAsStringAsync"],[75,65,26,63],[75,66,26,64,"asset"],[75,71,26,69],[75,72,26,70,"uri"],[75,75,26,73],[75,77,26,75],[76,16,27,12,"encoding"],[76,24,27,20],[76,26,27,22,"FileSystem"],[76,36,27,32],[76,37,27,33,"EncodingType"],[76,49,27,45],[76,50,27,46,"Base64"],[77,14,28,10],[77,15,28,11],[77,16,28,12],[78,14,29,10,"response"],[78,22,29,18],[78,31,29,27,"fetch"],[78,36,29,32],[78,37,29,33],[78,57,29,53],[78,59,29,55],[79,16,30,12,"method"],[79,22,30,18],[79,24,30,20],[79,30,30,26],[80,16,31,12,"headers"],[80,23,31,19],[80,25,31,21],[81,18,32,14],[81,32,32,28],[81,34,32,30],[82,16,33,12],[82,17,33,13],[83,16,34,12,"body"],[83,20,34,16],[83,22,34,18,"JSON"],[83,26,34,22],[83,27,34,23,"stringify"],[83,36,34,32],[83,37,34,33],[84,18,34,35,"base64"],[84,24,34,41],[84,26,34,43,"base64Data"],[85,16,34,54],[85,17,34,55],[86,14,35,10],[86,15,35,11],[86,16,35,12],[87,12,36,8],[87,13,36,9],[87,19,36,15],[88,14,37,10],[88,20,37,16],[88,24,37,20,"Error"],[88,29,37,25],[88,30,37,26],[88,65,37,61],[88,66,37,62],[89,12,38,8],[90,10,39,6],[90,11,39,7],[90,17,39,13],[90,21,39,17],[90,26,39,22],[90,30,39,26,"input"],[90,35,39,31],[90,37,39,33],[91,12,40,8,"response"],[91,20,40,16],[91,29,40,25,"fetch"],[91,34,40,30],[91,35,40,31],[91,55,40,51],[91,57,40,53],[92,14,41,10,"method"],[92,20,41,16],[92,22,41,18],[92,28,41,24],[93,14,42,10,"headers"],[93,21,42,17],[93,23,42,19],[94,16,43,12],[94,30,43,26],[94,32,43,28],[95,14,44,10],[95,15,44,11],[96,14,45,10,"body"],[96,18,45,14],[96,20,45,16,"JSON"],[96,24,45,20],[96,25,45,21,"stringify"],[96,34,45,30],[96,35,45,31],[97,16,45,33,"url"],[97,19,45,36],[97,21,45,38,"input"],[97,26,45,43],[97,27,45,44,"url"],[98,14,45,48],[98,15,45,49],[99,12,46,8],[99,13,46,9],[99,14,46,10],[100,10,47,6],[100,11,47,7],[100,17,47,13],[100,21,47,17],[100,29,47,25],[100,33,47,29,"input"],[100,38,47,34],[100,40,47,36],[101,12,48,8,"response"],[101,20,48,16],[101,29,48,25,"fetch"],[101,34,48,30],[101,35,48,31],[101,55,48,51],[101,57,48,53],[102,14,49,10,"method"],[102,20,49,16],[102,22,49,18],[102,28,49,24],[103,14,50,10,"headers"],[103,21,50,17],[103,23,50,19],[104,16,51,12],[104,30,51,26],[104,32,51,28],[105,14,52,10],[105,15,52,11],[106,14,53,10,"body"],[106,18,53,14],[106,20,53,16,"JSON"],[106,24,53,20],[106,25,53,21,"stringify"],[106,34,53,30],[106,35,53,31],[107,16,53,33,"base64"],[107,22,53,39],[107,24,53,41,"input"],[107,29,53,46],[107,30,53,47,"base64"],[108,14,53,54],[108,15,53,55],[109,12,54,8],[109,13,54,9],[109,14,54,10],[110,10,55,6],[110,11,55,7],[110,17,55,13],[111,12,56,8,"response"],[111,20,56,16],[111,29,56,25,"fetch"],[111,34,56,30],[111,35,56,31],[111,56,56,52],[111,58,56,54],[112,14,57,10,"method"],[112,20,57,16],[112,22,57,18],[112,28,57,24],[113,14,58,10,"headers"],[113,21,58,17],[113,23,58,19],[114,16,59,12],[114,30,59,26],[114,32,59,28],[115,14,60,10],[115,15,60,11],[116,14,61,10,"body"],[116,18,61,14],[116,20,61,16,"input"],[116,25,61,21],[116,26,61,22,"buffer"],[117,12,62,8],[117,13,62,9],[117,14,62,10],[118,10,63,6],[119,10,64,6],[119,14,64,10],[119,15,64,11,"response"],[119,23,64,19],[119,25,64,21,"ok"],[119,27,64,23],[119,29,64,25],[120,12,65,8],[120,16,65,12,"response"],[120,24,65,20],[120,28,65,24,"response"],[120,36,65,32],[120,37,65,33,"status"],[120,43,65,39],[120,48,65,44],[120,51,65,47],[120,53,65,49],[121,14,66,10],[121,20,66,16],[121,24,66,20,"Error"],[121,29,66,25],[121,30,66,26],[121,62,66,58],[121,63,66,59],[122,12,67,8],[123,12,68,8],[123,18,68,14],[123,22,68,18,"Error"],[123,27,68,23],[123,28,68,24],[123,43,68,39],[123,44,68,40],[124,10,69,6],[125,10,70,6],[125,14,70,12,"data"],[125,18,70,16],[125,27,70,25,"response"],[125,35,70,33],[125,36,70,34,"json"],[125,40,70,38],[125,41,70,39],[125,42,70,40],[126,10,71,6],[126,17,71,13],[127,12,71,15,"url"],[127,15,71,18],[127,17,71,20,"data"],[127,21,71,24],[127,22,71,25,"url"],[127,25,71,28],[128,12,71,30,"mimeType"],[128,20,71,38],[128,22,71,40,"data"],[128,26,71,44],[128,27,71,45,"mimeType"],[128,35,71,53],[128,39,71,57],[129,10,71,62],[129,11,71,63],[130,8,72,4],[130,9,72,5],[130,10,72,6],[130,17,72,13,"uploadError"],[130,28,72,24],[130,30,72,26],[131,10,73,6],[131,14,73,10,"uploadError"],[131,25,73,21],[131,37,73,33,"Error"],[131,42,73,38],[131,44,73,40],[132,12,74,8],[132,19,74,15],[133,14,74,17,"error"],[133,19,74,22],[133,21,74,24,"uploadError"],[133,32,74,35],[133,33,74,36,"message"],[134,12,74,44],[134,13,74,45],[135,10,75,6],[136,10,76,6],[136,14,76,10],[136,21,76,17,"uploadError"],[136,32,76,28],[136,37,76,33],[136,45,76,41],[136,47,76,43],[137,12,77,8],[137,19,77,15],[138,14,77,17,"error"],[138,19,77,22],[138,21,77,24,"uploadError"],[139,12,77,36],[139,13,77,37],[140,10,78,6],[141,10,79,6],[141,17,79,13],[142,12,79,15,"error"],[142,17,79,20],[142,19,79,22],[143,10,79,38],[143,11,79,39],[144,8,80,4],[144,9,80,5],[144,18,80,14],[145,10,81,6,"setLoading"],[145,20,81,16],[145,21,81,17],[145,26,81,22],[145,27,81,23],[146,8,82,4],[147,6,83,2],[147,7,83,3],[148,6,83,3],[148,23,83,3,"_x"],[148,25,83,3],[149,8,83,3],[149,15,83,3,"_ref"],[149,19,83,3],[149,20,83,3,"apply"],[149,25,83,3],[149,32,83,3,"arguments"],[149,41,83,3],[150,6,83,3],[151,4,83,3],[151,9,83,5],[151,11,83,7],[151,12,83,8],[152,4,85,2],[152,11,85,9],[152,12,85,10,"upload"],[152,18,85,16],[152,20,85,18],[153,6,85,20,"loading"],[154,4,85,28],[154,5,85,29],[154,6,85,30],[155,2,86,0],[156,2,86,1,"_s"],[156,4,86,1],[156,5,3,9,"useUpload"],[156,14,3,18],[157,2,89,0],[157,6,89,0,"_default"],[157,14,89,0],[157,17,89,15,"useUpload"],[157,26,89,24],[158,0,89,25],[158,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD8E;CDG"},"hasCjsExports":false},"type":"js/module"}]}