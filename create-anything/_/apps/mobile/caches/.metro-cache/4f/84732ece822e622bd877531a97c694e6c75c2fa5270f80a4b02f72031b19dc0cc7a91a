{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":25,"column":41,"index":892},"end":{"line":25,"column":67,"index":918}}],"key":"FdAtEpA5N9mk6X5QUj7qWZFfnR8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":25,"column":16,"index":867},"end":{"line":25,"column":67,"index":918}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n\n            // Use base64 upload for React Native assets (Replit upload service doesn't support RN FormData)\n            if (asset.base64) {\n              // Photos with base64\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: asset.base64\n                })\n              });\n            } else if (asset.uri) {\n              // Videos or assets without base64 - convert to base64\n              var FileSystemModule = yield require(_dependencyMap[4], \"expo/internal/async-require-module\")(_dependencyMap[3], _dependencyMap.paths, \"expo-file-system\");\n              var FileSystem = FileSystemModule.default || FileSystemModule;\n              var base64Data = yield FileSystem.readAsStringAsync(asset.uri, {\n                encoding: FileSystem.EncodingType.Base64\n              });\n              response = yield fetch(\"/api/upload-base64\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  base64: base64Data\n                })\n              });\n            } else {\n              throw new Error(\"Asset missing both base64 and uri\");\n            }\n          } else if (\"url\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch(\"/api/upload-base64\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response?.ok) {\n            if (response && response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Network error\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":159,"map":[[28,2,90,0,"Object"],[28,8,90,0],[28,9,90,0,"defineProperty"],[28,23,90,0],[28,24,90,0,"exports"],[28,31,90,0],[29,4,90,0,"enumerable"],[29,14,90,0],[30,4,90,0,"get"],[30,7,90,0],[30,18,90,0,"get"],[30,19,90,0],[31,6,90,0],[31,13,90,0,"_default"],[31,21,90,0],[32,4,90,0],[33,2,90,0],[34,2,89,0,"Object"],[34,8,89,0],[34,9,89,0,"defineProperty"],[34,23,89,0],[34,24,89,0,"exports"],[34,31,89,0],[35,4,89,0,"enumerable"],[35,14,89,0],[36,4,89,0,"get"],[36,7,89,0],[36,18,89,0,"get"],[36,19,89,0],[37,6,89,0],[37,13,89,9,"useUpload"],[37,22,89,18],[38,4,89,18],[39,2,89,18],[40,2,89,21],[40,6,89,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,89,21],[40,45,89,21,"require"],[40,52,89,21],[40,53,89,21,"_dependencyMap"],[40,67,89,21],[41,2,89,21],[41,6,89,21,"_asyncToGenerator"],[41,23,89,21],[41,26,89,21,"_interopDefault"],[41,41,89,21],[41,42,89,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,89,21],[42,2,89,21],[42,6,89,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,89,21],[42,42,89,21,"require"],[42,49,89,21],[42,50,89,21,"_dependencyMap"],[42,64,89,21],[43,2,89,21],[43,6,89,21,"_slicedToArray"],[43,20,89,21],[43,23,89,21,"_interopDefault"],[43,38,89,21],[43,39,89,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,89,21],[44,2,1,0],[44,6,1,0,"_react"],[44,12,1,0],[44,15,1,0,"require"],[44,22,1,0],[44,23,1,0,"_dependencyMap"],[44,37,1,0],[45,2,1,0],[45,6,1,0,"React"],[45,11,1,0],[45,14,1,0,"_interopNamespace"],[45,31,1,0],[45,32,1,0,"_react"],[45,38,1,0],[46,2,3,0],[46,11,3,9,"useUpload"],[46,20,3,18,"useUpload"],[46,21,3,18],[46,23,3,21],[47,4,3,21,"_s"],[47,6,3,21],[48,4,4,2],[48,8,4,2,"_React$useState"],[48,23,4,2],[48,26,4,32,"React"],[48,31,4,37],[48,32,4,38,"useState"],[48,40,4,46],[48,41,4,47],[48,46,4,52],[48,47,4,53],[49,6,4,53,"_React$useState2"],[49,22,4,53],[49,29,4,53,"_slicedToArray"],[49,43,4,53],[49,44,4,53,"default"],[49,51,4,53],[49,53,4,53,"_React$useState"],[49,68,4,53],[50,6,4,9,"loading"],[50,13,4,16],[50,16,4,16,"_React$useState2"],[50,32,4,16],[51,6,4,18,"setLoading"],[51,16,4,28],[51,19,4,28,"_React$useState2"],[51,35,4,28],[52,4,5,2],[52,8,5,8,"upload"],[52,14,5,14],[52,17,5,17,"React"],[52,22,5,22],[52,23,5,23,"useCallback"],[52,34,5,34],[53,6,5,34],[53,10,5,34,"_ref"],[53,14,5,34],[53,21,5,34,"_asyncToGenerator"],[53,38,5,34],[53,39,5,34,"default"],[53,46,5,34],[53,48,5,35],[53,59,5,42,"input"],[53,64,5,47],[53,66,5,52],[54,8,6,4],[54,12,6,8],[55,10,7,6,"setLoading"],[55,20,7,16],[55,21,7,17],[55,25,7,21],[55,26,7,22],[56,10,8,6],[56,14,8,10,"response"],[56,22,8,18],[57,10,10,6],[57,14,10,10],[57,32,10,28],[57,36,10,32,"input"],[57,41,10,37],[57,45,10,41,"input"],[57,50,10,46],[57,51,10,47,"reactNativeAsset"],[57,67,10,63],[57,69,10,65],[58,12,11,8],[58,16,11,14,"asset"],[58,21,11,19],[58,24,11,22,"input"],[58,29,11,27],[58,30,11,28,"reactNativeAsset"],[58,46,11,44],[60,12,13,8],[61,12,14,8],[61,16,14,12,"asset"],[61,21,14,17],[61,22,14,18,"base64"],[61,28,14,24],[61,30,14,26],[62,14,15,10],[63,14,16,10,"response"],[63,22,16,18],[63,31,16,27,"fetch"],[63,36,16,32],[63,37,16,33],[63,57,16,53],[63,59,16,55],[64,16,17,12,"method"],[64,22,17,18],[64,24,17,20],[64,30,17,26],[65,16,18,12,"headers"],[65,23,18,19],[65,25,18,21],[66,18,19,14],[66,32,19,28],[66,34,19,30],[67,16,20,12],[67,17,20,13],[68,16,21,12,"body"],[68,20,21,16],[68,22,21,18,"JSON"],[68,26,21,22],[68,27,21,23,"stringify"],[68,36,21,32],[68,37,21,33],[69,18,21,35,"base64"],[69,24,21,41],[69,26,21,43,"asset"],[69,31,21,48],[69,32,21,49,"base64"],[70,16,21,56],[70,17,21,57],[71,14,22,10],[71,15,22,11],[71,16,22,12],[72,12,23,8],[72,13,23,9],[72,19,23,15],[72,23,23,19,"asset"],[72,28,23,24],[72,29,23,25,"uri"],[72,32,23,28],[72,34,23,30],[73,14,24,10],[74,14,25,10],[74,18,25,16,"FileSystemModule"],[74,34,25,32],[74,43,25,32,"require"],[74,50,25,32],[74,51,25,32,"_dependencyMap"],[74,65,25,32],[74,108,25,32,"_dependencyMap"],[74,122,25,32],[74,127,25,32,"_dependencyMap"],[74,141,25,32],[74,142,25,32,"paths"],[74,147,25,32],[74,168,25,67],[75,14,26,10],[75,18,26,16,"FileSystem"],[75,28,26,26],[75,31,26,29,"FileSystemModule"],[75,47,26,45],[75,48,26,46,"default"],[75,55,26,53],[75,59,26,57,"FileSystemModule"],[75,75,26,73],[76,14,27,10],[76,18,27,16,"base64Data"],[76,28,27,26],[76,37,27,35,"FileSystem"],[76,47,27,45],[76,48,27,46,"readAsStringAsync"],[76,65,27,63],[76,66,27,64,"asset"],[76,71,27,69],[76,72,27,70,"uri"],[76,75,27,73],[76,77,27,75],[77,16,28,12,"encoding"],[77,24,28,20],[77,26,28,22,"FileSystem"],[77,36,28,32],[77,37,28,33,"EncodingType"],[77,49,28,45],[77,50,28,46,"Base64"],[78,14,29,10],[78,15,29,11],[78,16,29,12],[79,14,30,10,"response"],[79,22,30,18],[79,31,30,27,"fetch"],[79,36,30,32],[79,37,30,33],[79,57,30,53],[79,59,30,55],[80,16,31,12,"method"],[80,22,31,18],[80,24,31,20],[80,30,31,26],[81,16,32,12,"headers"],[81,23,32,19],[81,25,32,21],[82,18,33,14],[82,32,33,28],[82,34,33,30],[83,16,34,12],[83,17,34,13],[84,16,35,12,"body"],[84,20,35,16],[84,22,35,18,"JSON"],[84,26,35,22],[84,27,35,23,"stringify"],[84,36,35,32],[84,37,35,33],[85,18,35,35,"base64"],[85,24,35,41],[85,26,35,43,"base64Data"],[86,16,35,54],[86,17,35,55],[87,14,36,10],[87,15,36,11],[87,16,36,12],[88,12,37,8],[88,13,37,9],[88,19,37,15],[89,14,38,10],[89,20,38,16],[89,24,38,20,"Error"],[89,29,38,25],[89,30,38,26],[89,65,38,61],[89,66,38,62],[90,12,39,8],[91,10,40,6],[91,11,40,7],[91,17,40,13],[91,21,40,17],[91,26,40,22],[91,30,40,26,"input"],[91,35,40,31],[91,37,40,33],[92,12,41,8,"response"],[92,20,41,16],[92,29,41,25,"fetch"],[92,34,41,30],[92,35,41,31],[92,55,41,51],[92,57,41,53],[93,14,42,10,"method"],[93,20,42,16],[93,22,42,18],[93,28,42,24],[94,14,43,10,"headers"],[94,21,43,17],[94,23,43,19],[95,16,44,12],[95,30,44,26],[95,32,44,28],[96,14,45,10],[96,15,45,11],[97,14,46,10,"body"],[97,18,46,14],[97,20,46,16,"JSON"],[97,24,46,20],[97,25,46,21,"stringify"],[97,34,46,30],[97,35,46,31],[98,16,46,33,"url"],[98,19,46,36],[98,21,46,38,"input"],[98,26,46,43],[98,27,46,44,"url"],[99,14,46,48],[99,15,46,49],[100,12,47,8],[100,13,47,9],[100,14,47,10],[101,10,48,6],[101,11,48,7],[101,17,48,13],[101,21,48,17],[101,29,48,25],[101,33,48,29,"input"],[101,38,48,34],[101,40,48,36],[102,12,49,8,"response"],[102,20,49,16],[102,29,49,25,"fetch"],[102,34,49,30],[102,35,49,31],[102,55,49,51],[102,57,49,53],[103,14,50,10,"method"],[103,20,50,16],[103,22,50,18],[103,28,50,24],[104,14,51,10,"headers"],[104,21,51,17],[104,23,51,19],[105,16,52,12],[105,30,52,26],[105,32,52,28],[106,14,53,10],[106,15,53,11],[107,14,54,10,"body"],[107,18,54,14],[107,20,54,16,"JSON"],[107,24,54,20],[107,25,54,21,"stringify"],[107,34,54,30],[107,35,54,31],[108,16,54,33,"base64"],[108,22,54,39],[108,24,54,41,"input"],[108,29,54,46],[108,30,54,47,"base64"],[109,14,54,54],[109,15,54,55],[110,12,55,8],[110,13,55,9],[110,14,55,10],[111,10,56,6],[111,11,56,7],[111,17,56,13],[112,12,57,8,"response"],[112,20,57,16],[112,29,57,25,"fetch"],[112,34,57,30],[112,35,57,31],[112,55,57,51],[112,57,57,53],[113,14,58,10,"method"],[113,20,58,16],[113,22,58,18],[113,28,58,24],[114,14,59,10,"headers"],[114,21,59,17],[114,23,59,19],[115,16,60,12],[115,30,60,26],[115,32,60,28],[116,14,61,10],[116,15,61,11],[117,14,62,10,"body"],[117,18,62,14],[117,20,62,16,"input"],[117,25,62,21],[117,26,62,22,"buffer"],[118,12,63,8],[118,13,63,9],[118,14,63,10],[119,10,64,6],[120,10,65,6],[120,14,65,10],[120,15,65,11,"response"],[120,23,65,19],[120,25,65,21,"ok"],[120,27,65,23],[120,29,65,25],[121,12,66,8],[121,16,66,12,"response"],[121,24,66,20],[121,28,66,24,"response"],[121,36,66,32],[121,37,66,33,"status"],[121,43,66,39],[121,48,66,44],[121,51,66,47],[121,53,66,49],[122,14,67,10],[122,20,67,16],[122,24,67,20,"Error"],[122,29,67,25],[122,30,67,26],[122,62,67,58],[122,63,67,59],[123,12,68,8],[124,12,69,8],[124,18,69,14],[124,22,69,18,"Error"],[124,27,69,23],[124,28,69,24],[124,43,69,39],[124,44,69,40],[125,10,70,6],[126,10,71,6],[126,14,71,12,"data"],[126,18,71,16],[126,27,71,25,"response"],[126,35,71,33],[126,36,71,34,"json"],[126,40,71,38],[126,41,71,39],[126,42,71,40],[127,10,72,6],[127,17,72,13],[128,12,72,15,"url"],[128,15,72,18],[128,17,72,20,"data"],[128,21,72,24],[128,22,72,25,"url"],[128,25,72,28],[129,12,72,30,"mimeType"],[129,20,72,38],[129,22,72,40,"data"],[129,26,72,44],[129,27,72,45,"mimeType"],[129,35,72,53],[129,39,72,57],[130,10,72,62],[130,11,72,63],[131,8,73,4],[131,9,73,5],[131,10,73,6],[131,17,73,13,"uploadError"],[131,28,73,24],[131,30,73,26],[132,10,74,6],[132,14,74,10,"uploadError"],[132,25,74,21],[132,37,74,33,"Error"],[132,42,74,38],[132,44,74,40],[133,12,75,8],[133,19,75,15],[134,14,75,17,"error"],[134,19,75,22],[134,21,75,24,"uploadError"],[134,32,75,35],[134,33,75,36,"message"],[135,12,75,44],[135,13,75,45],[136,10,76,6],[137,10,77,6],[137,14,77,10],[137,21,77,17,"uploadError"],[137,32,77,28],[137,37,77,33],[137,45,77,41],[137,47,77,43],[138,12,78,8],[138,19,78,15],[139,14,78,17,"error"],[139,19,78,22],[139,21,78,24,"uploadError"],[140,12,78,36],[140,13,78,37],[141,10,79,6],[142,10,80,6],[142,17,80,13],[143,12,80,15,"error"],[143,17,80,20],[143,19,80,22],[144,10,80,38],[144,11,80,39],[145,8,81,4],[145,9,81,5],[145,18,81,14],[146,10,82,6,"setLoading"],[146,20,82,16],[146,21,82,17],[146,26,82,22],[146,27,82,23],[147,8,83,4],[148,6,84,2],[148,7,84,3],[149,6,84,3],[149,23,84,3,"_x"],[149,25,84,3],[150,8,84,3],[150,15,84,3,"_ref"],[150,19,84,3],[150,20,84,3,"apply"],[150,25,84,3],[150,32,84,3,"arguments"],[150,41,84,3],[151,6,84,3],[152,4,84,3],[152,9,84,5],[152,11,84,7],[152,12,84,8],[153,4,86,2],[153,11,86,9],[153,12,86,10,"upload"],[153,18,86,16],[153,20,86,18],[154,6,86,20,"loading"],[155,4,86,28],[155,5,86,29],[155,6,86,30],[156,2,87,0],[157,2,87,1,"_s"],[157,4,87,1],[157,5,3,9,"useUpload"],[157,14,3,18],[158,2,90,0],[158,6,90,0,"_default"],[158,14,90,0],[158,17,90,15,"useUpload"],[158,26,90,24],[159,0,90,25],[159,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD+E;CDG"},"hasCjsExports":false},"type":"js/module"}]}